<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>五、应用层 | Hedon</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/noteSite/favicon.ico">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/noteSite/assets/css/0.styles.0f3b0cbd.css" as="style"><link rel="preload" href="/noteSite/assets/js/app.ca354767.js" as="script"><link rel="preload" href="/noteSite/assets/js/2.0f8877a4.js" as="script"><link rel="preload" href="/noteSite/assets/js/78.d3015c43.js" as="script"><link rel="prefetch" href="/noteSite/assets/js/10.f9d8595d.js"><link rel="prefetch" href="/noteSite/assets/js/100.e7e5750f.js"><link rel="prefetch" href="/noteSite/assets/js/101.816d8345.js"><link rel="prefetch" href="/noteSite/assets/js/102.d3d13d7f.js"><link rel="prefetch" href="/noteSite/assets/js/103.5a26f6d4.js"><link rel="prefetch" href="/noteSite/assets/js/104.dee6b5ba.js"><link rel="prefetch" href="/noteSite/assets/js/105.e4658823.js"><link rel="prefetch" href="/noteSite/assets/js/106.873e248d.js"><link rel="prefetch" href="/noteSite/assets/js/107.0afb78fd.js"><link rel="prefetch" href="/noteSite/assets/js/108.5b9d2a2d.js"><link rel="prefetch" href="/noteSite/assets/js/109.de316061.js"><link rel="prefetch" href="/noteSite/assets/js/11.d6449e4b.js"><link rel="prefetch" href="/noteSite/assets/js/110.b854d098.js"><link rel="prefetch" href="/noteSite/assets/js/111.5e835d59.js"><link rel="prefetch" href="/noteSite/assets/js/112.522d12af.js"><link rel="prefetch" href="/noteSite/assets/js/113.50dc234e.js"><link rel="prefetch" href="/noteSite/assets/js/114.e79e2944.js"><link rel="prefetch" href="/noteSite/assets/js/115.044fe7df.js"><link rel="prefetch" href="/noteSite/assets/js/116.cf098ee5.js"><link rel="prefetch" href="/noteSite/assets/js/117.0b29e6ab.js"><link rel="prefetch" href="/noteSite/assets/js/118.f44902e8.js"><link rel="prefetch" href="/noteSite/assets/js/119.be776af5.js"><link rel="prefetch" href="/noteSite/assets/js/12.1bd2f9cc.js"><link rel="prefetch" href="/noteSite/assets/js/120.dee506a6.js"><link rel="prefetch" href="/noteSite/assets/js/121.b4d1007e.js"><link rel="prefetch" href="/noteSite/assets/js/122.0fdd6110.js"><link rel="prefetch" href="/noteSite/assets/js/123.a3c8b518.js"><link rel="prefetch" href="/noteSite/assets/js/124.e8563467.js"><link rel="prefetch" href="/noteSite/assets/js/125.9e4d2f3d.js"><link rel="prefetch" href="/noteSite/assets/js/126.e44ff9d2.js"><link rel="prefetch" href="/noteSite/assets/js/127.c8dbdf07.js"><link rel="prefetch" href="/noteSite/assets/js/128.5bd53273.js"><link rel="prefetch" href="/noteSite/assets/js/129.a6c80817.js"><link rel="prefetch" href="/noteSite/assets/js/13.2fb815a0.js"><link rel="prefetch" href="/noteSite/assets/js/130.10c962ee.js"><link rel="prefetch" href="/noteSite/assets/js/131.ddace38b.js"><link rel="prefetch" href="/noteSite/assets/js/132.bacbfe06.js"><link rel="prefetch" href="/noteSite/assets/js/133.ab89572e.js"><link rel="prefetch" href="/noteSite/assets/js/134.5b9d5b50.js"><link rel="prefetch" href="/noteSite/assets/js/135.06b35ded.js"><link rel="prefetch" href="/noteSite/assets/js/136.bb3917ae.js"><link rel="prefetch" href="/noteSite/assets/js/137.0001da74.js"><link rel="prefetch" href="/noteSite/assets/js/138.2062abce.js"><link rel="prefetch" href="/noteSite/assets/js/139.73ce7c25.js"><link rel="prefetch" href="/noteSite/assets/js/14.c4835766.js"><link rel="prefetch" href="/noteSite/assets/js/140.8dc3d97f.js"><link rel="prefetch" href="/noteSite/assets/js/141.c5fa446c.js"><link rel="prefetch" href="/noteSite/assets/js/142.b3249d0d.js"><link rel="prefetch" href="/noteSite/assets/js/143.3c59fcbf.js"><link rel="prefetch" href="/noteSite/assets/js/144.7bea030f.js"><link rel="prefetch" href="/noteSite/assets/js/145.9463d914.js"><link rel="prefetch" href="/noteSite/assets/js/146.ac56558e.js"><link rel="prefetch" href="/noteSite/assets/js/147.05555580.js"><link rel="prefetch" href="/noteSite/assets/js/148.b761eafe.js"><link rel="prefetch" href="/noteSite/assets/js/149.fe311dc5.js"><link rel="prefetch" href="/noteSite/assets/js/15.75fb42a0.js"><link rel="prefetch" href="/noteSite/assets/js/150.36fb6c24.js"><link rel="prefetch" href="/noteSite/assets/js/151.97a845db.js"><link rel="prefetch" href="/noteSite/assets/js/152.ce10e32c.js"><link rel="prefetch" href="/noteSite/assets/js/153.39e9f780.js"><link rel="prefetch" href="/noteSite/assets/js/154.6bd2911b.js"><link rel="prefetch" href="/noteSite/assets/js/155.7b3ba956.js"><link rel="prefetch" href="/noteSite/assets/js/156.66b275ba.js"><link rel="prefetch" href="/noteSite/assets/js/157.03d5c59a.js"><link rel="prefetch" href="/noteSite/assets/js/158.f01a0239.js"><link rel="prefetch" href="/noteSite/assets/js/16.c118e0d3.js"><link rel="prefetch" href="/noteSite/assets/js/17.8311cdff.js"><link rel="prefetch" href="/noteSite/assets/js/18.574f909b.js"><link rel="prefetch" href="/noteSite/assets/js/19.167701f3.js"><link rel="prefetch" href="/noteSite/assets/js/20.359043f9.js"><link rel="prefetch" href="/noteSite/assets/js/21.ed6203ac.js"><link rel="prefetch" href="/noteSite/assets/js/22.c8731325.js"><link rel="prefetch" href="/noteSite/assets/js/23.f01b7a89.js"><link rel="prefetch" href="/noteSite/assets/js/24.2f969812.js"><link rel="prefetch" href="/noteSite/assets/js/25.7e7ae244.js"><link rel="prefetch" href="/noteSite/assets/js/26.eabb7cc4.js"><link rel="prefetch" href="/noteSite/assets/js/27.f59ddf00.js"><link rel="prefetch" href="/noteSite/assets/js/28.3cd8d62d.js"><link rel="prefetch" href="/noteSite/assets/js/29.e890aaed.js"><link rel="prefetch" href="/noteSite/assets/js/3.8dfd584f.js"><link rel="prefetch" href="/noteSite/assets/js/30.7f173a01.js"><link rel="prefetch" href="/noteSite/assets/js/31.48b02312.js"><link rel="prefetch" href="/noteSite/assets/js/32.5806ae0d.js"><link rel="prefetch" href="/noteSite/assets/js/33.3b6e3cea.js"><link rel="prefetch" href="/noteSite/assets/js/34.da5ca9e6.js"><link rel="prefetch" href="/noteSite/assets/js/35.f8c08081.js"><link rel="prefetch" href="/noteSite/assets/js/36.924389ab.js"><link rel="prefetch" href="/noteSite/assets/js/37.16072096.js"><link rel="prefetch" href="/noteSite/assets/js/38.14d4d4ad.js"><link rel="prefetch" href="/noteSite/assets/js/39.8ba4629f.js"><link rel="prefetch" href="/noteSite/assets/js/4.a61e4cea.js"><link rel="prefetch" href="/noteSite/assets/js/40.41bcb56f.js"><link rel="prefetch" href="/noteSite/assets/js/41.a8b1031b.js"><link rel="prefetch" href="/noteSite/assets/js/42.7b46d277.js"><link rel="prefetch" href="/noteSite/assets/js/43.a51e2c48.js"><link rel="prefetch" href="/noteSite/assets/js/44.067e083a.js"><link rel="prefetch" href="/noteSite/assets/js/45.d42a4472.js"><link rel="prefetch" href="/noteSite/assets/js/46.d435b0ff.js"><link rel="prefetch" href="/noteSite/assets/js/47.303bf99e.js"><link rel="prefetch" href="/noteSite/assets/js/48.d7b349a6.js"><link rel="prefetch" href="/noteSite/assets/js/49.735707cc.js"><link rel="prefetch" href="/noteSite/assets/js/5.2bccd6df.js"><link rel="prefetch" href="/noteSite/assets/js/50.65da6b41.js"><link rel="prefetch" href="/noteSite/assets/js/51.8d1204fc.js"><link rel="prefetch" href="/noteSite/assets/js/52.fb0882f9.js"><link rel="prefetch" href="/noteSite/assets/js/53.45eecd86.js"><link rel="prefetch" href="/noteSite/assets/js/54.414595ee.js"><link rel="prefetch" href="/noteSite/assets/js/55.80cac2f3.js"><link rel="prefetch" href="/noteSite/assets/js/56.4b3b5f99.js"><link rel="prefetch" href="/noteSite/assets/js/57.a7717ada.js"><link rel="prefetch" href="/noteSite/assets/js/58.4fbcad49.js"><link rel="prefetch" href="/noteSite/assets/js/59.a117b179.js"><link rel="prefetch" href="/noteSite/assets/js/6.f3d86aa7.js"><link rel="prefetch" href="/noteSite/assets/js/60.5b344ff2.js"><link rel="prefetch" href="/noteSite/assets/js/61.040d1f25.js"><link rel="prefetch" href="/noteSite/assets/js/62.be7755b1.js"><link rel="prefetch" href="/noteSite/assets/js/63.2f285263.js"><link rel="prefetch" href="/noteSite/assets/js/64.a093a5d2.js"><link rel="prefetch" href="/noteSite/assets/js/65.30a7483c.js"><link rel="prefetch" href="/noteSite/assets/js/66.1eec2887.js"><link rel="prefetch" href="/noteSite/assets/js/67.3b89cc15.js"><link rel="prefetch" href="/noteSite/assets/js/68.faf6d976.js"><link rel="prefetch" href="/noteSite/assets/js/69.021dbef8.js"><link rel="prefetch" href="/noteSite/assets/js/7.da9921ea.js"><link rel="prefetch" href="/noteSite/assets/js/70.43f086eb.js"><link rel="prefetch" href="/noteSite/assets/js/71.1d9e2bc6.js"><link rel="prefetch" href="/noteSite/assets/js/72.8c362431.js"><link rel="prefetch" href="/noteSite/assets/js/73.b45a037c.js"><link rel="prefetch" href="/noteSite/assets/js/74.3da1816a.js"><link rel="prefetch" href="/noteSite/assets/js/75.f760d7ac.js"><link rel="prefetch" href="/noteSite/assets/js/76.dd422674.js"><link rel="prefetch" href="/noteSite/assets/js/77.04aa5b0a.js"><link rel="prefetch" href="/noteSite/assets/js/79.21109ac8.js"><link rel="prefetch" href="/noteSite/assets/js/8.25459cd8.js"><link rel="prefetch" href="/noteSite/assets/js/80.42d01eb8.js"><link rel="prefetch" href="/noteSite/assets/js/81.1a0835fa.js"><link rel="prefetch" href="/noteSite/assets/js/82.2fccaee4.js"><link rel="prefetch" href="/noteSite/assets/js/83.4fde3bc4.js"><link rel="prefetch" href="/noteSite/assets/js/84.25cf5e9e.js"><link rel="prefetch" href="/noteSite/assets/js/85.501c7d2f.js"><link rel="prefetch" href="/noteSite/assets/js/86.d8e796c9.js"><link rel="prefetch" href="/noteSite/assets/js/87.fb0cf6a0.js"><link rel="prefetch" href="/noteSite/assets/js/88.64345b35.js"><link rel="prefetch" href="/noteSite/assets/js/89.7f61d042.js"><link rel="prefetch" href="/noteSite/assets/js/9.409ee5bd.js"><link rel="prefetch" href="/noteSite/assets/js/90.2f31f1d3.js"><link rel="prefetch" href="/noteSite/assets/js/91.962f5c43.js"><link rel="prefetch" href="/noteSite/assets/js/92.2815201c.js"><link rel="prefetch" href="/noteSite/assets/js/93.61ae48e6.js"><link rel="prefetch" href="/noteSite/assets/js/94.ac0c566a.js"><link rel="prefetch" href="/noteSite/assets/js/95.5c09880f.js"><link rel="prefetch" href="/noteSite/assets/js/96.221bb5d8.js"><link rel="prefetch" href="/noteSite/assets/js/97.853c26ba.js"><link rel="prefetch" href="/noteSite/assets/js/98.16a0c2d7.js"><link rel="prefetch" href="/noteSite/assets/js/99.54ac870e.js">
    <link rel="stylesheet" href="/noteSite/assets/css/0.styles.0f3b0cbd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/noteSite/" class="home-link router-link-active"><img src="/noteSite/images/hedon.png" alt="Hedon" class="logo"> <span class="site-name can-hide">Hedon</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS Menu" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS Menu" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/cs/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/cn/" class="nav-link router-link-active">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/component/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Leetcode Menu" class="dropdown-title"><span class="title">Leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="Leetcode Menu" class="mobile-dropdown-title"><span class="title">Leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/algorithm-thought/" class="nav-link">
  算法思想
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/leetcode/" class="nav-link">
  Leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS Menu" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS Menu" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/cs/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/cn/" class="nav-link router-link-active">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/component/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Leetcode Menu" class="dropdown-title"><span class="title">Leetcode</span> <span class="arrow down"></span></button> <button type="button" aria-label="Leetcode Menu" class="mobile-dropdown-title"><span class="title">Leetcode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/algorithm-thought/" class="nav-link">
  算法思想
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/leetcode/leetcode/" class="nav-link">
  Leetcode
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteSite/cs/cn/cn-total.html" class="sidebar-link">一、计算机网络模型</a></li><li><a href="/noteSite/cs/cn/cn-link-layer.html" class="sidebar-link">二、链路层</a></li><li><a href="/noteSite/cs/cn/cn-network-layer.html" class="sidebar-link">三、网络层</a></li><li><a href="/noteSite/cs/cn/cn-transfer-layer.html" class="sidebar-link">四、传输层</a></li><li><a href="/noteSite/cs/cn/cn-apply-layer.html" aria-current="page" class="active sidebar-link">五、应用层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#_1-dns" class="sidebar-link">1. DNS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#域名" class="sidebar-link">域名</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#查询方式" class="sidebar-link">查询方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#_2-dhcp" class="sidebar-link">2. DHCP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#简介-2" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#特点" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#分配" class="sidebar-link">分配</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#原理-2" class="sidebar-link">原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#_3-http" class="sidebar-link">3. HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#简介-3" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#特点-2" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#请求结构" class="sidebar-link">请求结构</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#响应结构" class="sidebar-link">响应结构</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#状态码" class="sidebar-link">状态码</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#工作原理" class="sidebar-link">工作原理</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#请求方式" class="sidebar-link">请求方式</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#cookie" class="sidebar-link">Cookie</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#http1-0-与-http1-1-的区别" class="sidebar-link">HTTP1.0 与 HTTP1.1 的区别</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#http1-0-与-http2-0-的区别" class="sidebar-link">HTTP1.0 与 HTTP2.0 的区别</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#如何知道-http-发送的请求结束" class="sidebar-link">如何知道 HTTP 发送的请求结束</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#session" class="sidebar-link">Session</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#_4-https" class="sidebar-link">4. HTTPS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#简介-6" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#ssl-tsl" class="sidebar-link">SSL/TSL</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#https-数据传输流程" class="sidebar-link">HTTPS 数据传输流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#_5-socket" class="sidebar-link">5. Socket</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#简介-7" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#tcp" class="sidebar-link">TCP</a></li><li class="sidebar-sub-header"><a href="/noteSite/cs/cn/cn-apply-layer.html#udp" class="sidebar-link">UDP</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="五、应用层"><a href="#五、应用层" class="header-anchor">#</a> 五、应用层</h1> <h2 id="_1-dns"><a href="#_1-dns" class="header-anchor">#</a> 1. DNS</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p>DNS（Domain Name System，域名系统）是用于将域名转为 IP 地址的协议。</p> <h3 id="域名"><a href="#域名" class="header-anchor">#</a> 域名</h3> <h5 id="顶级域"><a href="#顶级域" class="header-anchor">#</a> 顶级域</h5> <p>国家</p> <ul><li>cn：中国</li> <li>us：美国</li> <li>uk：英国</li> <li>ca：加拿大</li></ul> <p>通用：</p> <ul><li>com：商业机构</li> <li>net：网络服务机构</li> <li>gov：政府</li> <li>org：非营利性组织</li></ul> <h5 id="二级域"><a href="#二级域" class="header-anchor">#</a> 二级域</h5> <ul><li>aliyun</li> <li>taobao</li> <li>baidu</li> <li>google</li></ul> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <blockquote><p>参考：https://zhuanlan.zhihu.com/p/79350395</p></blockquote> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx01iwgj30u013rwh4.jpg" alt="img" style="zoom:50%;"> <ol><li>浏览器输入地址</li> <li>然后浏览器这个进程去调操作系统某个库里的 gethostbyname 函数(例如，Linux GNU glibc标准库的 gethostbyname 函数)</li> <li>然后这个函数通过网卡给 DNS 服务器发 UDP 请求</li> <li>接收结果</li> <li>然后将结果给返回给浏览器</li></ol> <p>特殊：</p> <ul><li>(1) 我们在用 Chrome 浏览器的时候，其实会先去浏览器的 DNS 缓存里头查询，DNS 缓存中没有，再去调用 gethostbyname 函数</li> <li>(2) gethostbyname 函数在试图进行 DNS 解析之前首先检查域名是否在本地 Hosts 里，如果没找到再去 DNS 服务器上查。</li></ul> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> UDP 在哪里使用？ TCP 在哪里使用？</span>
<span class="token list punctuation">1.</span> gethostbyname 函数通过网卡发送请求给 DNS 服务器解析域名的时候使用 UDP。
<span class="token list punctuation">2.</span> 区域传送的时候使用 TCP
	DNS的规范规定了2种类型的DNS服务器，一个叫主DNS服务器，一个叫辅助DNS服务器（其实就是一份备份）。在一个区中主DNS服务器从自己本机的数据文件中读取该区的 DNS 数据信息，而辅助DNS服务器则从区的主DNS服务器中读取该区的DNS数据信息。当一个辅助DNS服务器启动时，它需要与主DNS服务器通信，并加载数据信息，这就叫做区传送（zone transfer）。 这种情况下，使用TCP协议。

<span class="token title important"><span class="token punctuation">#</span> DNS 在域名解析上是用 UDP 还是 TCP？</span>
UDP。

<span class="token title important"><span class="token punctuation">#</span> 域名解析为什么要用 UDP？</span>
因为UDP快！UDP的DNS协议只要一个请求、一个应答就好了。而使用基于TCP的DNS协议要三次握手、发送数据以及应答、四次挥手。但是UDP协议传输内容不能超过512字节。不过客户端向DNS服务器查询域名，一般返回的内容都不超过512字节，用UDP传输即可。

<span class="token title important"><span class="token punctuation">#</span> 区域复制为什么要用 TCP？</span>
因为TCP协议可靠性好！你要从区域的主DNS上复制内容，必须保证可靠性。同时 TCP 协议传输的内容大，UDP 最大只能传512字节，同步的数据很可能会大于512字节。

<span class="token title important"><span class="token punctuation">#</span> 为什么 UDP 最大只能传 512 字节？</span>
<span class="token list punctuation">-</span> 纠正：UPD 最大不止传 512 字节。
以太网帧在局域网中的 MTU 是 1500byte，但是在非局域网环境，如：internet 下的时候，MTU 是各个路由器进行一个配置的。所以，通常路由器默认的 MTU 为576字节。所以，为了适应网络环境，DNS 协议在返回的数据报大于 512 的时候，就转化为了 TCP 协议。

<span class="token title important"><span class="token punctuation">#</span> UDP 的最大传输长度讨论</span>
UDP允许传输的最大长度理论上2^16 - udp head - iphead（ 65507 字节 = 65535 - 20 - 8）

但是实际上UDP数据报的数据区最大长度为1472（1500-20-8）字节，理由如下：
<span class="token list punctuation">1.</span> 首先,我们知道,TCP/IP通常被认为是一个四层协议系统,包括链路层,网络层,运输层,应用层. 
<span class="token list punctuation">2.</span> UDP属于运输层,下面我们由下至上一步一步来看:    
	以太网(Ethernet)数据帧的长度必须在46-1500字节之间,这是由以太网的物理特性决定的。这个1500字节被称为链路层的MTU(最大传输单元)。
	但这并不是指链路层的长度被限制在1500字节,其实这这个MTU指的是链路层的数据区。 并不包括链路层的首部和尾部的18个字节。 所以,事实上,这个1500字节就是网络层IP数据报的长度限制。 因为IP数据报的首部为20字节,所以IP数据报的数据区长度最大为1480字节.    
	而这个1480字节就是用来放TCP传来的TCP报文段或UDP传来的UDP数据报的。 又因为UDP数据报的首部8字节,所以UDP数据报的数据区最大长度为1472字节。这个1472字节就是我们可以使用的字节数。

<span class="token list punctuation">3.</span> 进行Internet编程时则不同,因为Internet上的路由器可能会将MTU设为不同的值.    
	如果我们假定MTU为1500来发送数据的,而途经的某个网络的MTU值小于1500字节,那么系统将会使用一系列的机制来调整MTU值,使数据报能够顺利到达目的地,这样就会做许多不必要的操作。鉴于Internet上的标准MTU值为576字节, 建议在进行Internet的UDP编程时. 最好将UDP的数据长度控件在548字节(576-8-20)以内.
</code></pre></div><h3 id="查询方式"><a href="#查询方式" class="header-anchor">#</a> 查询方式</h3> <h5 id="dns递归查询"><a href="#dns递归查询" class="header-anchor">#</a> [DNS递归查询]</h5> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx4okh8j314c0p4abx.jpg" alt="image-20210402103254465" style="zoom:33%;"> <h5 id="dns迭代查询"><a href="#dns迭代查询" class="header-anchor">#</a> [DNS迭代查询]</h5> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx4aq6lj315w0potba.jpg" alt="image-20210402103438687" style="zoom:33%;"> <h2 id="_2-dhcp"><a href="#_2-dhcp" class="header-anchor">#</a> 2. DHCP</h2> <h3 id="简介-2"><a href="#简介-2" class="header-anchor">#</a> 简介</h3> <p>DHCP（Dynamic Host Configuration Protocol，动态主机设置协议）通常被应用在大型的局域网络环境中，主要作用是集中的管理、分配 IP 地址，使网络环境中的主机动态的获得 IP 地址、Gateway 地址、DNS 服务器地址等信息，并能够提升地址的使用率。</p> <ul><li>即插即用联网</li></ul> <h3 id="特点"><a href="#特点" class="header-anchor">#</a> 特点</h3> <ul><li>DHCP 是一个局域网协议。</li> <li>DHCP 是应用 UDP 协议的应用层协议。</li></ul> <h3 id="分配"><a href="#分配" class="header-anchor">#</a> 分配</h3> <h5 id="自动分配方式"><a href="#自动分配方式" class="header-anchor">#</a> 自动分配方式</h5> <blockquote><p>DHCP 服务器为主机指定一个永久性的 IP 地址，一旦 DHCP 客户端第一次成功从 DHCP 服务器端租用到IP地址后，就可以永久性的使用该地址。</p></blockquote> <h5 id="动态分配方式"><a href="#动态分配方式" class="header-anchor">#</a> 动态分配方式</h5> <blockquote><p>DHCP 服务器给主机指定一个具有时间限制的IP地址，时间到期或主机明确表示放弃该地址时，该地址可以被其他主机使用。</p></blockquote> <h5 id="手工分配方式"><a href="#手工分配方式" class="header-anchor">#</a> 手工分配方式</h5> <blockquote><p>客户端的 IP 地址是由网络管理员指定的，DHCP 服务器只是将指定的 IP 地址告诉客户端主机。</p></blockquote> <h3 id="原理-2"><a href="#原理-2" class="header-anchor">#</a> 原理</h3> <p>DHCP 协议采用 UDP 作为传输协议，主机发送请求消息到 <code>DHCP 服务器的 67 号</code>端口，DHCP 服务器回应应答消息给<code>主机的 68 号</code>端口。详细的交互过程如下图：</p> <p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx0z52yj30dq087q3b.jpg" alt="img"></p> <p>1、DHCP Client 以广播的方式发出 <code>DHCP Discover</code> 报文。</p> <p>2、所有的 DHCP Server 都能够接收到 DHCP Client 发送的 DHCP Discover 报文，所有的 DHCP Server 都会给出响应，向 DHCP Client 发送一个 <code>DHCP Offer</code> 报文。</p> <blockquote><p>DHCP Offer 报文中 “Your(Client) IP Address” 字段就是 DHCP Server 能够提供给 DHCP Client 使用的IP地址，且 DHCP Server 会将自己的 IP 地址放在 “option” 字段中以便 DHCP Client 区分不同的 DHCP Server。DHCP Server 在发出此报文后会存在一个已分配IP地址的纪录。</p></blockquote> <p>3、DHCP Client 只能处理其中的一个 DHCP Offer 报文，一般的原则是 DHCP Client 处理<code>最先收到</code>的 DHCP Offer 报文。</p> <p>​	 DHCP Client 会发出一个广播的 <code>DHCP Request</code> 报文，在选项字段中会加入选中的 DHCP Server 的 IP 地址和需要的 IP 地址。</p> <p>4、DHCP Server 收到 DHCP Request 报文后，判断选项字段中的 IP 地址是否与自己的地址相同。</p> <ul><li>如果不相同，DHCP Server 不做任何处理只清除相应 IP 地址分配记录；</li> <li>如果相同，DHCP Server 就会向 DHCP Client 响应一个 <code>DHCP ACK</code> 报文，并在选项字段中增加 IP 地址的使用租期信息。</li></ul> <p>5、DHCP Client 接收到 DHCP ACK 报文后，检查 DHCP Server 分配的 IP 地址是否能够使用。</p> <ul><li>如果可以使用，则 DHCP Client 成功获得 IP 地址并根据 IP 地址使用租期自动启动续延过程；</li> <li>如果 DHCP Client 发现分配的 IP 地址已经被使用，则 DHCP Client 向 DHCPServer 发出 <code>DHCP Decline</code> 报文，通知 DHCP Server 禁用这个IP地址，然后 DHCP Client 开始新的地址申请过程。</li></ul> <p>6、DHCP Client 在成功获取 IP 地址后，随时可以通过发送 <code>DHCP Release</code> 报文释放自己的IP地址，DHCP Server 收到 DHCP Release 报文后，会回收相应的IP地址并重新分配。</p> <h2 id="_3-http"><a href="#_3-http" class="header-anchor">#</a> 3. HTTP</h2> <h3 id="简介-3"><a href="#简介-3" class="header-anchor">#</a> 简介</h3> <p>HTTP（Hypertext Transfer Protocol，超文本传输协议）是用于从万维网服务器传输超文本到本地浏览器的传送协议。</p> <h3 id="特点-2"><a href="#特点-2" class="header-anchor">#</a> 特点</h3> <ul><li><strong>简单快速</strong>：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</li> <li><strong>灵活</strong>：HTTP允许传输任意类型的数据对象。正在传输的类型由 Content-Type 加以标记。</li> <li><strong>无连接</strong>：限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</li> <li><strong>无状态</strong>：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</li> <li><strong>支持 B/S 及 C/S 模式</strong></li></ul> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 请简述 B/S 和 C/S 的区别？</span>
B/S是浏览器/服务器的英文缩写，是一种通过浏览器访问服务器端数据的软件形式，其特点是用户不用在本地安装软件，只要有一个浏览器即可使用产品，而且用户不用关心软件的升级更新等问题。到由于受限于网络等因素，这种模式的系统访问速度较慢。
C/S则是客户端/服务器的英文缩写，这类软件的使用者需要在本地电脑安装客户端程序，就像QQ。其特点就是访问速度快，界面优雅。但一旦软件有更新，用户需要手动下载，较为不便。而且在没有安装客户端的电脑上，用户无法使用系统。
<span class="token list punctuation">1.</span> 硬件环境不同
C/S一般建立在小范围里的网络环境，局域网之间在通过专门服务器提供链接和数据交换服务。
B/S 建立在广域网之上的，不必是专门的网络硬件环境，比如：电话上网，租用设备，信息自己管理有比 C/S 更强的适应范围，一般只要有操作系统和浏览器就行。
<span class="token list punctuation">2.</span> 对安全要求不同
C/S一般建立在抓用的网络上，小范围里的网络环境，局域网之间在通过专门服务器提供链接和数据交换服务。
B/S建立在广域网之上的，不必是专门的网络硬件环境，比如：电话上网，租用设备，信息自己管理有比C/S更强的适应范围，一般只要有操作系统和浏览器就行
</code></pre></div><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mwzbf23j31ii0beabc.jpg" alt="image-20210323102219235"></p> <h3 id="请求结构"><a href="#请求结构" class="header-anchor">#</a> 请求结构</h3> <p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx3s5a2j30eg053t8u.jpg" alt="img"></p> <h3 id="响应结构"><a href="#响应结构" class="header-anchor">#</a> 响应结构</h3> <p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx3b1enj30hh087jrw.jpg" alt="这里写图片描述"></p> <h3 id="状态码"><a href="#状态码" class="header-anchor">#</a> 状态码</h3> <ul><li>1xx 消息——请求已被服务器接收，继续处理</li> <li>2xx 成功——请求已成功被服务器接收、理解、并接受</li> <li>3xx 重定向——需要后续操作才能完成这一请求</li> <li>4xx 请求错误——请求含有词法错误或者无法被执行</li> <li>5xx 服务器错误——服务器在处理某个正确请求时发生错误</li></ul> <p>常见状态码</p> <ul><li>200 OK：正常返回信息</li> <li>301：当前资源已经被删除了，重定向到另外一个位置，后面还是需要重定向。</li> <li>302：当前资源暂时不可用，先重定向到另外一个位置，后面可能不需要重定向。</li> <li>400 Bad Request：客户端请求有语法错误，不能为服务器所理解</li> <li>401 Unauthorized：请求未经授权，这个状态码必须和 WWW-Authenticate 报头域一起使用（没认证）</li> <li>403 Forbidden：服务器收到请求，但是拒绝提供服务（认证了但是没权限）</li> <li>404 Not Found：请求资源不存在，一般是 URL 输错了</li> <li>500 Internal Server Error：服务器发生不可预期的错误</li> <li>503 Server Unavailable：服务器当前不能处理客户端的请求，一段时间后可能恢复正常</li></ul> <h3 id="工作原理"><a href="#工作原理" class="header-anchor">#</a> 工作原理</h3> <p>HTTP 协议定义 Web 客户端如何从 Web 服务器请求 Web 页面，以及服务器如何把 Web 页面传送给客户端。HTTP 协议采用了<code>请求/响应</code>模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p> <p>以下是 HTTP 请求/响应的步骤：</p> <ol><li><p>客户端连接到 Web 服务器
一个 HTTP 客户端，通常是浏览器，与 Web 服务器的 HTTP 端口（默认为 80 ）建立一个 TCP 套接字连接。例如，<a href="http://www.baidu.com/" target="_blank" rel="noopener noreferrer">http://www.baidu.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p>发送 HTTP 请求
通过 TCP 套接字，客户端向 Web 服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据 4 部分组成。</p></li> <li><p>服务器接受请求并返回 HTTP 响应
Web 服务器解析请求，定位请求资源。服务器将资源复本写到 TCP 套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据 4 部分组成。</p></li> <li><p>释放连接 TCP 连接
若 connection 模式为 close，则服务器主动关闭 TCP 连接，客户端被动关闭连接，释放 TCP 连接；</p> <p>若 connection 模式为 keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;</p></li> <li><p>客户端浏览器解析 HTML 内容
客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的 HTML 文档和文档的字符集。客户端浏览器读取响应数据 HTML，根据 HTML 的语法对其进行格式化，并在浏览器窗口中显示。</p></li></ol> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 在浏览器地址栏键入URL，按下回车之后会经历以下流程：</span>
<span class="token list punctuation">1.</span> 浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;
<span class="token list punctuation">2.</span> 解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
<span class="token list punctuation">3.</span> 浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
<span class="token list punctuation">4.</span> 服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
<span class="token list punctuation">5.</span> 释放 TCP 连接;
<span class="token list punctuation">6.</span> 浏览器将该 html 文本并显示内容; 　
</code></pre></div><h3 id="请求方式"><a href="#请求方式" class="header-anchor">#</a> 请求方式</h3> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> GET 请求和 POST 请求的区别：</span>
<span class="token list punctuation">1.</span> HTTP 报文层面：GET 将请求信息放在 URL， POST 放在报文体中。
<span class="token list punctuation">2.</span> 数据库层面：GET 符合幂等性和安全性（GET 是做查询操作），POST 不符合（POST 是修改）。
<span class="token list punctuation">3.</span> 其他层面：GET 可以被缓存、被存储，而 POST 不行。
<span class="token list punctuation">4.</span> 数据长度方面：GET 因为请求信息放在 URL，URL 具有长度限制，所以 GET 请求长度有限，而 POST 没有限制。
<span class="token list punctuation">5.</span> GET产生一个TCP数据包；POST产生两个TCP数据包
 对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；
 而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。
<span class="token list punctuation">6.</span> 安全性方面：get安全性非常低，post安全性较高。 但是如果没有加密，他们安全级别都是一样的，随便一个监听器都可以把所有的数据监听到。
</code></pre></div><h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> Cookie</h3> <h5 id="简介-4"><a href="#简介-4" class="header-anchor">#</a> 简介</h5> <p>Cookie 是由服务器发送给客户端的特殊信息，以文本的形式存放在客户端。</p> <p>客户端再次请求时，会把  Cookie 回发。</p> <p>服务器接收到后，会解析 Cookie 生成与客户端相对应的内容。</p> <h5 id="cookie-的设置以及发送过程"><a href="#cookie-的设置以及发送过程" class="header-anchor">#</a> Cookie 的设置以及发送过程</h5> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx0hl42j30z40hq755.jpg" alt="image-20210111011025310" style="zoom:50%;"> <h3 id="http1-0-与-http1-1-的区别"><a href="#http1-0-与-http1-1-的区别" class="header-anchor">#</a> HTTP1.0 与 HTTP1.1 的区别</h3> <p>① 持久与非持久</p> <p>HTTP 1.0规定浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接，服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求。</p> <p>HTTP 1.1则支持持久连接Persistent Connection, 并且默认使用persistent connection。在同一个tcp的连接中可以传送多个HTTP请求和响应。多个请求和响应可以重叠，多个请求和响应可以同时进行。</p> <p>（但服务器端必须按照接收到客户端请求的先后顺序依次回送响应结果，以保证客户端能够区分出每次请求的响应内容。</p> <p>② HTTP 1.1增加 host 字段</p> <p>在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。</p> <p>HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。此外，服务器应该接受以绝对路径标记的资源请求。</p> <h3 id="http1-0-与-http2-0-的区别"><a href="#http1-0-与-http2-0-的区别" class="header-anchor">#</a> HTTP1.0 与 HTTP2.0 的区别</h3> <blockquote><p>① 相比于 HTTP/1.X 的文本（字符串）传送， HTTP/2.0 采用二进制传送。客户端和服务器传输数据时把数据分成帧，帧组成了数据流，流具有流 ID 标识和优先级，通过优先级以及流依赖能够一定程度上解决关键请求被阻塞的问题。</p> <p>② HTTP/2.0 支持多路复用。因为流 ID 的存在， 通过同一个 HTTP 请求可以实现多个 HTTP 请求传输，客户端和服务器可以通过流 ID 来标识究竟是哪个流从而定位到是哪个 HTTP 请求。</p> <p>③ HTTP/2.0 头部压缩。HTTP/2.0 通过 gzip 和 compress 压缩头部然后再发送，同时通信双方会维护一张头信息表，所有字段都记录在这张表中，在每次 HTTP 传输时只需要传头字段在表中的索引即可，大大减小了重传次数和数据量。</p> <p>④ HTTP/2.0 支持服务器推送。 服务器在客户端未经请求许可的情况下，可预先向客户端推送需要的内容，客户端在退出服务时可通过发送复位相关的请求来取消服务端的推送。</p></blockquote> <h3 id="如何知道-http-发送的请求结束"><a href="#如何知道-http-发送的请求结束" class="header-anchor">#</a> 如何知道 HTTP 发送的请求结束</h3> <blockquote><p>① 如果是短连接，没有启用 keepalive，则可以通过是否关闭了连接来判断是否传输结束，即在读取时可判断 read() != -1。</p> <p>② 如果是长连接的话，先把header直到\r\n\r\n整个地收下来。</p> <p>然后看Content-length 是否有，如果有了，那就读取 Content-length 长度的字节数据，读完就结束了。</p> <p>​	如果没有 Content-length，那么 x 类型为Transfer-Encoding: chunked 说明响应数据的长度不固定，就读到 \r\n0\r\n 表示结束。</p> <p>补充：<strong>头结束符定义</strong>：包含这&quot;\r\n\r\n&quot; 四个字节是指头结束
　　　　				如果头数据里包含Content-Length: x 就读取x字节数据，知道http响应数据的长度为x
　　　　				如果头数据里不包含Content-Length: x 类型为Transfer-Encoding: chunked 说明响应数据的长度不固定，结束符已&quot;\r\n0\r\n&quot;这5个字节为结束符。</p></blockquote> <h3 id="session"><a href="#session" class="header-anchor">#</a> Session</h3> <h5 id="简介-5"><a href="#简介-5" class="header-anchor">#</a> 简介</h5> <p>Session 是服务器端的机制，在服务器上保存的信息。</p> <p>解析客户端请求并操作 session id，按需保存状态信息。</p> <h5 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h5> <ul><li>使用 Cookie 来实现</li> <li>使用 URL 回写来实现</li></ul> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx2t4dfj30za0cq0u2.jpg" alt="image-20210111011314265" style="zoom:50%;"> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> Cookie 和 Session 的区别</span>
<span class="token list punctuation">1.</span> cookie数据存放在客户的浏览器上，session数据放在服务器上；
<span class="token list punctuation">2.</span> cookie不是很安全，别人可以分析存放在本地的 COOKIE 并进行COOKIE欺骗,如果主要考虑到安全应当使用session；
<span class="token list punctuation">3.</span> session 会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，如果主要考虑到减轻服务器性能方面，应当使用COOKIE；
<span class="token list punctuation">4.</span> 单个 cookie 在客户端的限制是 3K，就是说一个站点在客户端存放的 COOKIE 不能3K；而 session 则存储与服务端，浏览器对其没有限制。所以将登陆信息等重要信息存放为 SESSION ;其他信息如果需要保留可以放在 COOKIE 中。

<span class="token title important"><span class="token punctuation">#</span> Cookie/Session/Token</span>

</code></pre></div><h2 id="_4-https"><a href="#_4-https" class="header-anchor">#</a> 4. HTTPS</h2> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx588pzj31by0ikgno.jpg" alt="image-20210111012026484" style="zoom:33%;"> <h3 id="简介-6"><a href="#简介-6" class="header-anchor">#</a> 简介</h3> <p>HTTPS （Hyper Text Transfer Protocol over SecureSocket Layer，超文本传输安全协议）是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性。</p> <h3 id="ssl-tsl"><a href="#ssl-tsl" class="header-anchor">#</a> SSL/TSL</h3> <p>SSL（Security Sockets Layer，安全套接层）是为网络通信提供安全及数据完整性的一种安全协议。</p> <p>SSL 是操作系统对外的 API，SSL 3.0 后更名为 TSL。</p> <p>SSL 采用身份验证和数据加密保证网络通信的安全和数据的完整性。</p> <h3 id="https-数据传输流程"><a href="#https-数据传输流程" class="header-anchor">#</a> HTTPS 数据传输流程</h3> <ul><li>浏览器将支持的加密算法信息发送给服务器。</li> <li>服务器选择一套浏览器支持的加密算法，以证书的形式回发浏览器。</li> <li>浏览器验证证书合法性，并结合证书公钥加密信息发送给服务器。</li> <li>服务器使用私钥解密信息，验证哈希，加密响应信息回发浏览器。</li> <li>浏览器解密响应信息，并对消息进行验真，之后进行加密交互数据。</li></ul> <p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gt3mx1hxebj60rs0ku77202.jpg" alt="img"></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> HTTP 和 HTTPS 的区别</span>
<span class="token list punctuation">1.</span> HTTPS 协议需要到 CA （Certificate Authority，证书颁发机构）申请证书，一般免费证书较少，因而需要一定费用。
<span class="token list punctuation">2.</span> HTTP 是超文本传输协议，信息是明文传输，HTTPS 则是具有安全性的 SSL 加密传输协议。
<span class="token list punctuation">3.</span> HTTP 和 HTTPS 使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
<span class="token list punctuation">4.</span> HTTP 的连接很简单，是无状态的。HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。(无状态的意思是其数据包的发送、传输和接收都是相互独立的。无连接的意思是指通信双方都不长久的维持对方的任何信息。)
</code></pre></div><h2 id="_5-socket"><a href="#_5-socket" class="header-anchor">#</a> 5. Socket</h2> <h3 id="简介-7"><a href="#简介-7" class="header-anchor">#</a> 简介</h3> <p>Socket 是BSD UNIX的进程通信机制，通常也称作”套接字”，用于描述 IP 地址和端口，是一个通信链的句柄。Socket 可以理解为 TCP/IP 网络的 API，它定义了许多函数或例程，程序员可以用它们来开发 TCP/IP 网络上的应用程序。电脑上运行的应用程序通常通过”套接字”向网络发出请求或者应答网络请求。</p> <h3 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h3> <h5 id="应用1"><a href="#应用1" class="header-anchor">#</a> [应用1]</h5> <blockquote><p>服务网接收客户端发过来的信息。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 服务端
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  
  <span class="token class-name">ServerSocket</span> ss <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token class-name">ByteArrayOutputStream</span> baos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    	ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">//获取连接</span>
  		socket <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">accpet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">//输入流</span>
  		is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token comment">//ByteArrayOutputStream 可以不用考虑长度</span>
  		baos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    	<span class="token keyword">int</span> len<span class="token punctuation">;</span>
    	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	baos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    	<span class="token comment">//输出</span>
    	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>baos<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>baos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">try</span><span class="token punctuation">{</span>
            	baos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>is<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">try</span><span class="token punctuation">{</span>
            	is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">try</span><span class="token punctuation">{</span>
            	socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>ss<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token keyword">try</span><span class="token punctuation">{</span>
             ss<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
	* 客户端
	*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  	<span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  	<span class="token keyword">try</span><span class="token punctuation">{</span>
      	<span class="token class-name">InetAddress</span> inet <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  			socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span>inet<span class="token punctuation">,</span><span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">//获取输出流</span>
      	os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      	os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;我是客户端mm&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
      	<span class="token comment">//关闭资源</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span>os<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          	<span class="token keyword">try</span><span class="token punctuation">{</span>
              	os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
              	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      	<span class="token keyword">if</span><span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          	<span class="token keyword">try</span><span class="token punctuation">{</span>
              	socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
              	e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="应用2"><a href="#应用2" class="header-anchor">#</a> [应用2]</h5> <blockquote><p>客户端发送文件给服务端，服务端保存文件到本地。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">/**
     * 服务端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">ServerSocket</span> ss <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span><span class="token punctuation">{</span>
          	<span class="token comment">//1. 建立服务端 socket</span>
            ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//2. 监听客户端 socket</span>
            socket <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//3. 获取输入流</span>
            is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//4. 建立输出流</span>
            fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;本地保存路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">//5. 输出</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
          	<span class="token comment">//6. 关闭资源</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ss<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    ss<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>		<span class="token comment">/**
     * 客户端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InetAddress</span> inet <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//1. 建立socket，连接服务器的8899端口</span>
            socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span>inet<span class="token punctuation">,</span><span class="token number">8899</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//2. 获取输出流</span>
            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//3. 建立输入流</span>
            fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;要发送的文件路径&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          	<span class="token comment">//4. 输入数据并发送出去</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len<span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
          	<span class="token comment">//5. 关闭资源</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fis<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span><span class="token punctuation">{</span>
                    fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>os<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span><span class="token punctuation">{</span>
                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h5 id="应用3"><a href="#应用3" class="header-anchor">#</a> [应用3]</h5> <blockquote><p>从客户端发送文件给服务端，服务端保存到本地，并返回“发送成功”给客户端，并关闭相应的连接。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>		<span class="token comment">/**
     * 服务端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">ServerSocket</span> ss <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1. 建立服务端 socket</span>
            ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">9090</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2. 监听客户端 socket</span>
            socket <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//3. 获取输入流</span>
            is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4. 建立输出流</span>
            fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;receiveFile.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//5. 保存文件</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//6. 回复信息</span>
            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;收到文件!&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>os<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ss<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    ss<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>		<span class="token comment">/**
     * 客户端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">client</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ByteArrayOutputStream</span> baos <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//1. 建立 socket</span>
            <span class="token class-name">InetAddress</span> inet <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span>inet<span class="token punctuation">,</span><span class="token number">9090</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2. 建立输出流</span>
            os <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//3. 建立输入流，输入文件</span>
            fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/Users/hedon-/Downloads/IMG_0058.JPG&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//4. 传输文件</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> len<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len<span class="token operator">=</span>fis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//5. 表明文件传输完成（服务端是一个read操作，会阻塞，需要明确说明已经传输完成）</span>
            socket<span class="token punctuation">.</span><span class="token function">shutdownOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//6. 接收服务端反馈</span>
            is <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            baos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                baos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>baos<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>baos<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    baos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>fis<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>os<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="udp"><a href="#udp" class="header-anchor">#</a> UDP</h3> <div class="language-java extra-class"><pre class="language-java"><code>		<span class="token comment">/**
     * 发送端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//1. socket 对象</span>
        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 数据包</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">&quot;我是UDP方式发送的导弹~&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InetAddress</span> inet <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>data<span class="token punctuation">.</span>length<span class="token punctuation">,</span>inet<span class="token punctuation">,</span><span class="token number">9090</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3. 发送数据报</span>
        socket<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 关闭资源</span>
        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code>		<span class="token comment">/**
     * 接收端
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">{</span>
        <span class="token comment">//1. socket 对象，需要指定监听的端口号</span>
        <span class="token class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span><span class="token number">9090</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 接收数据</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>buffer<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        socket<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3. 打印数据</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>packet<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>packet<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 关闭 socket</span>
        socket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><!----></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/3/2021, 3:51:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/noteSite/cs/cn/cn-transfer-layer.html" class="prev">
        四、传输层
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/noteSite/assets/js/app.ca354767.js" defer></script><script src="/noteSite/assets/js/2.0f8877a4.js" defer></script><script src="/noteSite/assets/js/78.d3015c43.js" defer></script>
  </body>
</html>
