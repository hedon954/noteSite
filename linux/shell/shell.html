<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell 脚本 | Hedon</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/noteSite/favicon.ico">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/noteSite/assets/css/0.styles.2b5d8ceb.css" as="style"><link rel="preload" href="/noteSite/assets/js/app.340d3b4d.js" as="script"><link rel="preload" href="/noteSite/assets/js/2.691adf44.js" as="script"><link rel="preload" href="/noteSite/assets/js/169.9393f890.js" as="script"><link rel="prefetch" href="/noteSite/assets/js/10.f9d8595d.js"><link rel="prefetch" href="/noteSite/assets/js/100.ba5c10a3.js"><link rel="prefetch" href="/noteSite/assets/js/101.ae26c2d8.js"><link rel="prefetch" href="/noteSite/assets/js/102.5fe90241.js"><link rel="prefetch" href="/noteSite/assets/js/103.97270f6a.js"><link rel="prefetch" href="/noteSite/assets/js/104.678d3e7d.js"><link rel="prefetch" href="/noteSite/assets/js/105.d14d5411.js"><link rel="prefetch" href="/noteSite/assets/js/106.951d70ec.js"><link rel="prefetch" href="/noteSite/assets/js/107.3b8bb777.js"><link rel="prefetch" href="/noteSite/assets/js/108.583a3359.js"><link rel="prefetch" href="/noteSite/assets/js/109.aaff761d.js"><link rel="prefetch" href="/noteSite/assets/js/11.d6449e4b.js"><link rel="prefetch" href="/noteSite/assets/js/110.fc0e46a3.js"><link rel="prefetch" href="/noteSite/assets/js/111.b6801ea8.js"><link rel="prefetch" href="/noteSite/assets/js/112.239aabdd.js"><link rel="prefetch" href="/noteSite/assets/js/113.e5bad6a3.js"><link rel="prefetch" href="/noteSite/assets/js/114.d2a61159.js"><link rel="prefetch" href="/noteSite/assets/js/115.01b6d64b.js"><link rel="prefetch" href="/noteSite/assets/js/116.c871ff69.js"><link rel="prefetch" href="/noteSite/assets/js/117.bec72379.js"><link rel="prefetch" href="/noteSite/assets/js/118.8a05a9c7.js"><link rel="prefetch" href="/noteSite/assets/js/119.89b22c84.js"><link rel="prefetch" href="/noteSite/assets/js/12.ed5e6c7f.js"><link rel="prefetch" href="/noteSite/assets/js/120.025bee0f.js"><link rel="prefetch" href="/noteSite/assets/js/121.ab209ac4.js"><link rel="prefetch" href="/noteSite/assets/js/122.cde88dad.js"><link rel="prefetch" href="/noteSite/assets/js/123.050e4a1e.js"><link rel="prefetch" href="/noteSite/assets/js/124.9d495080.js"><link rel="prefetch" href="/noteSite/assets/js/125.3dcf3243.js"><link rel="prefetch" href="/noteSite/assets/js/126.962a9044.js"><link rel="prefetch" href="/noteSite/assets/js/127.c6c7a558.js"><link rel="prefetch" href="/noteSite/assets/js/128.8e45833f.js"><link rel="prefetch" href="/noteSite/assets/js/129.06d285f3.js"><link rel="prefetch" href="/noteSite/assets/js/13.cfd4493f.js"><link rel="prefetch" href="/noteSite/assets/js/130.78da9133.js"><link rel="prefetch" href="/noteSite/assets/js/131.c4f65c32.js"><link rel="prefetch" href="/noteSite/assets/js/132.e631c25b.js"><link rel="prefetch" href="/noteSite/assets/js/133.779e55a4.js"><link rel="prefetch" href="/noteSite/assets/js/134.7d90cd3a.js"><link rel="prefetch" href="/noteSite/assets/js/135.c3d62164.js"><link rel="prefetch" href="/noteSite/assets/js/136.86b8e7e7.js"><link rel="prefetch" href="/noteSite/assets/js/137.a1a6126c.js"><link rel="prefetch" href="/noteSite/assets/js/138.3bbb230a.js"><link rel="prefetch" href="/noteSite/assets/js/139.499e7c70.js"><link rel="prefetch" href="/noteSite/assets/js/14.f255fb4c.js"><link rel="prefetch" href="/noteSite/assets/js/140.6a5eaa5b.js"><link rel="prefetch" href="/noteSite/assets/js/141.91560016.js"><link rel="prefetch" href="/noteSite/assets/js/142.5ca04007.js"><link rel="prefetch" href="/noteSite/assets/js/143.12af9100.js"><link rel="prefetch" href="/noteSite/assets/js/144.cde44442.js"><link rel="prefetch" href="/noteSite/assets/js/145.e191dc3f.js"><link rel="prefetch" href="/noteSite/assets/js/146.affabc0a.js"><link rel="prefetch" href="/noteSite/assets/js/147.368d3af1.js"><link rel="prefetch" href="/noteSite/assets/js/148.67db92ec.js"><link rel="prefetch" href="/noteSite/assets/js/149.a0864cdb.js"><link rel="prefetch" href="/noteSite/assets/js/15.c0fbdf3d.js"><link rel="prefetch" href="/noteSite/assets/js/150.223475d5.js"><link rel="prefetch" href="/noteSite/assets/js/151.112f1a94.js"><link rel="prefetch" href="/noteSite/assets/js/152.3c605cc7.js"><link rel="prefetch" href="/noteSite/assets/js/153.03cc572c.js"><link rel="prefetch" href="/noteSite/assets/js/154.72ca7e47.js"><link rel="prefetch" href="/noteSite/assets/js/155.31f6bcbd.js"><link rel="prefetch" href="/noteSite/assets/js/156.0ac68600.js"><link rel="prefetch" href="/noteSite/assets/js/157.f95a974d.js"><link rel="prefetch" href="/noteSite/assets/js/158.1596561f.js"><link rel="prefetch" href="/noteSite/assets/js/159.a6605cd2.js"><link rel="prefetch" href="/noteSite/assets/js/16.d13a0516.js"><link rel="prefetch" href="/noteSite/assets/js/160.ce256a35.js"><link rel="prefetch" href="/noteSite/assets/js/161.1e48de77.js"><link rel="prefetch" href="/noteSite/assets/js/162.ccf7aa74.js"><link rel="prefetch" href="/noteSite/assets/js/163.8985161c.js"><link rel="prefetch" href="/noteSite/assets/js/164.42db3a9d.js"><link rel="prefetch" href="/noteSite/assets/js/165.cc87386c.js"><link rel="prefetch" href="/noteSite/assets/js/166.d3fe1816.js"><link rel="prefetch" href="/noteSite/assets/js/167.b30829b6.js"><link rel="prefetch" href="/noteSite/assets/js/168.600f27fc.js"><link rel="prefetch" href="/noteSite/assets/js/17.5119e8e9.js"><link rel="prefetch" href="/noteSite/assets/js/170.ffcee38c.js"><link rel="prefetch" href="/noteSite/assets/js/171.50b898c6.js"><link rel="prefetch" href="/noteSite/assets/js/172.57aeb8dd.js"><link rel="prefetch" href="/noteSite/assets/js/173.389ebc0e.js"><link rel="prefetch" href="/noteSite/assets/js/174.e7824765.js"><link rel="prefetch" href="/noteSite/assets/js/175.c298c428.js"><link rel="prefetch" href="/noteSite/assets/js/176.9199ba6d.js"><link rel="prefetch" href="/noteSite/assets/js/177.1407812e.js"><link rel="prefetch" href="/noteSite/assets/js/178.6dc811d8.js"><link rel="prefetch" href="/noteSite/assets/js/18.d815f23f.js"><link rel="prefetch" href="/noteSite/assets/js/19.bec6f68b.js"><link rel="prefetch" href="/noteSite/assets/js/20.314ed337.js"><link rel="prefetch" href="/noteSite/assets/js/21.824bcb2d.js"><link rel="prefetch" href="/noteSite/assets/js/22.cf71177a.js"><link rel="prefetch" href="/noteSite/assets/js/23.70c85203.js"><link rel="prefetch" href="/noteSite/assets/js/24.b7d9368e.js"><link rel="prefetch" href="/noteSite/assets/js/25.078244fa.js"><link rel="prefetch" href="/noteSite/assets/js/26.eabb7cc4.js"><link rel="prefetch" href="/noteSite/assets/js/27.6a4f4064.js"><link rel="prefetch" href="/noteSite/assets/js/28.3e0d9f6a.js"><link rel="prefetch" href="/noteSite/assets/js/29.b4c41e1b.js"><link rel="prefetch" href="/noteSite/assets/js/3.15783b20.js"><link rel="prefetch" href="/noteSite/assets/js/30.92bc43cd.js"><link rel="prefetch" href="/noteSite/assets/js/31.6612acd4.js"><link rel="prefetch" href="/noteSite/assets/js/32.d889e937.js"><link rel="prefetch" href="/noteSite/assets/js/33.db4c50bd.js"><link rel="prefetch" href="/noteSite/assets/js/34.cfd0d2e5.js"><link rel="prefetch" href="/noteSite/assets/js/35.0828009f.js"><link rel="prefetch" href="/noteSite/assets/js/36.ac37a5cb.js"><link rel="prefetch" href="/noteSite/assets/js/37.fff150f3.js"><link rel="prefetch" href="/noteSite/assets/js/38.7128be04.js"><link rel="prefetch" href="/noteSite/assets/js/39.5999eed7.js"><link rel="prefetch" href="/noteSite/assets/js/4.80421812.js"><link rel="prefetch" href="/noteSite/assets/js/40.2f830ac0.js"><link rel="prefetch" href="/noteSite/assets/js/41.c0a2d0a1.js"><link rel="prefetch" href="/noteSite/assets/js/42.4900306c.js"><link rel="prefetch" href="/noteSite/assets/js/43.f95d0812.js"><link rel="prefetch" href="/noteSite/assets/js/44.5217cb5f.js"><link rel="prefetch" href="/noteSite/assets/js/45.458561dd.js"><link rel="prefetch" href="/noteSite/assets/js/46.b7a2df69.js"><link rel="prefetch" href="/noteSite/assets/js/47.6449c6cf.js"><link rel="prefetch" href="/noteSite/assets/js/48.23249fd1.js"><link rel="prefetch" href="/noteSite/assets/js/49.240bc914.js"><link rel="prefetch" href="/noteSite/assets/js/5.4170108b.js"><link rel="prefetch" href="/noteSite/assets/js/50.1e60cc38.js"><link rel="prefetch" href="/noteSite/assets/js/51.bce52934.js"><link rel="prefetch" href="/noteSite/assets/js/52.bcd3b0b7.js"><link rel="prefetch" href="/noteSite/assets/js/53.5af15cad.js"><link rel="prefetch" href="/noteSite/assets/js/54.0e70cdd1.js"><link rel="prefetch" href="/noteSite/assets/js/55.3c03c62b.js"><link rel="prefetch" href="/noteSite/assets/js/56.ddea3642.js"><link rel="prefetch" href="/noteSite/assets/js/57.9743428d.js"><link rel="prefetch" href="/noteSite/assets/js/58.a1197820.js"><link rel="prefetch" href="/noteSite/assets/js/59.917c2f49.js"><link rel="prefetch" href="/noteSite/assets/js/6.f3d86aa7.js"><link rel="prefetch" href="/noteSite/assets/js/60.0cb171dc.js"><link rel="prefetch" href="/noteSite/assets/js/61.009c9b7c.js"><link rel="prefetch" href="/noteSite/assets/js/62.59a78391.js"><link rel="prefetch" href="/noteSite/assets/js/63.91ba34a6.js"><link rel="prefetch" href="/noteSite/assets/js/64.a3c9381e.js"><link rel="prefetch" href="/noteSite/assets/js/65.6e7604dd.js"><link rel="prefetch" href="/noteSite/assets/js/66.f9041d6b.js"><link rel="prefetch" href="/noteSite/assets/js/67.79d586c0.js"><link rel="prefetch" href="/noteSite/assets/js/68.8bb13ea5.js"><link rel="prefetch" href="/noteSite/assets/js/69.5ce81192.js"><link rel="prefetch" href="/noteSite/assets/js/7.da9921ea.js"><link rel="prefetch" href="/noteSite/assets/js/70.aaf9cd94.js"><link rel="prefetch" href="/noteSite/assets/js/71.6091b8dc.js"><link rel="prefetch" href="/noteSite/assets/js/72.d1defce3.js"><link rel="prefetch" href="/noteSite/assets/js/73.3728ae97.js"><link rel="prefetch" href="/noteSite/assets/js/74.cefe37e6.js"><link rel="prefetch" href="/noteSite/assets/js/75.d2a9f8d7.js"><link rel="prefetch" href="/noteSite/assets/js/76.2edaa075.js"><link rel="prefetch" href="/noteSite/assets/js/77.4836da79.js"><link rel="prefetch" href="/noteSite/assets/js/78.b62cecd9.js"><link rel="prefetch" href="/noteSite/assets/js/79.139796b0.js"><link rel="prefetch" href="/noteSite/assets/js/8.25459cd8.js"><link rel="prefetch" href="/noteSite/assets/js/80.61be3846.js"><link rel="prefetch" href="/noteSite/assets/js/81.34ef4f6e.js"><link rel="prefetch" href="/noteSite/assets/js/82.d89892fc.js"><link rel="prefetch" href="/noteSite/assets/js/83.3bba8b06.js"><link rel="prefetch" href="/noteSite/assets/js/84.c2271ec9.js"><link rel="prefetch" href="/noteSite/assets/js/85.43108acb.js"><link rel="prefetch" href="/noteSite/assets/js/86.38a23363.js"><link rel="prefetch" href="/noteSite/assets/js/87.13c6644a.js"><link rel="prefetch" href="/noteSite/assets/js/88.034fd132.js"><link rel="prefetch" href="/noteSite/assets/js/89.10e5b366.js"><link rel="prefetch" href="/noteSite/assets/js/9.409ee5bd.js"><link rel="prefetch" href="/noteSite/assets/js/90.738664f9.js"><link rel="prefetch" href="/noteSite/assets/js/91.ee49a280.js"><link rel="prefetch" href="/noteSite/assets/js/92.424d58f2.js"><link rel="prefetch" href="/noteSite/assets/js/93.2d1e29b7.js"><link rel="prefetch" href="/noteSite/assets/js/94.9cf81e61.js"><link rel="prefetch" href="/noteSite/assets/js/95.a0f509c1.js"><link rel="prefetch" href="/noteSite/assets/js/96.68407d3e.js"><link rel="prefetch" href="/noteSite/assets/js/97.edf26645.js"><link rel="prefetch" href="/noteSite/assets/js/98.3e00cbf5.js"><link rel="prefetch" href="/noteSite/assets/js/99.c724368c.js">
    <link rel="stylesheet" href="/noteSite/assets/css/0.styles.2b5d8ceb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/noteSite/" class="home-link router-link-active"><img src="/noteSite/images/hedon.png" alt="Hedon" class="logo"> <span class="site-name can-hide">Hedon</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS Menu" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS Menu" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/cs/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/cn/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/component/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link router-link-active">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/noteSite/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CS Menu" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="CS Menu" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/cs/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/os/" class="nav-link">
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/cn/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/cs/component/" class="nav-link">
  计算机组成原理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link router-link-active">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/noteSite/leetcode/" class="nav-link">
  Leetcode
</a></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteSite/linux/shell/shell.html" aria-current="page" class="active sidebar-link">Shell 脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_1-shell-规范" class="sidebar-link">1. Shell 规范</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_2-shell-变量" class="sidebar-link">2. Shell 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_2-1-变量定义" class="sidebar-link">2.1 变量定义</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_2-2-变量分类" class="sidebar-link">2.2 变量分类</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_2-3-变量取值" class="sidebar-link">2.3 变量取值</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_3-shell-格式化输出" class="sidebar-link">3. Shell 格式化输出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_3-1-echo" class="sidebar-link">3.1 echo</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_3-2-输出有颜色的字体" class="sidebar-link">3.2 输出有颜色的字体</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_4-shell-交互" class="sidebar-link">4. Shell 交互</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_4-1-read" class="sidebar-link">4.1 read</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-shell-运算" class="sidebar-link">5. Shell 运算</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-1-赋值运算" class="sidebar-link">5.1 赋值运算</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-2-算法运算" class="sidebar-link">5.2 算法运算</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-3-比较运算" class="sidebar-link">5.3 比较运算</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-4-字符串比较运算" class="sidebar-link">5.4 字符串比较运算</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-4-逻辑运算" class="sidebar-link">5.4 逻辑运算</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_5-5-文件判断" class="sidebar-link">5.5 文件判断</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#案例" class="sidebar-link">案例</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-shell-数组" class="sidebar-link">6. Shell 数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-1-数组介绍" class="sidebar-link">6.1 数组介绍</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-2-数组定义" class="sidebar-link">6.2 数组定义</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-3-数组赋值" class="sidebar-link">6.3 数组赋值</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-4-数组取值" class="sidebar-link">6.4 数组取值</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_6-5-关联数组" class="sidebar-link">6.5 关联数组</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_7-shell-函数" class="sidebar-link">7. Shell 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_7-1-函数定义" class="sidebar-link">7.1 函数定义</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_7-2-函数调用" class="sidebar-link">7.2 函数调用</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-shell-控制流程" class="sidebar-link">8. Shell 控制流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-1-if" class="sidebar-link">8.1 if</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-2-for" class="sidebar-link">8.2 for</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-3-while" class="sidebar-link">8.3 while</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-4-until" class="sidebar-link">8.4 until</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-5-case" class="sidebar-link">8.5 case</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_8-6-循环控制语句" class="sidebar-link">8.6 循环控制语句</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-shell-操作文件" class="sidebar-link">9. Shell 操作文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-1-sed-命令介绍" class="sidebar-link">9.1 sed 命令介绍</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-2-sed-语法" class="sidebar-link">9.2 sed 语法</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-3-内部命令" class="sidebar-link">9.3 内部命令</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-4-内部选项" class="sidebar-link">9.4 内部选项</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_9-5-标志" class="sidebar-link">9.5 标志</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-shell-数据处理" class="sidebar-link">10. Shell 数据处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-1-awk-介绍" class="sidebar-link">10.1 awk 介绍</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-2-awk-语法" class="sidebar-link">10.2 awk 语法</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-3-awk-基本应用" class="sidebar-link">10.3 awk 基本应用</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-4-awk-命令选项" class="sidebar-link">10.4 awk 命令选项</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-5-awk-程序运行优先级" class="sidebar-link">10.5 awk 程序运行优先级</a></li><li class="sidebar-sub-header"><a href="/noteSite/linux/shell/shell.html#_10-6-awk-高级应用" class="sidebar-link">10.6 awk 高级应用</a></li></ul></li></ul></li><li><a href="/noteSite/linux/Nginx.html" class="sidebar-link">Nginx</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux IO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小技巧</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell-脚本"><a href="#shell-脚本" class="header-anchor">#</a> Shell 脚本</h1> <p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gref6c4d73j311y0goaba.jpg" alt="image-20210611164433831"></p> <blockquote><p>Shell 脚本就是将完成一个任务的所有的命令按照执行的先后顺序，自上而下的写到一个文本文件中，然后给予执行的权限。</p></blockquote> <ul><li>如何书写一个 shell 脚本</li> <li>shell 脚本运行</li> <li>shell 中的特殊符号</li> <li>管道</li> <li>重定向</li> <li>shell 中数学运算</li> <li>脚本退出</li></ul> <blockquote><p>参考：https://www.zutuanxue.com/</p></blockquote> <h2 id="_1-shell-规范"><a href="#_1-shell-规范" class="header-anchor">#</a> 1. Shell 规范</h2> <div class="language- extra-class"><pre class="language-text"><code>1）#!/bin/bash
//脚本第一行， #！魔法字符，指定脚本代码执行的程序。即它告诉系统这个脚本需要什么解释器来执行，也就是使用哪一种 Shell。

2）#代表注释，#！特例 。

# 3）对脚本的基本信息的描述,大家可以根据实际情况尽可能的写详细一些，方便后续使用者。
# Name: 脚本名字
# Desc:描述describe
# Path:存放路径
# Usage:用法
# Update:更新时间
# Author:作者
# Release: 分发版本

4）脚本的具体内容
commands
...
</code></pre></div><h2 id="_2-shell-变量"><a href="#_2-shell-变量" class="header-anchor">#</a> 2. Shell 变量</h2> <h3 id="_2-1-变量定义"><a href="#_2-1-变量定义" class="header-anchor">#</a> 2.1 变量定义</h3> <h5 id="定义一个变量"><a href="#定义一个变量" class="header-anchor">#</a> 定义一个变量</h5> <p>变量格式：<font color="pink">变量名=值</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 变量名命名规则：</span>
    <span class="token list punctuation">1.</span> 命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。
    <span class="token list punctuation">2.</span> 中间不能有空格，可以使用下划线（_）。
    <span class="token list punctuation">3.</span> 不能使用标点符号。
    <span class="token list punctuation">4.</span> 不能使用 bash 里的关键字（可用 help 命令查看保留关键字）。
    <span class="token list punctuation">5.</span> 建议变量名为大写，和命令区分。
    
<span class="token title important"><span class="token punctuation">#</span> 举例</span>
	VAR1=1
	age=18
	name=&quot;名称&quot;
	score=88.8
注意：字符串要用单引号或双引号引起来
</code></pre></div><h5 id="取消一个变量"><a href="#取消一个变量" class="header-anchor">#</a> 取消一个变量</h5> <p>取消当前环境中的变量，如果是变量设置是保存在文件中，下次重启又会恢复。</p> <p>可以使用 <code>unset 变量名</code> 来取消一个变量。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 取消变量</span>
<span class="token builtin class-name">unset</span> name

<span class="token comment"># 再次尝试输出变量，发现没有</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$name</span>
</code></pre></div><h5 id="有类型的变量"><a href="#有类型的变量" class="header-anchor">#</a> 有类型的变量</h5> <p>-i 将变量看成整数。
-r 使变量只读 readonly，该变量的值无法改变，并且不能为 unset。
-x 标记变量通过环境导出 export。
-a 指定为索引数组（普通数组）。
-A 指定为关联数组。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># declare -i num='asa'</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $num</span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># num=100</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $num</span>
<span class="token number">100</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># declare -r num</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $num</span>
<span class="token number">100</span>
<span class="token punctuation">[</span>root@zutuanxue~<span class="token punctuation">]</span><span class="token comment"># num=200</span>
-bash: num: 只读变量

<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># declare -x</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HISTCONTROL</span></span><span class="token operator">=</span><span class="token string">&quot;ignoredups&quot;</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HISTSIZE</span></span><span class="token operator">=</span><span class="token string">&quot;1000&quot;</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span><span class="token string">&quot;/root&quot;</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span><span class="token string">&quot;Bai_Shuming&quot;</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span><span class="token string">&quot;zh_CN.UTF-8&quot;</span>
<span class="token builtin class-name">declare</span> -x <span class="token assign-left variable"><span class="token environment constant">LESSOPEN</span></span><span class="token operator">=</span><span class="token string">&quot;||/usr/bin/lesspipe.sh %s&quot;</span>
</code></pre></div><h3 id="_2-2-变量分类"><a href="#_2-2-变量分类" class="header-anchor">#</a> 2.2 变量分类</h3> <p>系统中的变量根据<strong>作用域及生命周期</strong>可以分为四类：本地变量、环境变量、全局变量、内置变量。</p> <h5 id="本地变量"><a href="#本地变量" class="header-anchor">#</a> 本地变量</h5> <p>用户自定义的变量，定义在<strong>脚本或者当前终端</strong>中，脚本执行完毕或终端结束变量失效。</p> <h5 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h5> <p>定义在用户家目录下的 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件中，用户私有变量，只能本用户使用。</p> <p>查看当前用户的环境变量 <code>env</code></p> <p>查询当前用户的所有变量（临时变量与环境变量） <code>set</code></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 可以用 export 来将一个本地变量临时设置为环境变量</span>
[root@VM-12-10-centos shell]# export A=hello
[root@VM-12-10-centos shell]# env | grep A
A=hello

<span class="token title important"><span class="token punctuation">#</span> 设置永久环境变量</span>
需要将变量写入 .bash_profile 或者 ~/.bashrc，然后 source 一下。

<span class="token title important"><span class="token punctuation">#</span> 关于 export</span>
<span class="token code keyword">`用户登录时:`</span>
1) 用户登录到 Linux 系统后，系统将启动一个用户 shell。在这个 shell 中，可以使用 shell 命令或声明变量，也可以创建并运行 shell 脚本程序。

<span class="token code keyword">`运行脚本时:`</span>
2) 运行 shell 脚本程序时，系统将创建一个子 shell。此时，系统中将有两个 shell，一个是登录时系统启动的 shell，另一个是系统为运行脚本程序创建的 shell。当一个脚本程序运行完毕，它的脚本 shell 将终止，可以返回到执行该脚本之前的 shell。

从这种意义上来说，用户可以有许多 shell，每个 shell 都是由某个 shell（称为父 shell ）派生的。

在子 shell 中定义的变量只在该子 shell 内有效。如果在一个 shell 脚本程序中定义了一个变量，当该脚本程序运行时，这个定义的变量只是该脚本程序内的一个局部变量，其他的 shell 不能引用它，要使某个变量的值可以在其他 shell 中被改变，可以使用 export 命令对已定义的变量进行输出。 

export 命令将使系统在创建每一个新的 shell 时定义这个变量的一个拷贝。这个过程称之为变量输出。
</code></pre></div><p>父 shell 与子 shell：</p> <img src="https://tva1.sinaimg.cn/large/008i3skNly1gr8l6uzbrgj60to0icdgz02.jpg" alt="shell父子关系.png" style="zoom:50%;"> <h5 id="全局变量"><a href="#全局变量" class="header-anchor">#</a> 全局变量</h5> <p>使用 <strong>export</strong> 命令将本地变量输出为当前 shell 中的环境变量。</p> <p>想要所有用户及 shell 都可以使用，可以在 <code>/etc/profile /etc/bashrc</code> 下永久定义。</p> <h5 id="内置变量"><a href="#内置变量" class="header-anchor">#</a> 内置变量</h5> <p>系统变量（内置 bash 中变量）： shell 本身已经固定好了它的名字和作用。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token variable">$?</span>：上一条命令执行后返回的状态，当返回状态值为 <span class="token number">0</span> 时表示执行正常，非 <span class="token number">0</span> 值表示执行异常或出错
 若退出状态值为 <span class="token number">0</span>，表示命令运行成功
 若退出状态值为 <span class="token number">127</span>，表示 <span class="token builtin class-name">command</span> not found
 若退出状态值为 <span class="token number">126</span>，表示找到了该命令但无法执行（权限不够）
 若退出状态值为 <span class="token number">1</span><span class="token operator">&amp;</span><span class="token number">2</span>，表示没有那个文件或目录
 
<span class="token variable">$$</span>：当前所在进程的进程号     <span class="token builtin class-name">echo</span> <span class="token variable">$$</span>   eg：kill -9 <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $$<span class="token variable">`</span></span>  <span class="token operator">=</span> <span class="token builtin class-name">exit</span>   退出当前会话

<span class="token variable">$!</span>：后台运行的最后一个进程号  （当前终端）  <span class="token comment"># gedit &amp;</span>
<span class="token operator">!</span>$ 调用最后一条命令历史中的参数
<span class="token operator">!</span><span class="token operator">!</span> 调用最后一条命令历史


<span class="token variable">$#</span>：脚本后面接的参数的个数
<span class="token variable">$*</span>：脚本后面所有参数，参数当成一个整体输出，每一个变量参数之间以空格隔开
<span class="token variable">$@</span><span class="token builtin class-name">:</span> 脚本后面所有参数，参数是独立的，也是全部输出

<span class="token variable">$0</span>：当前执行的进程/程序名  <span class="token builtin class-name">echo</span> <span class="token variable">$0</span>     
<span class="token variable">$1</span>~<span class="token variable">$9</span> 位置参数变量
<span class="token variable">${10}</span>~<span class="token variable">${n}</span> 扩展位置参数变量  第10个位置变量必须用<span class="token punctuation">{</span><span class="token punctuation">}</span>大括号括起来
 

了解<span class="token variable">$*</span>和<span class="token variable">$@</span>的区别：
<span class="token variable">$*</span> :表示将变量看成一个整体
<span class="token variable">$@</span> :表示变量是独立的

</code></pre></div><h3 id="_2-3-变量取值"><a href="#_2-3-变量取值" class="header-anchor">#</a> 2.3 变量取值</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>变量内容读出
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $name</span>
baism
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $school</span>
ayitula
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $age</span>
<span class="token number">30</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo $score</span>
<span class="token number">88.8</span>
</code></pre></div><p><font color="red">注意：</font></p> <div class="language-shell extra-class"><pre class="language-shell"><code>变量读取过程中，默认单引号是不解释变量的。比如
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># echo '$name'</span>
<span class="token variable">$name</span>

如果必须使用单引号还要读取变量的值可以使用 <span class="token builtin class-name">eval</span> 命令<span class="token punctuation">[</span>重新运算求出参数的内容<span class="token punctuation">]</span> 
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># eval  echo '$name'</span>
baism
</code></pre></div><h2 id="_3-shell-格式化输出"><a href="#_3-shell-格式化输出" class="header-anchor">#</a> 3. Shell 格式化输出</h2> <h3 id="_3-1-echo"><a href="#_3-1-echo" class="header-anchor">#</a> 3.1 echo</h3> <p>echo 命令的功能是在显示器上显示一段文字，一般起到一个提示的作用。</p> <p>功能说明:显示文字。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 语法: </span>
echo <span class="token url">[<span class="token content">-ne</span>] [<span class="token variable">字符串</span>]</span>

<span class="token title important"><span class="token punctuation">#</span> 补充说明:</span>
1、echo会将输入的字符串送往标准输出。
2、输出的字符串间以空白字符隔开,并在最后加上换行号。

<span class="token title important"><span class="token punctuation">#</span> OPTIONS：</span>
-n	不要在最后自动换行
-e	若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:

<span class="token title important"><span class="token punctuation">#</span> 转义字符</span>
\a	发出警告声;
\b	删除前一个字符;
\t	插入tab;
\n	换行且光标移至行首;
\c	最后不加上换行符号;
\f	换行但光标仍旧停留在原来的位置;
\r	光标移至行首，但不换行;
\v	与\f相同;
\		插入\字符;
\0nnn	打印nnn(八进制)所代表的ASCII字符;  备注：数字0  不要理解成字母o
\xNN  打印NN(十六进制)所代表的ASCII字符;

-–help	显示帮助
-–version显示版本信息
</code></pre></div><p>示例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@VM-12-10-centos shell<span class="token punctuation">]</span><span class="token comment"># echo -e &quot;\0123&quot;</span>
S
<span class="token punctuation">[</span>root@VM-12-10-centos shell<span class="token punctuation">]</span><span class="token comment"># echo -e &quot;\x61&quot;</span>
a
</code></pre></div><h3 id="_3-2-输出有颜色的字体"><a href="#_3-2-输出有颜色的字体" class="header-anchor">#</a> 3.2 输出有颜色的字体</h3> <p>脚本中 echo 显示内容带颜色显示。</p> <p>echo 显示带颜色，需要使用参数 <code>-e</code>。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 格式如下：</span>
echo -e &quot;\033[字背景颜色；文字颜色m字符串\033[0m&quot;
</code></pre></div><p>例如： echo -e “\033[41;36m something here \033[0m”</p> <p>其中41的位置代表底色， 36m 的位置是代表字的颜色</p> <p>1、字背景颜色和文字颜色之间是英文的</p> <p>2、文字颜色后面有个 m</p> <p>3、字符串前后可以没有空格，如果有的话，输出也是同样有空格</p> <div class="language- extra-class"><pre class="language-text"><code>下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配

　　例
　　echo -e “\033[31m 红色字 \033[0m”
　　echo -e “\033[34m 黄色字 \033[0m”
　　echo -e “\033[41;33m 红底黄字 \033[0m”
　　echo -e “\033[41;37m 红底白字 \033[0m”
　　
字颜色：30—–37
　　echo -e “\033[30m 黑色字 \033[0m”
　　echo -e “\033[31m 红色字 \033[0m”
　　echo -e “\033[32m 绿色字 \033[0m”
　　echo -e “\033[33m 黄色字 \033[0m”
　　echo -e “\033[34m 蓝色字 \033[0m”
　　echo -e “\033[35m 紫色字 \033[0m”
　　echo -e “\033[36m 天蓝字 \033[0m”
　　echo -e “\033[37m 白色字 \033[0m”

　　
字背景颜色范围：40—–47
　　echo -e “\033[40;37m 黑底白字 \033[0m”
　　echo -e “\033[41;37m 红底白字 \033[0m”
　　echo -e “\033[42;37m 绿底白字 \033[0m”
　　echo -e “\033[43;37m 黄底白字 \033[0m”
　　echo -e “\033[44;37m 蓝底白字 \033[0m”
　　echo -e “\033[45;37m 紫底白字 \033[0m”
　　echo -e “\033[46;37m 天蓝底白字 \033[0m”
　　echo -e “\033[47;30m 白底黑字 \033[0m”
　　
最后面控制选项说明
　　\033[0m 关闭所有属性
　　\033[1m 设置高亮度
　　\033[4m 下划线
　　\033[5m 闪烁
　　\033[7m 反显
　　\033[8m 消隐

　　\033[30m — \33[37m 

设置前景色
　　\033[40m — \33[47m 设置背景色
　　
　　
　　\033[nA 光标上移n行
　　\033[nB 光标下移n行
　　\033[nC 光标右移n行
　　\033[nD 光标左移n行
　　\033[y;xH设置光标位置
　　\033[2J 清屏
　　\033[K 清除从光标到行尾的内容
　　\33[s 保存光标位置
　　\033[u 恢复光标位置
　　\033[?25l 隐藏光标
　　\033[?25h 显示光标
</code></pre></div><h2 id="_4-shell-交互"><a href="#_4-shell-交互" class="header-anchor">#</a> 4. Shell 交互</h2> <h3 id="_4-1-read"><a href="#_4-1-read" class="header-anchor">#</a> 4.1 read</h3> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 功能</span>
默认接受键盘的输入，回车符代表输入结束。

<span class="token title important"><span class="token punctuation">#</span> 应用场景</span>
人机交互。

<span class="token title important"><span class="token punctuation">#</span> 命令选项</span>
-p 打印信息
-t 限定时间
-s 不回显
-n 输入字符个
</code></pre></div><p>案例：写一个系统用户交互登录界面脚本，仿linux文本界面登录。</p> <p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/24/1600910891275.gif" alt="login.gif"></p> <p>步骤：</p> <ol><li>根据linux文本界面登陆窗口输出信息，打印登陆提示信息</li> <li>交互输入登陆账号</li> <li>交互输入登陆密码</li></ol> <p>实现：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#Author: Hedon</span>
<span class="token comment">#Release: 1.0</span>
<span class="token comment">#Description: imitate the linux login process</span>

<span class="token assign-left variable">IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ifconfig</span> ens33 <span class="token operator">|</span> <span class="token function">egrep</span> -w <span class="token string">&quot;inet&quot;</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span><span class="token variable">`</span></span>

<span class="token comment">#1. clear the window</span>
<span class="token function">clear</span>

<span class="token comment">#2. print the prompt info</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;CentOS Linux 8 (Core)&quot;</span>
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;Kernel <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -r<span class="token variable">`</span></span> on an <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span><span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;Web console: https://localhost:9090/ or https://<span class="token variable">$IP</span>:9090/ <span class="token entity" title="\n">\n</span>&quot;</span>

<span class="token comment">#3. let use input login username</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;<span class="token environment constant">$HOSTNAME</span> login: &quot;</span>
<span class="token builtin class-name">read</span> account

<span class="token comment">#4. let use input login password</span>
<span class="token builtin class-name">read</span> -s -t30 -p <span class="token string">&quot;Password: &quot;</span> pw
<span class="token builtin class-name">echo</span>
</code></pre></div><p>结果：</p> <p><img src="https://www.zutuanxue.com:8000/static/media/images/2020/9/24/1600912191604.gif" alt="login2.gif"></p> <h2 id="_5-shell-运算"><a href="#_5-shell-运算" class="header-anchor">#</a> 5. Shell 运算</h2> <h3 id="_5-1-赋值运算"><a href="#_5-1-赋值运算" class="header-anchor">#</a> 5.1 赋值运算</h3> <p>赋值运算符 =</p> <div class="language- extra-class"><pre class="language-text"><code> 	a=10   
 	name='baism'
 
 重点：字符串必须用引号引起来
</code></pre></div><h3 id="_5-2-算法运算"><a href="#_5-2-算法运算" class="header-anchor">#</a> 5.2 算法运算</h3> <p>运算命令：</p> <ul><li>整形运算
– expr
– let
– $(())
– bc</li> <li>浮点运算
– bc</li></ul> <h5 id="整型运算"><a href="#整型运算" class="header-anchor">#</a> 整型运算</h5> <p><font color="pink">expr 命令：只能做整数运算，格式比较古板，注意空格。</font></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# expr 1 + 1
2
[root@zutuanxue ~]# expr 5 - 2
3
[root@zutuanxue ~]# expr 5 \* 2  #注意*出现应该转义，否则认为是通配符
10
[root@zutuanxue ~]# expr 5 / 2
2
[root@zutuanxue ~]# expr 5 % 2
1
</code></pre></div><p><font color="pink">let 命令：只能做整数运算，且运算元素必须是变量，无法直接对整数做运算。</font></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# let a=100+3;echo $a
103
root@zutuanxue ~]# let a=100-3;echo $a
97
[root@zutuanxue ~]# let a=100/3;echo $a
33
[root@zutuanxue ~]# let a=100*3;echo $a
300
[root@zutuanxue ~]# let a=100%3;echo $a
1
[root@zutuanxue ~]# let a=100**3;echo $a
1000000
[root@zutuanxue ~]# a=100
[root@zutuanxue ~]# let a++;echo $a
101
[root@zutuanxue ~]# let a--;echo $a
100
[root@zutuanxue ~]# let a-=3;echo $a
97
[root@zutuanxue ~]# let a+=5;echo $a
102
</code></pre></div><p><font color="pink">双小圆括号运算，在 shell 中 (( )) 也可以用来做数学运算。</font></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# echo $(( 100+3))
103
[root@zutuanxue ~]# echo $(( 100-3)) 
97
[root@zutuanxue ~]# echo $(( 100%3))
1
[root@zutuanxue ~]# echo $(( 100*3))
300
[root@zutuanxue ~]# echo $(( 100/3))
33
[root@zutuanxue ~]# echo $(( 100**3))     #开方运算
1000000
</code></pre></div><h5 id="浮点运算"><a href="#浮点运算" class="header-anchor">#</a> 浮点运算</h5> <p>浮点运算是采用的命令组合的方式来实现的 <code>echo “scale=N;表达式”|bc</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# echo &quot;scale=2;3+100&quot;|bc
103
[root@zutuanxue ~]# echo &quot;scale=2;100-3&quot;|bc
97
[root@zutuanxue ~]# echo &quot;scale=2;100/3&quot;|bc
33.33
[root@zutuanxue ~]# echo &quot;scale=2;100*3&quot;|bc
300
</code></pre></div><h3 id="_5-3-比较运算"><a href="#_5-3-比较运算" class="header-anchor">#</a> 5.3 比较运算</h3> <div class="language- extra-class"><pre class="language-text"><code>																						运算符解释：

 精确比较
        -eq         等于 equal

        -gt         大于

        -lt         小于

 模糊比较
        -ge         大于或等于

        -le         小于或等于

        -ne         不等于
</code></pre></div><p><strong>通过 test 命令比较两个整数关系：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -gt 300;echo $?</span>
<span class="token number">1</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -ge 300;echo $?</span>
<span class="token number">1</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -eq 300;echo $?</span>
<span class="token number">1</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -le 300;echo $?</span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -lt 300;echo $?</span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 100 -ne 300;echo $?</span>
<span class="token number">0</span>

备注：linux命令test只能比较两个整数的关系，不会返回结果，需要通过<span class="token variable">$?</span>才能看到结果
		<span class="token variable">$?</span> 返回 <span class="token number">0</span> 表示正确，非 <span class="token number">0</span> 表示错误。
</code></pre></div><h3 id="_5-4-字符串比较运算"><a href="#_5-4-字符串比较运算" class="header-anchor">#</a> 5.4 字符串比较运算</h3> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 运算符解释，注意字符串一定别忘了使用引号引起来</span>
  ==          等于   
  !=          不等于
  -n          检查字符串的长度是否大于 0  
  -z          检查字符串的长度是否为 0
</code></pre></div><p>示例：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 'root' == 'root';echo $?</span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test 'root' != 'root1';echo $?</span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># name=</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test -n &quot;$name&quot;;echo $?</span>
<span class="token number">1</span>
<span class="token punctuation">[</span>root@zutuanxue ~<span class="token punctuation">]</span><span class="token comment"># test -z &quot;$name&quot;;echo $?</span>
<span class="token number">0</span>
</code></pre></div><h3 id="_5-4-逻辑运算"><a href="#_5-4-逻辑运算" class="header-anchor">#</a> 5.4 逻辑运算</h3> <ul><li>逻辑与运算 &amp;&amp;</li> <li>逻辑或运算 ||</li> <li>逻辑非运算 ！</li></ul> <h3 id="_5-5-文件判断"><a href="#_5-5-文件判断" class="header-anchor">#</a> 5.5 文件判断</h3> <p>Linux 的设计思路：一切皆文件，对文件系统的操作其实可以狭隘的理解为对文件的操作。</p> <p>如果希望对文件类型和权限或者两个文件做新旧或者是否同一个文件进行判断，可以用 <code>test</code> 命令。</p> <p><strong>test 命令功能：</strong> 检测文件类型和比较运算</p> <p><strong>test 命令用法</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>																	test [命令选项] 表达式
</code></pre></div><p><strong>test 命令选项</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code>-d  检查文件是否存在且为目录
-e  检查文件是否存在
-f  检查文件是否存在且为文件
-r  检查文件是否存在且可读
-s  检查文件是否存在且不为空
-w  检查文件是否存在且可写
-x  检查文件是否存在且可执行
-O  检查文件是否存在并且被当前用户拥有
-G  检查文件是否存在并且默认组为当前用户组
-nt file1 -nt file2  检查file1是否比file2新
-ot file1 -ot file2  检查file1是否比file2旧     
-ef file1 -ef file2  检查file1是否与file2是同一个文件，判定依据的是i节点

以上只列出部分命令选项，详细的可以通过:man test获得。
</code></pre></div><h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <h5 id="_1-实现一个简单的四则运算"><a href="#_1-实现一个简单的四则运算" class="header-anchor">#</a> 1. 实现一个简单的四则运算</h5> <ol><li>要求用户传输三个参数，num1 算术运算符 num2</li> <li>运算输出结果</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#Author:Hedon</span>
<span class="token comment">#Release:v1.0</span>
<span class="token comment">#Description:imitate a basic calculator which supports +,-,*,\ operator.</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> <span class="token variable">$2</span> <span class="token variable">$3</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span>
</code></pre></div><h5 id="_2-内存使用率统计-要求打印内存使用率"><a href="#_2-内存使用率统计-要求打印内存使用率" class="header-anchor">#</a> 2. 内存使用率统计，要求打印内存使用率</h5> <p><strong>案例思考：</strong></p> <p>物料1. 内存总量 获得方式是什么 free top /proc/meminfo</p> <p>物料2. 内存使用量</p> <p>物料3. 内存使用率公式 使用量/总量*100%</p> <p><strong>实现步骤：</strong></p> <ol><li>获取内存总量</li> <li>获取内存使用量</li> <li>运算输出结果</li></ol> <p><strong>代码实现：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#Author:Hedon</span>
<span class="token comment">#Release:v1.0</span>
<span class="token comment">#Description:内存使用率计算脚本</span>

<span class="token comment">#total memoy</span>
<span class="token assign-left variable">total_memory</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> <span class="token operator">|</span> <span class="token function">grep</span> -i <span class="token string">&quot;Mem&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -s <span class="token string">&quot; &quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">&quot; &quot;</span> -f2<span class="token variable">`</span></span>

<span class="token comment">#used memory</span>
<span class="token assign-left variable">used_memory</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> <span class="token operator">|</span> <span class="token function">grep</span> -i <span class="token string">&quot;Mem&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -s <span class="token string">&quot; &quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">&quot; &quot;</span> -f3<span class="token variable">`</span></span>

<span class="token comment">#calculate</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;内存使用率: <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=2;<span class="token variable">$used_memory</span>*100/<span class="token variable">$total_memory</span>&quot;</span><span class="token operator">|</span><span class="token function">bc</span><span class="token variable">`</span></span>%&quot;</span>
</code></pre></div><h5 id="_3-模拟一个-linux-文本界面登陆程序-要求账号密码验证成功进入系统-账号密码验证失败退回登陆界面"><a href="#_3-模拟一个-linux-文本界面登陆程序-要求账号密码验证成功进入系统-账号密码验证失败退回登陆界面" class="header-anchor">#</a> 3. 模拟一个 linux 文本界面登陆程序，要求账号密码验证成功进入系统，账号密码验证失败退回登陆界面</h5> <p><strong>案例步骤：</strong></p> <ol><li>预设正确账号、密码</li> <li>输出提示登录信息并实现交互登录</li> <li>输出密码输入信息并实现交互</li> <li>判断输入是否正确
<ol><li>正确，进入系统</li> <li>不正确 继续运行该脚本</li></ol></li></ol> <p><strong>实现代码：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#Author:Hedon</span>
<span class="token comment">#Release:v1.0</span>
<span class="token comment">#Description:imiatete linux login process.</span>

<span class="token assign-left variable">default_account</span><span class="token operator">=</span><span class="token string">'root'</span>
<span class="token assign-left variable">default_pw</span><span class="token operator">=</span><span class="token string">'123456'</span>


<span class="token comment">######main</span>
<span class="token comment">#1、清屏</span>
<span class="token function">clear</span>
<span class="token comment">#2、输出提示信息</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;CentOS Linux 7 (Core)&quot;</span>
<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;Kernel <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -r<span class="token variable">`</span></span> on an <span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span><span class="token entity" title="\n">\n</span>&quot;</span>

<span class="token comment">#3、交互输入登陆名</span>
<span class="token builtin class-name">echo</span> -n <span class="token string">&quot;<span class="token environment constant">$HOSTNAME</span> login: &quot;</span>
<span class="token builtin class-name">read</span> account

<span class="token comment">#4、交互输入密码</span>
<span class="token builtin class-name">read</span> -s -t30 -p <span class="token string">&quot;Password: &quot;</span> pw

<span class="token comment">#5、判断用户输入是否正确</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$default_account</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;<span class="token variable">$account</span>&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$default_pw</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;<span class="token variable">$pw</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
   <span class="token function">clear</span>
   <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\n">\n</span>welcome to root&quot;</span>
<span class="token keyword">else</span>
   <span class="token builtin class-name">echo</span>  <span class="token string">&quot;用户名或密码错误...&quot;</span>
   <span class="token comment">#输入错误，再次调用本脚本</span>
   <span class="token function">sh</span> <span class="token variable">$0</span>
<span class="token keyword">fi</span>
</code></pre></div><h2 id="_6-shell-数组"><a href="#_6-shell-数组" class="header-anchor">#</a> 6. Shell 数组</h2> <h3 id="_6-1-数组介绍"><a href="#_6-1-数组介绍" class="header-anchor">#</a> 6.1 数组介绍</h3> <p>数组可以让用户一次赋予多个值，需要读取数据时只需通过索引调用就可以方便读出了。</p> <ul><li>普通数组：只能使用整数作为数组索引(元素的索引)</li> <li>关联数组：可以使用字符串作为数组索引(元素的索引)</li></ul> <h3 id="_6-2-数组定义"><a href="#_6-2-数组定义" class="header-anchor">#</a> 6.2 数组定义</h3> <div class="language- extra-class"><pre class="language-text"><code>数组名称=(元素1 元素2 元素3 ...)
</code></pre></div><h3 id="_6-3-数组赋值"><a href="#_6-3-数组赋值" class="header-anchor">#</a> 6.3 数组赋值</h3> <ul><li><p>一次赋一个值</p> <div class="language-shell extra-class"><pre class="language-shell"><code>变量名<span class="token operator">=</span>变量值
array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>v1
array<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>v2
array<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>v3
</code></pre></div></li> <li><p>一次性赋多个值</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span>var1 var2 var3 var4<span class="token punctuation">)</span>
<span class="token assign-left variable">array1</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">cat</span> /etc/passwd<span class="token variable">`</span></span><span class="token punctuation">)</span>			//将文件中每一行赋值给array1数组
<span class="token assign-left variable">array2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> /root<span class="token variable">`</span></span><span class="token punctuation">)</span>
<span class="token assign-left variable">array3</span><span class="token operator">=</span><span class="token punctuation">(</span>harry amy jack <span class="token string">&quot;Miss zhang&quot;</span><span class="token punctuation">)</span>
<span class="token assign-left variable">array4</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token string">&quot;hello world&quot;</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">=</span>linux<span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="_6-4-数组取值"><a href="#_6-4-数组取值" class="header-anchor">#</a> 6.4 数组取值</h3> <p><strong>取值方式：</strong> ${数组名称[索引]}</p> <p>**索引：**默认情况下索引是指数组中的元素[存的值]在数组中的顺序，从 0 始计数，关联数组除外。比如：</p> <p>array=(var1 var2 var3 var4)</p> <p>array 数组中存有 4 个元素，分别是：var1 var2 var3 var4</p> <p>那么我想取出 var2 这个元素，那么就得先看看他在数组中的位置，数组中的元素索引如下:</p> <div class="language- extra-class"><pre class="language-text"><code>		元素	var1 var2 var3 var4
		索引	0     1     2    3
</code></pre></div><p>所以正确表示 array 数组中元素 var2 的方式是：${array[1]}</p> <h3 id="_6-5-关联数组"><a href="#_6-5-关联数组" class="header-anchor">#</a> 6.5 关联数组</h3> <p><strong>定义关联数组</strong></p> <p>关联数组使用首先需要申明该数组为关联数组，申明方式： <code>declare -A 数组名称</code></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 首先声明关联数组</span>
declare -A asso_array1
declare -A asso_array2
declare -A asso_array3
</code></pre></div><p><strong>关联数组赋值</strong></p> <ul><li><p>一次赋一个值</p> <div class="language- extra-class"><pre class="language-text"><code>数组名[索引]=变量值
[root@zutuanxue ~]# asso_array1[linux]=one
[root@zutuanxue ~]# asso_array1[java]=two
[root@zutuanxue ~]# asso_array1[php]=three
</code></pre></div></li> <li><p>一次附多个值</p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]=&quot;Miss zhang&quot;)
</code></pre></div></li></ul> <p><strong>查看关联数组</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# declare -A
declare -A asso_array1='([php]=&quot;three&quot; [java]=&quot;two&quot; [linux]=&quot;one&quot; )'
declare -A asso_array2='([name3]=&quot;amy&quot; [name2]=&quot;jack&quot; [name1]=&quot;harry&quot; [name4]=&quot;Miss zhang&quot; )'
</code></pre></div><p><strong>关联数组取值</strong></p> <ul><li>!：拿 key</li> <li>#：统计个数</li></ul> <div class="language-markdown extra-class"><pre class="language-markdown"><code>[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# echo ${asso_array1[linux]}
one
[root@zutuanxue </span><span class="token punctuation">~</span></span>]# echo ${asso_array1[php]}
three
[root@zutuanxue ~]# echo ${asso_array1[*]}
three two one

<span class="token title important"><span class="token punctuation">#</span> 加 ！表示取出 key</span>
[root@zutuanxue ~]# echo ${!asso_array1[*]}
php java linux

<span class="token title important"><span class="token punctuation">#</span> 加 # 表示取出个数</span>
[root@zutuanxue ~]# echo ${#asso_array1[*]}
3

[root@zutuanxue ~]# echo ${#asso_array2[*]}
4

[root@zutuanxue ~]# echo ${!asso_array2[*]}
name3 name2 name1 name4
</code></pre></div><h2 id="_7-shell-函数"><a href="#_7-shell-函数" class="header-anchor">#</a> 7. Shell 函数</h2> <h3 id="_7-1-函数定义"><a href="#_7-1-函数定义" class="header-anchor">#</a> 7.1 函数定义</h3> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 语法一:</span>

函数名 () {
    代码块
    return N
}


<span class="token title important"><span class="token punctuation">#</span> 语法二：</span>
function 函数名 {
      代码块
      return N
}
      
<span class="token code keyword">      </span>
<span class="token title important"><span class="token punctuation">#</span> 函数中 return 说明：</span>
<span class="token list punctuation">1.</span> return 可以结束一个函数，类似于循环控制语句的 break (结束当前循环，执行循环体后面的代码)。
<span class="token list punctuation">2.</span> return 默认返回函数中最后一个命令的退出状态，也可以给定参数值，该参数值的范围是 0-256 之间。
<span class="token list punctuation">3.</span> 如果没有 return 命令，函数将返回最后一个 Shell 的退出值。
</code></pre></div><h3 id="_7-2-函数调用"><a href="#_7-2-函数调用" class="header-anchor">#</a> 7.2 函数调用</h3> <p><strong>当前命令调用</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue shell04]# cat fun1.sh 
#!/bin/bash
hello(){
echo &quot;hello zutuanxue $1&quot;
hostname
}
menu(){
cat &lt;&lt;-EOF
1. mysql
2. web
3. app
4. exit
EOF
}

[root@zutuanxue shell04]# source fun1.sh 
[root@zutuanxue shell04]# . fun1.sh 

[root@zutuanxue shell04]# hello 888
hello zutuanxue 888
MissHou.zutuanxue.cc
[root@zutuanxue shell04]# menu
1. mysql
2. web
3. app
4. exit
</code></pre></div><p><strong>定义到用户的环境变量中调用</strong></p> <ul><li>就是直接把函数写到 /etc/profile	/etc/bashrc	~/.bash_profile	~/.bashrc 等文件当中。</li></ul> <p><strong>脚本中调用</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#打印菜单</span>
<span class="token builtin class-name">source</span> ./fun1.sh
<span class="token function-name function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span>END
	h	显示命令帮助
	f	显示磁盘分区
	d	显示磁盘挂载
	m	查看内存使用
	u	查看系统负载
	q	退出程序
	END
<span class="token punctuation">}</span>
menu		//调用函数
</code></pre></div><h2 id="_8-shell-控制流程"><a href="#_8-shell-控制流程" class="header-anchor">#</a> 8. Shell 控制流程</h2> <h3 id="_8-1-if"><a href="#_8-1-if" class="header-anchor">#</a> 8.1 if</h3> <p><strong>基本用法：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 开始 if</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> condition1 <span class="token punctuation">]</span>
<span class="token keyword">then</span>          
            command1    <span class="token comment">#满足 condition1 执行 command1代 码块</span>
            
<span class="token keyword">elif</span> <span class="token punctuation">[</span> condition2 <span class="token punctuation">]</span>   
<span class="token keyword">then</span>          
            commands2    <span class="token comment"># 满足 condition2 执行 command2 代码块</span>
  <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.
<span class="token keyword">else</span>     
            commandsX      <span class="token comment">#  如果条件都不满足执行 commandX 代码块</span>
<span class="token keyword">fi</span>    
<span class="token comment"># fi 结束</span>
</code></pre></div><p><strong>高级用法：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 高级用法 1：条件符号使用双圆括号，可以在条件中植入数学表达式 if (())</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">5</span> <span class="token operator">&gt;</span> <span class="token number">10</span> <span class="token punctuation">))</span></span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;yes&quot;</span>
<span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;no&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 高级用法 2：使用双方括号,可以在条件中使用通配符</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span>  ab ac rx bx rvv vt
   <span class="token keyword">do</span>
       <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$var</span>&quot;</span> <span class="token operator">==</span> r* <span class="token punctuation">]</span><span class="token punctuation">]</span>
	  <span class="token keyword">then</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span>&quot;</span>
       <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre></div><p><strong>案例需求：</strong></p> <p>判断内存的使用率：</p> <ul><li>60 以下 ok</li> <li>60 以上 黄色警告</li> <li>70 以上 橙色严重警告</li> <li>80 以上 红色警告</li></ul> <p><strong>案例思考：</strong></p> <ul><li>内存使用率获得方式
<ol><li>手动给出</li> <li>通过内存查看命令运算得出</li></ol></li></ul> <p><strong>代码实现：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#统计内存使用率</span>
<span class="token assign-left variable">total_memory</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> <span class="token operator">|</span> <span class="token function">grep</span> -i <span class="token string">&quot;Mem&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -s <span class="token string">&quot; &quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">&quot; &quot;</span> -f2<span class="token variable">`</span></span>
<span class="token assign-left variable">used_memory</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">free</span> <span class="token operator">|</span> <span class="token function">grep</span> -i <span class="token string">&quot;Mem&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> -s <span class="token string">&quot; &quot;</span> <span class="token operator">|</span> <span class="token function">cut</span> -d <span class="token string">&quot; &quot;</span> -f3<span class="token variable">`</span></span>
<span class="token assign-left variable">used_percent</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$used_memory</span>*100/<span class="token variable">$total_memory</span>&quot;</span><span class="token operator">|</span><span class="token function">bc</span><span class="token variable">`</span></span>


<span class="token comment">#判断使用情况</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$used_percent</span> -gt <span class="token number">80</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[31m 警告 <span class="token entity" title="\033">\033</span>[0m&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$used_percent</span> -gt <span class="token number">70</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[35m 警告 <span class="token entity" title="\033">\033</span>[0m&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$used_percent</span> -gt <span class="token number">60</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[33m 警告 <span class="token entity" title="\033">\033</span>[0m&quot;</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\033">\033</span>[32m OK <span class="token entity" title="\033">\033</span>[0m&quot;</span>
<span class="token keyword">fi</span>
</code></pre></div><h3 id="_8-2-for"><a href="#_8-2-for" class="header-anchor">#</a> 8.2 for</h3> <p><strong>几种赋值方式：</strong></p> <ol><li>直接赋值</li> <li>赋值来自一个范围</li> <li>赋值来自命令产生的结果</li> <li>不带列表，由用户指定</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;直接赋值&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;列表赋值&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">}</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;列表赋值带步长&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">10</span><span class="token punctuation">..</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token keyword">do</span> 
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;列表赋值带步长，反向&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">..</span>-2<span class="token punctuation">}</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;命令赋值&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">var</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">seq</span> <span class="token number">10</span> -2 <span class="token number">1</span><span class="token variable">`</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;不带列表，由用户指定&quot;</span>
<span class="token keyword">for</span> var
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$var</span> <span class="token entity" title="\n">\n</span>&quot;</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;用户输入了<span class="token variable">$#</span>个参数&quot;</span>
</code></pre></div><p><strong>C 风格的 for：</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span> expr1<span class="token punctuation">;</span>expr2<span class="token punctuation">;</span>expr3 <span class="token punctuation">))</span></span>
	<span class="token keyword">do</span>
		<span class="token builtin class-name">command</span>
		<span class="token builtin class-name">command</span>
		…
	<span class="token keyword">done</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span>  
	<span class="token keyword">do</span>
		<span class="token builtin class-name">echo</span> <span class="token variable">$i</span>
	<span class="token keyword">done</span>


expr1：定义变量并赋初值   变量初始值
expr2：决定是否进行循环（条件）  变量的条件
expr3：决定循环变量如何改变,决定循环什么时候退出 自增或自减运算
</code></pre></div><h3 id="_8-3-while"><a href="#_8-3-while" class="header-anchor">#</a> 8.3 while</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> 表达式 <span class="token punctuation">]</span>
	<span class="token keyword">do</span>
		command<span class="token punctuation">..</span>.
	<span class="token keyword">done</span>
	
<span class="token keyword">while</span>  <span class="token punctuation">[</span> <span class="token number">1</span> -eq <span class="token number">1</span> <span class="token punctuation">]</span>    或者 <span class="token variable"><span class="token punctuation">((</span> <span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token punctuation">))</span></span>
  <span class="token keyword">do</span>
     <span class="token builtin class-name">command</span>
     <span class="token builtin class-name">command</span>
     <span class="token punctuation">..</span>.
 <span class="token keyword">done</span>
</code></pre></div><p>无限循环：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 方法 1</span>
<span class="token keyword">while</span> <span class="token builtin class-name">:</span>
	<span class="token keyword">do</span>
		command<span class="token punctuation">..</span>.
	<span class="token keyword">done</span>
	
	
<span class="token comment"># 方法 2</span>
<span class="token keyword">while</span> <span class="token boolean">true</span>
	<span class="token keyword">do</span>
		<span class="token builtin class-name">command</span>
	<span class="token keyword">done</span>
</code></pre></div><h3 id="_8-4-until"><a href="#_8-4-until" class="header-anchor">#</a> 8.4 until</h3> <p>特点：<font color="pink">条件为假就进入循环；条件为真就退出循环。</font></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">until</span> expression  <span class="token comment"># [ 1 -eq 1 ] 或者 (( 1 &gt;= 1 ))</span>
	<span class="token keyword">do</span>
		<span class="token builtin class-name">command</span>
		<span class="token builtin class-name">command</span>
		<span class="token punctuation">..</span>.
	<span class="token keyword">done</span>
</code></pre></div><h3 id="_8-5-case"><a href="#_8-5-case" class="header-anchor">#</a> 8.5 case</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token keyword">case</span> <span class="token variable">$var</span> <span class="token keyword">in</span>             <span class="token comment"># 定义变量, var代表是变量名</span>
pattern1<span class="token punctuation">)</span>               <span class="token comment"># 模式1：用 | 分割多个模式，相当于or</span>
    command1             <span class="token comment"># 需要执行的语句</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>                   <span class="token comment"># 两个分号代表命令结束</span>
pattern2<span class="token punctuation">)</span>
    command2
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
pattern3<span class="token punctuation">)</span>
    command3
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
		  *<span class="token punctuation">)</span>               <span class="token comment">#default，不满足以上模式，默认执行 *)下面的语句</span>
    command4
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>							esac表示case语句结束
</code></pre></div><h3 id="_8-6-循环控制语句"><a href="#_8-6-循环控制语句" class="header-anchor">#</a> 8.6 循环控制语句</h3> <p><strong>break</strong>：跳出循环</p> <p><strong>continue</strong>：跳过本次循环，进入下一轮循环</p> <p><strong>sleep</strong> 秒数：睡眠</p> <p><strong>exit</strong>：退出程序</p> <p><strong>shift</strong>：外部传参到循环时，参数管理命令。使位置参数向左移动，默认移动 1 位，可以使用shift 2。</p> <h2 id="_9-shell-操作文件"><a href="#_9-shell-操作文件" class="header-anchor">#</a> 9. Shell 操作文件</h2> <ul><li>sed 命令</li></ul> <h3 id="_9-1-sed-命令介绍"><a href="#_9-1-sed-命令介绍" class="header-anchor">#</a> 9.1 sed 命令介绍</h3> <p>sed 是 Linux 中提供的一个外部命令，它是一个行(流)编辑器，非交互式的对文件内容进行增删改查的操作，使用者只能在命令行输入编辑命令、指定文件名，然后在屏幕上查看输出。它和文本编辑器有本质的区别。</p> <div class="language- extra-class"><pre class="language-text"><code>区别是：

文本编辑器: 编辑对象是文件

行编辑器：编辑对象是文件中的行
</code></pre></div><p><strong>sed 数据处理原理：</strong></p> <img src="https://tva1.sinaimg.cn/large/008i3skNly1grd9yfty4ej616g09gn1302.jpg" alt="image-20210610165824987" style="zoom:50%;"> <h3 id="_9-2-sed-语法"><a href="#_9-2-sed-语法" class="header-anchor">#</a> 9.2 sed 语法</h3> <p><strong>[命令选项]</strong></p> <div class="language- extra-class"><pre class="language-text"><code>-e script 将脚本中指定的命令添加到处理输入时执行的命令中  多条件，一行中要有多个操作
-f script 将文件中指定的命令添加到处理输入时执行的命令中
-n        抑制自动输出
-i        编辑文件内容
-i.bak    修改时同时创建 .bak 备份文件。
-r        使用扩展的正则表达式
!         取反 （跟在模式条件后与shell有所区别）
</code></pre></div><p><strong>[内部命令]</strong></p> <div class="language- extra-class"><pre class="language-text"><code>a   在匹配后面添加
i   在匹配前面添加
d   删除
s   查找替换  字符串
c   更改
y   转换   N D P 
p   打印
</code></pre></div><p><strong>[Flag]</strong></p> <div class="language- extra-class"><pre class="language-text"><code>数字             表示新文本替换的模式
g：              表示用新文本替换现有文本的全部实例
p：              表示打印原始的内容
w filename:     将替换的结果写入文件
</code></pre></div><h3 id="_9-3-内部命令"><a href="#_9-3-内部命令" class="header-anchor">#</a> 9.3 内部命令</h3> <p>示例文档如下：</p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# cat data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">文件内容「增加」操作，将数据追加到某个位置之后，使用命令 「a」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 在data1的每行后追加一行新数据内容: append data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed 'a\append data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
2 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
4 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
5 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;


<span class="token title important"><span class="token punctuation">#</span> 在第二行后新开一行追加数据: append data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2a\append data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.


<span class="token title important"><span class="token punctuation">#</span> 在第二到四行每行后新开一行追加数据: append data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2,4a\append data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
4 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
5 the quick brown fox jumps over the lazy dog.


<span class="token title important"><span class="token punctuation">#</span> 匹配字符串追加: 找到包含&quot;3 the&quot;的行，在其后新开一行追加内容: append data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '/3 the/a\append data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
append data &quot;haha&quot;
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 注意：//开启匹配模式  /要匹配的字符串/</span>
</code></pre></div><p><font color="pink">文件内容「增加」操作，将数据插入到某个位置之前，使用命令 「i」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 在data1的每行前插入一行新数据内容: insert data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed 'i\insert data &quot;haha&quot;' data1
insert data &quot;haha&quot;
1 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
2 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
4 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
5 the quick brown fox jumps over the lazy dog.


<span class="token title important"><span class="token punctuation">#</span> 在第二行前新开一行插入数据: insert data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2i\insert data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.


<span class="token title important"><span class="token punctuation">#</span> 在第二到四行每行前新开一行插入数据: insert data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2,4i\insert data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
2 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.


<span class="token title important"><span class="token punctuation">#</span> 匹配字符串插入: 找到包含&quot;3 the&quot;的行，在其前新开一行插入内容: insert data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '/3 the/i\insert data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
insert data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">文件内容修改操作「替换」，将一行中匹配的内容替换为新的数据，使用命令「s」。</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 从标准输出流中做替换，将test替换为text</span>
[root@zutuanxue ~]# echo &quot;this is a test&quot; |sed 's/test/text/'
this is a text

<span class="token title important"><span class="token punctuation">#</span> 将data1中每行的dog替换为cat</span>
[root@zutuanxue ~]# sed 's/dog/cat/' data1
1 the quick brown fox jumps over the lazy cat.
2 the quick brown fox jumps over the lazy cat.
3 the quick brown fox jumps over the lazy cat.
4 the quick brown fox jumps over the lazy cat.
5 the quick brown fox jumps over the lazy cat.

<span class="token title important"><span class="token punctuation">#</span> 将data1中第二行的dog替换为cat</span>
[root@zutuanxue ~]# sed '2s/dog/cat/' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy cat.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 将data1中第二到第四行的dog替换为cat</span>
[root@zutuanxue ~]# sed '2,4s/dog/cat/' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy cat.
3 the quick brown fox jumps over the lazy cat.
4 the quick brown fox jumps over the lazy cat.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 匹配字符串替换:将包含字符串&quot;3 the&quot;的行中的dog替换为cat</span>
[root@zutuanxue ~]# sed '/3 the/s/dog/cat/' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy cat.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">文件内容修改操作「更改」,将一行中匹配的内容替换为新的数据，使用命令 「c」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 将data1文件中的所有行的内容更改为: change data &quot;data&quot;</span>
[root@zutuanxue ~]# sed 'c\change data &quot;haha&quot;' data1
change data &quot;haha&quot;
change data &quot;haha&quot;
change data &quot;haha&quot;
change data &quot;haha&quot;
change data &quot;haha&quot;

<span class="token title important"><span class="token punctuation">#</span> 将data1文件第二行的内容更改为: change data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2c\change data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
change data &quot;haha&quot;
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 将data1文件中的第二、三、四行的内容更改为：change data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '2,4c\change data &quot;haha&quot;' data1
1 the quick brown fox jumps over the lazy dog.
change data &quot;haha&quot;
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 将data1文件中包含&quot;3 the&quot;的行内容更改为: change data &quot;haha&quot;</span>
[root@zutuanxue ~]# sed '/3 the/c\change data &quot;data&quot;' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
change data &quot;data&quot;
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">文件内容修改操作「字符转换」，将一行中匹配的内容替换为新的数据，使用命令「y」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 将data1中的a b c字符转换为对应的 A  B  C字符</span>
[root@zutuanxue ~]# sed 'y/abc/ABC/' data1
1 the quiCk Brown fox jumps over the lAzy dog.
2 the quiCk Brown fox jumps over the lAzy dog.
3 the quiCk Brown fox jumps over the lAzy dog.
4 the quiCk Brown fox jumps over the lAzy dog.
5 the quiCk Brown fox jumps over the lAzy dog.
</code></pre></div><p><font color="pink">文件内容「删除」，将文件中的指定数据删除，使用命令「d」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 删除文件data1中的所有数据</span>
[root@zutuanxue ~]# sed 'd' data1

<span class="token title important"><span class="token punctuation">#</span> 删除文件data1中的第三行数据</span>
[root@zutuanxue ~]# sed '3d' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 删除文件data1第三到第四行的数据</span>
[root@zutuanxue ~]# sed '3,4d' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 删除文件data1中包含字符串&quot;3 the&quot;的行</span>
[root@zutuanxue ~]# sed '/3 the/d' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">文件内容查看，将文件内容输出到屏幕，使用命令「p」:</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 打印data1文件内容</span>
[root@zutuanxue ~]# sed 'p' data1
1 the quick brown fox jumps over the lazy dog.
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 打印data1文件第三行的内容</span>
[root@zutuanxue ~]# sed '3p' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 打印data1文件第二、三、四行内容</span>
[root@zutuanxue ~]# sed '2,4p' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.

<span class="token title important"><span class="token punctuation">#</span> 打印data1文件包含字符串&quot;3 the&quot;的行</span>
[root@zutuanxue ~]# sed '/3 the/p' data1
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog. 


<span class="token title important"><span class="token punctuation">#</span> 可以看得出，打印内容是重复的行，原因是打印了指定文件内容一次，又将读入缓存的所有数据打印了一次，所以会看到这样的效果，</span>
<span class="token title important"><span class="token punctuation">#</span> 如果不想看到这样的结果，可以加命令选项「-n」抑制内存输出即可。</span>
</code></pre></div><h3 id="_9-4-内部选项"><a href="#_9-4-内部选项" class="header-anchor">#</a> 9.4 内部选项</h3> <p>在 sed 命令中，命令选项是对 sed 中的命令的增强。</p> <p><font color="pink">在命令行中使用多个命令 「-e」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 将brown替换为green dog替换为cat</span>
[root@zutuanxue ~]# sed -e 's/brown/green/;s/dog/cat/' data1
1 the quick green fox jumps over the lazy cat.
2 the quick green fox jumps over the lazy cat.
3 the quick green fox jumps over the lazy cat.
4 the quick green fox jumps over the lazy cat.
5 the quick green fox jumps over the lazy cat.
</code></pre></div><p><font color="pink">从文件读取编辑器命令 「-f」 适用于日常重复执行的场景：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1）将命令写入文件</span>
[root@zutuanxue ~]# vim abc
s/brown/green/
s/dog/cat/
s/fox/elephant/

<span class="token title important"><span class="token punctuation">#</span> 2）使用 -f 命令选项调用命令文件</span>
[root@zutuanxue ~]# sed -f abc data1 
1 the quick green elephant jumps over the lazy cat.
2 the quick green elephant jumps over the lazy cat.
3 the quick green elephant jumps over the lazy cat.
4 the quick green elephant jumps over the lazy cat.
5 the quick green elephant jumps over the lazy cat.
</code></pre></div><p><font color="pink">抑制内存输出 「-n」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 打印data1文件的第二行到最后一行内容.  $ 是最后的意思</span>
[root@zutuanxue ~]# sed -n '2,$p' data1 
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">使用正则表达式 「-r」：</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 打印data1中以字符串&quot;3 the&quot;开头的行内容</span>
[root@zutuanxue ~]# sed -n  -r '/^(3 the)/p' data1
3 the quick brown fox jumps over the lazy dog.
</code></pre></div><p><font color="pink">永久修改「-i」：</font></p> <p>从上述的演示中，大家可以看出，数据处理只是在缓存中完成的，并没有实际修改文件内容，如果需要修改文件内容可以直接使用**「-i」** 命令选项。</p> <p>在这里我需要说明的是 -i 是一个不可逆的操作，一旦修改，如果想复原就很困难，几乎不可能，所以建议大家在操作的时候可以备份一下源文件。</p> <p>-i 命令选项提供了备份功能，比如参数使用 <strong>「-i.bak」</strong>，那么在修改源文件的同时会先备份一个以.bak结尾的源文件，然后再进行修改操作。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 1）查看文件列表，没有发现data1.bak</span>
[root@zutuanxue ~]# ls
abc  apache  data1  Dobby  file  node-v10.14.1  Python-3.7.1  soft1  vimset

<span class="token title important"><span class="token punctuation">#</span> 2）执行替换命令并修改文件</span>
[root@zutuanxue ~]# sed -i.bak 's/brown/green/' data1

<span class="token title important"><span class="token punctuation">#</span> 3）发现文件夹中多了一个data1.bak文件</span>
[root@zutuanxue ~]# ls
abc     data1      Dobby  node-v10.14.1  soft1
apache  data1.bak  file   Python-3.7.1   vimset

<span class="token title important"><span class="token punctuation">#</span> 4）打印比较一下，发现data1已经被修改，data1.bak是源文件的备份。</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# cat data1
1 the quick green fox jumps over the lazy dog.
2 the quick green fox jumps over the lazy dog.
3 the quick green fox jumps over the lazy dog.
4 the quick green fox jumps over the lazy dog.
5 the quick green fox jumps over the lazy dog.
[root@zutuanxue </span><span class="token punctuation">~</span></span>]# cat data1.bak 
1 the quick brown fox jumps over the lazy dog.
2 the quick brown fox jumps over the lazy dog.
3 the quick brown fox jumps over the lazy dog.
4 the quick brown fox jumps over the lazy dog.
5 the quick brown fox jumps over the lazy dog.
</code></pre></div><h3 id="_9-5-标志"><a href="#_9-5-标志" class="header-anchor">#</a> 9.5 标志</h3> <p>在sed命令中，标志是对sed中的内部命令做补充说明。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 演示文档</span>
[root@zutuanxue ~]# cat data2
1 the quick brown fox jumps over the lazy dog . dog
2 the quick brown fox jumps over the lazy dog . dog
3 the quick brown fox jumps over the lazy dog . dog
4 the quick brown fox jumps over the lazy dog . dog
5 the quick brown fox jumps over the lazy dog . dog
</code></pre></div><p><strong>数字标志</strong></p> <p>此标志是一个非零正数，默认情况下，执行替换的时候，如果一行中有多个符合的字符串，如果没有标志位定义，那么只会替换第一个字符串，其他的就被忽略掉了，为了能精确替换，可以使用数字位做定义。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 替换一行中的第二处dog为cat</span>
[root@zutuanxue ~]# sed 's/dog/cat/2' data2
1 the quick brown fox jumps over the lazy dog . cat
2 the quick brown fox jumps over the lazy dog . cat
3 the quick brown fox jumps over the lazy dog . cat
4 the quick brown fox jumps over the lazy dog . cat
5 the quick brown fox jumps over the lazy dog . cat
</code></pre></div><h5 id="g-标志"><a href="#g-标志" class="header-anchor">#</a> g 标志</h5> <p>将一行中的所有符合的字符串全部执行替换。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 将data1文件中的所有dog替换为cat</span>
[root@zutuanxue ~]# sed 's/dog/cat/g' data2
1 the quick brown fox jumps over the lazy cat . cat
2 the quick brown fox jumps over the lazy cat . cat
3 the quick brown fox jumps over the lazy cat . cat
4 the quick brown fox jumps over the lazy cat . cat
5 the quick brown fox jumps over the lazy cat . cat
</code></pre></div><h5 id="p-标志"><a href="#p-标志" class="header-anchor">#</a> p 标志</h5> <p>打印文本内容，类似于 -p 命令选项。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> [root@zutuanxue ~]# sed  '3s/dog/cat/p' data2</span>
1 the quick brown fox jumps over the lazy dog . dog
2 the quick brown fox jumps over the lazy dog . dog
3 the quick brown fox jumps over the lazy cat . dog
3 the quick brown fox jumps over the lazy cat . dog
4 the quick brown fox jumps over the lazy dog . dog
5 the quick brown fox jumps over the lazy dog . dog
</code></pre></div><h5 id="w-filename-标志"><a href="#w-filename-标志" class="header-anchor">#</a> w filename 标志</h5> <p>将修改的内容存入 filename 文件中。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>[root@zutuanxue ~]# sed  '3s/dog/cat/w text' data2
1 the quick brown fox jumps over the lazy dog . dog
2 the quick brown fox jumps over the lazy dog . dog
3 the quick brown fox jumps over the lazy cat . dog
4 the quick brown fox jumps over the lazy dog . dog
5 the quick brown fox jumps over the lazy dog . dog

<span class="token title important"><span class="token punctuation">#</span> 可以看出，将修改的第三行内容存在了text文件中</span>
[root@zutuanxue ~]# cat text 
3 the quick brown fox jumps over the lazy cat . dog
</code></pre></div><h2 id="_10-shell-数据处理"><a href="#_10-shell-数据处理" class="header-anchor">#</a> 10. Shell 数据处理</h2> <p>基本命令：</p> <p>1）数据检索:grep tr cut</p> <p>2）数据处理:uniq sort tee paste xargs</p> <p>升级版 awk：</p> <p>1）字符串截取</p> <p>2） 数据运算</p> <h3 id="_10-1-awk-介绍"><a href="#_10-1-awk-介绍" class="header-anchor">#</a> 10.1 awk 介绍</h3> <p>在日常计算机管理中，总会有很多数据输出到屏幕或者文件，这些输出包含了标准输出、标准错误输出。默认情况下，这些信息全部输出到默认输出设备—屏幕。然而，大量的数据输出中，只有一小部分是我们需要重点关注的，我们需要把我们需要的或者关注的这些信息过滤或者提取以备后续需要时调用。早先的学习中，我们学过使用 <code>grep</code> 来过滤这些数据，使用 <code>cut</code>、<code>tr</code> 命令提出某些字段，但是他们都不具备提取并处理数据的能力，都必须先过滤，再提取转存到变量，然后在通过变量提取去处理，比如：</p> <div class="language- extra-class"><pre class="language-text"><code>内存使用率的统计步骤：

1) 通过 free -m 提取出内存总量，赋值给变量 memory_totle

2）通过 free -m 提取出n内存使用量，赋值给变量 memory_use

3）通过数学运算计算内存使用率
</code></pre></div><p><code>awk</code> 是一种可以处理数据、产生格式化报表的语言，功能十分强大。</p> <p><code>awk</code> 认为文件中的每一行是一条记录，记录与记录的分隔符为<strong>换行符</strong>，每一列是一个字段，字段与字段的分隔符默认是<strong>一个或多个空格或 tab 制表符</strong>.</p> <h3 id="_10-2-awk-语法"><a href="#_10-2-awk-语法" class="header-anchor">#</a> 10.2 awk 语法</h3> <p>awk [options] ‘[BEGIN]{program}[END]’ [FILENAME]</p> <h5 id="常用命令选项"><a href="#常用命令选项" class="header-anchor">#</a> 常用命令选项</h5> <p>-F fs 指定描绘一行中数据字段的文件分隔符  默认为空格
-f file 指定读取程序的文件名
-v var=value 定义awk程序中使用的变量和默认值</p> <p>注意：awk 程序由<strong>左大括号和右大括号</strong>定义。 程序命令必须放置在两个大括号之间。由于 awk 命令行假定程序是单文本字符串，所以必须将程序包括在单引号内。</p> <p>1）程序必须放在大括号内
2）程序必须要用单引号引起来</p> <h5 id="awk-程序运行优先级"><a href="#awk-程序运行优先级" class="header-anchor">#</a> awk 程序运行优先级</h5> <p>1）BEGIN：在开始处理数据流之前执行，可选项
2）program：如何处理数据流，必选项
3）END：处理完数据流后执行，可选项</p> <h3 id="_10-3-awk-基本应用"><a href="#_10-3-awk-基本应用" class="header-anchor">#</a> 10.3 awk 基本应用</h3> <p>学习用例：</p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# cat test 
1 the quick brown fox jumps over the lazy cat . dog
2 the quick brown fox jumps over the lazy cat . dog
3 the quick brown fox         jumps over the lazy cat . dog
4 the quick brown fox jumps over the lazy cat . dog
5 the quick brown fox jumps over the lazy cat . dog
</code></pre></div><h5 id="awk-对字段-列-的提取"><a href="#awk-对字段-列-的提取" class="header-anchor">#</a> awk 对字段（列）的提取</h5> <p>字段提取：提取一个文本中的一列数据并打印输出。</p> <p>字段相关内置变量：</p> <div class="language- extra-class"><pre class="language-text"><code>$0 表示整行文本
$1 表示文本行中的第一个数据字段
$2 表示文本行中的第二个数据字段
$N 表示文本行中的第N个数据字段
$NF 表示文本行中的最后一个数据字段
</code></pre></div><p>示例：</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 读入test每行数据并把每行数据打印出来</span>
[root@zutuanxue ~]# awk '{print $0}' test 
1 the quick brown fox jumps over the lazy cat . dog
2 the quick brown fox jumps over the lazy cat . dog
3 the quick brown fox         jumps over the lazy cat . dog
4 the quick brown fox jumps over the lazy cat . dog
5 the quick brown fox jumps over the lazy cat . dog

<span class="token title important"><span class="token punctuation">#</span> 打印test第六个字段</span>
[root@zutuanxue ~]# awk '{print $6}' test
jumps
jumps
jumps
jumps
jumps


<span class="token title important"><span class="token punctuation">#</span> 打印test最后一个字段</span>
[root@zutuanxue ~]# awk '{print $NF}' test
dog
dog
dog
dog
dog
</code></pre></div><h5 id="awk-对记录-行-的提示"><a href="#awk-对记录-行-的提示" class="header-anchor">#</a> awk 对记录（行）的提示</h5> <p>记录提取：提取一个文本中的一行并打印输出。</p> <p>记录的提取方法有两种：</p> <ul><li>通过行号</li> <li>通过正则匹配。</li></ul> <p>记录相关内置变量。</p> <p>NR：指定行号 number row</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 提取test第三行数据</span>

<span class="token title important"><span class="token punctuation">#</span> 指定行号为3</span>
[root@zutuanxue ~]# awk 'NR==3{print $0}' test 
3 the quick brown fox         jumps over the lazy cat . dog

<span class="token title important"><span class="token punctuation">#</span> 指定行的第一个字段精确匹配字符串为3</span>
[root@zutuanxue ~]# awk '$1==&quot;3&quot;{print $0}' test 
3 the quick brown fox         jumps over the lazy cat . dog
</code></pre></div><p><strong>awk 对字符串的提取</strong></p> <p>记录和字段的汇合点就是字符串。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 打印test第三行的第六个字段</span>
[root@zutuanxue ~]# awk 'NR==3{print $6}' test
jumps
</code></pre></div><h3 id="_10-4-awk-命令选项"><a href="#_10-4-awk-命令选项" class="header-anchor">#</a> 10.4 awk 命令选项</h3> <p><font color="pink">「-F」: 指定字段与字段的分隔符。</font></p> <p>当输出的数据流字段格式不是 aw k默认的字段格式时，我们可以使用 -F 命令选项来重新定义数据流字段分隔符。比如：</p> <p>处理的文件是 /etc/passwd，希望打印第一列、第三列、最后一列：</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>[root@zutuanxue ~]# awk -F ':' '{print $1,$3,$NF}' /etc/passwd
root 0 /bin/bash
bin 1 /sbin/nologin
daemon 2 /sbin/nologin
adm 3 /sbin/nologin
lp 4 /sbin/nologin
sync 5 /bin/sync
shutdown 6 /sbin/shutdown
halt 7 /sbin/halt
mail 8 /sbin/nologin
operator 11 /sbin/nologin
games 12 /sbin/nologin
ftp 14 /sbin/nologin
nobody 99 /sbin/nologin
systemd-network 192 /sbin/nologin
dbus 81 /sbin/nologin
polkitd 999 /sbin/nologin
postfix 89 /sbin/nologin
chrony 998 /sbin/nologin
sshd 74 /sbin/nologin
ntp 38 /sbin/nologin
tcpdump 72 /sbin/nologin
nscd 28 /sbin/nologin
mysql 997 /sbin/nologin
www 996 /sbin/nologin
apache 48 /sbin/nologin
tss 59 /sbin/nologin
zabbix 995 /sbin/nologin
saslauth 994 /sbin/nologin
grafana 993 /sbin/nologin

可以看的出，awk输出字段默认的分隔符也是空格
</code></pre></div><p><font color="pink">「-f file」：如果 awk 命令是日常重复工作，而又没有太多变化，可以将程序写入文件，每次使用 -f 调用程序文件就好，方便，高效。</font></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code>[root@zutuanxue ~]# cat abc 
{print $1,$3,$NF}

[root@zutuanxue ~]# awk -f abc test
1 quick dog
2 quick dog
3 quick dog
4 quick dog
5 quick dog
</code></pre></div><p><font color="pink">「-v」 定义变量。</font></p> <div class="language- extra-class"><pre class="language-text"><code>[root@zutuanxue ~]# awk -v name='baism' 'BEGIN{print name}'
baism

定义了一个变量 name=baism，然后调用变量读出数据。
</code></pre></div><h3 id="_10-5-awk-程序运行优先级"><a href="#_10-5-awk-程序运行优先级" class="header-anchor">#</a> 10.5 awk 程序运行优先级</h3> <p>关于 awk 程序的执行优先级，BEGIN 是优先级最高的代码块，是在执行 PROGRAM 之前执行的，不需要提供数据源，因为不涉及到任何数据的处理，也不依赖于 PROGRAM 代码块；PROGRAM是对数据流干什么，是必选代码块，也是默认代码块。所以在执行时必须提供数据源；END 是处理完数据流后的操作，如果需要执行 END 代码块，就必须需要 PROGRAM 的支持，单个无法执行。</p> <p>BEGIN：处理数据源之前干什么，不需要数据源就可以执行。</p> <p>PROGRAM： 对数据源干什么，【默认必须有】需要数据源。</p> <p>END：处理完数据源后干什么，需要 PROGRAM 需要数据源。</p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 优先级展示</span>
[root@zutuanxue ~]# awk 'BEGIN{print &quot;hello zutuanxue&quot;}{print $0}END{print &quot;bye zutuanxue&quot;}' test
hello zutuanxue
1 the quick brown fox jumps over the lazy cat . dog
2 the quick brown fox jumps over the lazy cat . dog
3 the quick brown fox         jumps over the lazy cat . dog
4 the quick brown fox jumps over the lazy cat . dog
5 the quick brown fox jumps over the lazy cat . dog
bye zutuanxue

<span class="token title important"><span class="token punctuation">#</span> 不需要数据源，可以直接执行</span>
[root@zutuanxue ~]# awk 'BEGIN{print &quot;hello world&quot;}'
hello world

<span class="token title important"><span class="token punctuation">#</span> 没有提供数据流，所以无法执行成功</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# awk '{print &quot;hello world&quot;}'
[root@zutuanxue </span><span class="token punctuation">~</span></span>]# awk 'END{print &quot;hello world&quot;}'
</code></pre></div><h3 id="_10-6-awk-高级应用"><a href="#_10-6-awk-高级应用" class="header-anchor">#</a> 10.6 awk 高级应用</h3> <p>awk 是一门「语言」，那么就会符合语言的特性，除了可以定义变量外，还可以定义数组，还可以进行运算，流程控制。</p> <h5 id="awk-定义变量和数组"><a href="#awk-定义变量和数组" class="header-anchor">#</a> awk 定义变量和数组</h5> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 定义变量</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# awk -v name='baism' 'BEGIN{print name}'
baism
[root@zutuanxue </span><span class="token punctuation">~</span></span>]# awk 'BEGIN{name=&quot;baism&quot;;print name}'
baism

<span class="token title important"><span class="token punctuation">#</span> 定义数组</span>
[root@zutuanxue ~]# awk 'BEGIN{array[0]=100;array[1]=200;print array[0],array[1]}'
100 200
</code></pre></div><p><strong>awk 运算</strong></p> <ol><li>赋值运算 =</li> <li>比较运算 &gt; &gt;= == &lt; &lt;= !=</li> <li>数学运算 + - * / % ** ++ –</li> <li>逻辑运算 &amp;&amp; || ！</li> <li>匹配运算 ~ !~ 精确匹配 == !=</li></ol> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 赋值运算：主要是对变量或者数组赋值。</span>
[root@zutuanxue ~]# awk -v name='baism' 'BEGIN{print name}'
baism

<span class="token title important"><span class="token punctuation">#</span> 比较运算：如果比较的是字符串则按ascii编码顺序表比较。如果结果返回为真则用1表示，如果返回为假则用0表示。</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# awk 'BEGIN{print &quot;a&quot; &gt;= &quot;b&quot; }'
0
[root@zutuanxue </span><span class="token punctuation">~</span></span>]# awk 'BEGIN{print &quot;a&quot; &lt;= &quot;b&quot; }'
1
[root@zutuanxue ~]# awk '$1&gt;4{print $0}' test
5 the quick brown fox jumps over the lazy cat . dog

<span class="token title important"><span class="token punctuation">#</span> 数字运算</span>
[root@zutuanxue ~]# awk 'BEGIN{print 100+3 }'
103

<span class="token title important"><span class="token punctuation">#</span> 逻辑运算</span>
[root@zutuanxue ~]# awk 'BEGIN{print 100&gt;=2 &amp;&amp; 100&gt;=3 }'
1

<span class="token title important"><span class="token punctuation">#</span> 匹配运算</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# awk -F ':' '$1 </span><span class="token punctuation">~</span></span> &quot;^ro&quot; {print $0}' /etc/passwd
root:x:0:0:root:/root:/bin/bash
</code></pre></div><h5 id="awk-环境变量"><a href="#awk-环境变量" class="header-anchor">#</a> awk 环境变量</h5> <table><thead><tr><th style="text-align:left;">变量</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">FIELDWIDTHS</td> <td style="text-align:left;">以空格分隔的数字列表，用空格定义每个数据字段的精确宽度</td></tr> <tr><td style="text-align:left;">FS</td> <td style="text-align:left;">输入字段分隔符号 数据源的字段分隔符 -F</td></tr> <tr><td style="text-align:left;">OFS</td> <td style="text-align:left;">输出字段分隔符号</td></tr> <tr><td style="text-align:left;">RS</td> <td style="text-align:left;">输入记录分隔符</td></tr> <tr><td style="text-align:left;">ORS</td> <td style="text-align:left;">输出记录分隔符号</td></tr></tbody></table> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> FIELDWIDTHS: 重定义列宽并打印，注意不可以使用 $0 打印所有，因为 $0 是打印本行全内容，不会打印你定义的字段</span>
[root@zutuanxue ~]# awk 'BEGIN{FIELDWIDTHS=&quot;5 2 8&quot;}NR==1{print $1,$2,$3}' /etc/passwd
root: x: 0:0:root

<span class="token title important"><span class="token punctuation">#</span> FS: 指定数据源中字段分隔符，类似命令选项 -F</span>
[root@zutuanxue ~]# awk 'BEGIN{FS=&quot;:&quot;}NR==1{print $1,$3,$NF}' /etc/passwd
root 0 /bin/bash

<span class="token title important"><span class="token punctuation">#</span> OFS: 指定输出到屏幕后字段的分隔符</span>
[root@zutuanxue ~]# awk 'BEGIN{FS=&quot;:&quot;;OFS=&quot;-&quot;}NR==1{print $1,$3,$NF}' /etc/passwd
root-0-/bin/bash

<span class="token title important"><span class="token punctuation">#</span> RS: 指定记录的分隔符</span>
[root@zutuanxue ~]# awk 'BEGIN{RS=&quot;&quot;}{print $1,$13,$25,$37,$49}' test
1 2 3 4 5
将记录的分隔符修改为空行后，所有的行会变成一行，所以所有字段就在一行了。

<span class="token title important"><span class="token punctuation">#</span> ORS: 输出到屏幕后记录的分隔符，默认为回车</span>
[root@zutuanxue <span class="token strike"><span class="token punctuation">~</span><span class="token content">]# awk 'BEGIN{RS=&quot;&quot;;ORS=&quot;<span class="token italic"><span class="token punctuation">*</span><span class="token content">&quot;}{print $1,$13,$25,$37,$49}' test
1 2 3 4 5</span><span class="token punctuation">*</span></span>[root@zutuanxue </span><span class="token punctuation">~</span></span>]# 
可以看出，提示符和输出在一行了，因为默认回车换成了*
</code></pre></div><h5 id="awk-流程控制"><a href="#awk-流程控制" class="header-anchor">#</a> awk 流程控制</h5> <p><strong>if</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 学习用例</span>
[root@zutuanxue ~]# cat num
1
2
3
4
5
6
7
8
9

<span class="token title important"><span class="token punctuation">#</span> 单if语句</span>
<span class="token title important"><span class="token punctuation">#</span> 打印$1大于5的行</span>
[root@zutuanxue ~]# awk '{if($1&gt;5)print $0}' num
6
7
8
9

<span class="token title important"><span class="token punctuation">#</span> if...else语句</span>
<span class="token title important"><span class="token punctuation">#</span> 假如$1大于5则除以2输出，否则乘以2输出</span>
[root@zutuanxue ~]# awk '{if($1&gt;5)print $1/2;else print $1*2}' num
2
4
6
8
10
3
3.5
4
4.5
</code></pre></div><p><strong>for</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 学习用例</span>
[root@zutuanxue ~]# cat num2
60 50 100
150 30 10
70 100 40

<span class="token title important"><span class="token punctuation">#</span> 将文件中的每行的数值累加，和大于或等于150就停止累加</span>
[root@zutuanxue ~]# awk '{sum=0;i=1;while(sum&lt;150){sum+=$i;i++}print sum}' num2
210
150
170
</code></pre></div><p><strong>do..while</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 学习用例</span>
[root@zutuanxue ~]# cat num2
60 50 100
150 30 10
70 100 40

<span class="token title important"><span class="token punctuation">#</span> 将文件中的每行的数值累加，和大于或等于150就停止累加</span>
[root@zutuanxue ~]# awk '{sum=0;i=1;do{sum+=$i;i++}while(sum&lt;150);print sum}' num2
210
150
170
</code></pre></div><p><strong>break/continue</strong></p> <div class="language-markdown extra-class"><pre class="language-markdown"><code><span class="token title important"><span class="token punctuation">#</span> 学习用例</span>
[root@zutuanxue ~]# cat num2
60 50 100
150 30 10
70 100 40

<span class="token title important"><span class="token punctuation">#</span> 累加每行数值，和大于150停止累加</span>
[root@zutuanxue ~]# awk '{
<span class="token blockquote punctuation">&gt;</span> sum=0
<span class="token blockquote punctuation">&gt;</span> i=1
<span class="token blockquote punctuation">&gt;</span> while (i&lt;4){
<span class="token blockquote punctuation">&gt;</span>    sum+=$i
<span class="token blockquote punctuation">&gt;</span>    if (sum&gt;150){
<span class="token blockquote punctuation">&gt;</span>       break
<span class="token blockquote punctuation">&gt;</span>    }
<span class="token blockquote punctuation">&gt;</span>    i++
<span class="token blockquote punctuation">&gt;</span> }
<span class="token blockquote punctuation">&gt;</span> print sum
<span class="token blockquote punctuation">&gt;</span> }' num2

210
180
170
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">6/24/2021, 6:09:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/noteSite/linux/Nginx.html">
        Nginx
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/noteSite/assets/js/app.340d3b4d.js" defer></script><script src="/noteSite/assets/js/2.691adf44.js" defer></script><script src="/noteSite/assets/js/169.9393f890.js" defer></script>
  </body>
</html>
