<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ESAMScript | Hedon</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/noteSite/assets/css/0.styles.2b5d8ceb.css" as="style"><link rel="preload" href="/noteSite/assets/js/app.6b1cf83d.js" as="script"><link rel="preload" href="/noteSite/assets/js/2.0f8877a4.js" as="script"><link rel="preload" href="/noteSite/assets/js/45.768b1953.js" as="script"><link rel="prefetch" href="/noteSite/assets/js/10.6dba027b.js"><link rel="prefetch" href="/noteSite/assets/js/11.82b5bb56.js"><link rel="prefetch" href="/noteSite/assets/js/12.e733a196.js"><link rel="prefetch" href="/noteSite/assets/js/13.f45d544e.js"><link rel="prefetch" href="/noteSite/assets/js/14.f255fb4c.js"><link rel="prefetch" href="/noteSite/assets/js/15.637c455d.js"><link rel="prefetch" href="/noteSite/assets/js/16.588a856e.js"><link rel="prefetch" href="/noteSite/assets/js/17.42c5f955.js"><link rel="prefetch" href="/noteSite/assets/js/18.7a2f817c.js"><link rel="prefetch" href="/noteSite/assets/js/19.13241de9.js"><link rel="prefetch" href="/noteSite/assets/js/20.85f2b41e.js"><link rel="prefetch" href="/noteSite/assets/js/21.1a00fb3c.js"><link rel="prefetch" href="/noteSite/assets/js/22.7e6dfc42.js"><link rel="prefetch" href="/noteSite/assets/js/23.8af13e97.js"><link rel="prefetch" href="/noteSite/assets/js/24.ba02540a.js"><link rel="prefetch" href="/noteSite/assets/js/25.39be53e4.js"><link rel="prefetch" href="/noteSite/assets/js/26.22d04538.js"><link rel="prefetch" href="/noteSite/assets/js/27.d398d2fb.js"><link rel="prefetch" href="/noteSite/assets/js/28.010e7a44.js"><link rel="prefetch" href="/noteSite/assets/js/29.4ae369cc.js"><link rel="prefetch" href="/noteSite/assets/js/3.8ec43f71.js"><link rel="prefetch" href="/noteSite/assets/js/30.4a618dd7.js"><link rel="prefetch" href="/noteSite/assets/js/31.3f41a4a9.js"><link rel="prefetch" href="/noteSite/assets/js/32.340e45cf.js"><link rel="prefetch" href="/noteSite/assets/js/33.6320adea.js"><link rel="prefetch" href="/noteSite/assets/js/34.805e9a0e.js"><link rel="prefetch" href="/noteSite/assets/js/35.4b509ffd.js"><link rel="prefetch" href="/noteSite/assets/js/36.2e3a6e66.js"><link rel="prefetch" href="/noteSite/assets/js/37.59b0d06e.js"><link rel="prefetch" href="/noteSite/assets/js/38.e019b993.js"><link rel="prefetch" href="/noteSite/assets/js/39.428da735.js"><link rel="prefetch" href="/noteSite/assets/js/4.80421812.js"><link rel="prefetch" href="/noteSite/assets/js/40.ee6ddb21.js"><link rel="prefetch" href="/noteSite/assets/js/41.323e163f.js"><link rel="prefetch" href="/noteSite/assets/js/42.66099527.js"><link rel="prefetch" href="/noteSite/assets/js/43.90ddef1e.js"><link rel="prefetch" href="/noteSite/assets/js/44.5e5da910.js"><link rel="prefetch" href="/noteSite/assets/js/46.385fde94.js"><link rel="prefetch" href="/noteSite/assets/js/47.7fc3ea1d.js"><link rel="prefetch" href="/noteSite/assets/js/48.815f004e.js"><link rel="prefetch" href="/noteSite/assets/js/49.ce85f00e.js"><link rel="prefetch" href="/noteSite/assets/js/5.4170108b.js"><link rel="prefetch" href="/noteSite/assets/js/50.c837fcda.js"><link rel="prefetch" href="/noteSite/assets/js/51.7b71cfbf.js"><link rel="prefetch" href="/noteSite/assets/js/52.73b679bc.js"><link rel="prefetch" href="/noteSite/assets/js/53.4d5f9281.js"><link rel="prefetch" href="/noteSite/assets/js/54.1b5d70f1.js"><link rel="prefetch" href="/noteSite/assets/js/55.7a3dca79.js"><link rel="prefetch" href="/noteSite/assets/js/56.cfec414d.js"><link rel="prefetch" href="/noteSite/assets/js/57.c6e27d4e.js"><link rel="prefetch" href="/noteSite/assets/js/58.b7849c34.js"><link rel="prefetch" href="/noteSite/assets/js/59.954f5827.js"><link rel="prefetch" href="/noteSite/assets/js/6.f3d86aa7.js"><link rel="prefetch" href="/noteSite/assets/js/60.30d151d0.js"><link rel="prefetch" href="/noteSite/assets/js/61.fb0d2b34.js"><link rel="prefetch" href="/noteSite/assets/js/62.3177d2c7.js"><link rel="prefetch" href="/noteSite/assets/js/63.c0b6d999.js"><link rel="prefetch" href="/noteSite/assets/js/64.95a4b82a.js"><link rel="prefetch" href="/noteSite/assets/js/65.023c304e.js"><link rel="prefetch" href="/noteSite/assets/js/66.a026e0e5.js"><link rel="prefetch" href="/noteSite/assets/js/67.c1d5f450.js"><link rel="prefetch" href="/noteSite/assets/js/68.3861c13c.js"><link rel="prefetch" href="/noteSite/assets/js/69.760b5711.js"><link rel="prefetch" href="/noteSite/assets/js/7.80f82a7b.js"><link rel="prefetch" href="/noteSite/assets/js/70.26123833.js"><link rel="prefetch" href="/noteSite/assets/js/71.99cc568f.js"><link rel="prefetch" href="/noteSite/assets/js/72.6b20295b.js"><link rel="prefetch" href="/noteSite/assets/js/73.f3713a79.js"><link rel="prefetch" href="/noteSite/assets/js/74.602d0689.js"><link rel="prefetch" href="/noteSite/assets/js/75.64050c5c.js"><link rel="prefetch" href="/noteSite/assets/js/76.266a9755.js"><link rel="prefetch" href="/noteSite/assets/js/77.5fcb6b01.js"><link rel="prefetch" href="/noteSite/assets/js/78.e4a33074.js"><link rel="prefetch" href="/noteSite/assets/js/79.8eb0a72b.js"><link rel="prefetch" href="/noteSite/assets/js/8.7b438c8a.js"><link rel="prefetch" href="/noteSite/assets/js/80.8f28555f.js"><link rel="prefetch" href="/noteSite/assets/js/81.6ee4731e.js"><link rel="prefetch" href="/noteSite/assets/js/82.7df05d20.js"><link rel="prefetch" href="/noteSite/assets/js/83.e975399b.js"><link rel="prefetch" href="/noteSite/assets/js/84.f6e813b1.js"><link rel="prefetch" href="/noteSite/assets/js/85.65713494.js"><link rel="prefetch" href="/noteSite/assets/js/9.409ee5bd.js">
    <link rel="stylesheet" href="/noteSite/assets/css/0.styles.2b5d8ceb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/noteSite/" class="home-link router-link-active"><img src="/noteSite/images/hedon.png" alt="Hedon" class="logo"> <span class="site-name can-hide">Hedon</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/noteSite/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/noteSite/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Backend Menu" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="Backend Menu" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/noteSite/backend/java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/noteSite/backend/middleware/" class="nav-link">
  中间件
</a></li></ul></div></div><div class="nav-item"><a href="/noteSite/frontend/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/noteSite/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><a href="/noteSite/mac/" class="nav-link">
  Mac
</a></div><div class="nav-item"><a href="/noteSite/paper/" class="nav-link">
  Paper
</a></div><div class="nav-item"><a href="https://github.com/hedon954/noteSite" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/noteSite/frontend/js/ECMAScript6.html" aria-current="page" class="active sidebar-link">ESAMScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es6" class="sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-let" class="sidebar-link">1. let</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-const" class="sidebar-link">2. const</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-变量的解构赋值" class="sidebar-link">3. 变量的解构赋值</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_4-模板字符串" class="sidebar-link">4. 模板字符串</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_5-简化对象写法" class="sidebar-link">5. 简化对象写法</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_6-箭头函数" class="sidebar-link">6. 箭头函数</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_7-函数参数赋初值" class="sidebar-link">7. 函数参数赋初值</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_8-rest-参数" class="sidebar-link">8. rest 参数</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_9-spread-扩展运算符" class="sidebar-link">9. spread 扩展运算符</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_10-symbol" class="sidebar-link">10. Symbol</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_11-迭代器" class="sidebar-link">11. 迭代器</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_12-生成器" class="sidebar-link">12. 生成器</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_13-promise" class="sidebar-link">13. Promise</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_14-set" class="sidebar-link">14. Set</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_15-map" class="sidebar-link">15. Map</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_16-class-类" class="sidebar-link">16. class 类</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_17-数值扩展-number" class="sidebar-link">17. 数值扩展 Number</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_18-对象扩展-object" class="sidebar-link">18. 对象扩展 Object</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_19-模块化" class="sidebar-link">19. 模块化</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es7" class="sidebar-link">ES7</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-array-prototype-includes" class="sidebar-link">1. Array.prototype.includes</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-幂运算" class="sidebar-link">2. 幂运算</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es8" class="sidebar-link">ES8</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-async-和-await" class="sidebar-link">1. async 和 await</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-object-values-和-object-entries" class="sidebar-link">2. Object.values 和 Object.entries</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-object-getownpropertydescriptors" class="sidebar-link">3. Object.getOwnPropertyDescriptors</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es9" class="sidebar-link">ES9</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-rest-spread-属性" class="sidebar-link">1. Rest/Spread 属性</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-正则捕获分组" class="sidebar-link">2. 正则捕获分组</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-正则反向断言" class="sidebar-link">3. 正则反向断言</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-正则表达式-dotall-模式" class="sidebar-link">3. 正则表达式 dotAll 模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es10" class="sidebar-link">ES10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-object-fromentries" class="sidebar-link">1. Object.fromEntries</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-trimstart-和-trimend" class="sidebar-link">2. trimStart 和 trimEnd</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-array-prototype-flat-与-flatmap" class="sidebar-link">3. Array.prototype.flat 与 flatMap</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_4-symbol-prototype-description" class="sidebar-link">4. Symbol.prototype.description</a></li></ul></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#es11" class="sidebar-link">ES11</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_1-私有属性" class="sidebar-link">1. 私有属性</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_2-promise-allsettled" class="sidebar-link">2. Promise.allSettled</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_3-string-prototype-matchall" class="sidebar-link">3.  String.prototype.matchAll</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_4-可选链操作符" class="sidebar-link">4. 可选链操作符</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_5-动态-import-导入" class="sidebar-link">5. 动态 import 导入</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_6-bigint-类型" class="sidebar-link">6. BigInt 类型</a></li><li class="sidebar-sub-header"><a href="/noteSite/frontend/js/ECMAScript6.html#_7-全局对象-globalthis" class="sidebar-link">7. 全局对象 globalThis</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="esamscript"><a href="#esamscript" class="header-anchor">#</a> ESAMScript</h1> <p>ECMA（European Computer Manufacturers Association）中文名称为欧洲计算机制造商协会，这个组织的目标是评估、开发和认可电信和计算机标准。1994 年后该组织改名为 Ecma 国际。</p> <p>ECMAScript 是由 Ecma 国际通过 ECMA-262 标准化的脚本程序设计语言。</p> <p>Ecma 国际制定了许多标准，而 ECMA-262 只是其中的一个，所有标准列表查看 http://www.ecma-international.org/publications/standards/Standard.htm</p> <p>历史版本：https://www.ecma-international.org/publications-and-standards/standards/ecma-262/</p> <table><thead><tr><th>版本</th> <th>年份</th> <th>新特性</th></tr></thead> <tbody><tr><td>第 1 版</td> <td>1997</td> <td>制定了语言的基本语法</td></tr> <tr><td>第 2 版</td> <td>1998</td> <td>较小改动</td></tr> <tr><td>第 3 版</td> <td>1999</td> <td>引入正则、异常处理、格式化输出等。IE 开始支持</td></tr> <tr><td>第 4 版</td> <td>2007</td> <td>国际激进，未发布</td></tr> <tr><td>第 5 版</td> <td>2009</td> <td>引入严格模式、JSON、扩展对象、数组、原型、字符串、日期方法</td></tr> <tr><td>第 6 版</td> <td>2015</td> <td>模块化、面向对象语法、Promise、箭头函数、let、const、数据解构赋值等</td></tr> <tr><td>第 7 版</td> <td>2016</td> <td>幂运算符、数组扩展、Async/await 关键字</td></tr> <tr><td>第 8 版</td> <td>2017</td> <td>Async/await、字符串扩展</td></tr> <tr><td>第 9 版</td> <td>2018</td> <td>对象解构赋值、正则扩展</td></tr> <tr><td>第 10 版</td> <td>2019</td> <td>扩展对象、数组方法</td></tr></tbody></table> <h2 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h2> <h3 id="_1-let"><a href="#_1-let" class="header-anchor">#</a> 1. let</h3> <p>let 关键字用来声明变量，使用 let 声明的变量有几个特点：</p> <ol><li>不允许重复声明</li> <li>块儿级作用域</li> <li>不存在变量提升（不允许在声明变量之前使用变量）</li> <li>不影响作用域链</li></ol> <p><font color="orange">应用场景：以后声明变量使用 let 就对了。</font></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 遍历并绑定事件</span>
<span class="token comment">// 可以</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 不可以</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 可以</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-const"><a href="#_2-const" class="header-anchor">#</a> 2. const</h3> <p>const 关键字用来声明常量，const 声明有以下特点：</p> <ol><li>声明必须赋初始值</li> <li>标识符一般为大写</li> <li>不允许重复声明</li> <li>值不允许修改</li> <li>块儿级作用域</li></ol> <p><font color="orange">注意：对象属性修改和数组元素变化不会触发 const 错误。</font></p> <p><font color="orange">应用场景：声明对象类型使用 const，非对象类型声明选择 let。</font></p> <h3 id="_3-变量的解构赋值"><a href="#_3-变量的解构赋值" class="header-anchor">#</a> 3. 变量的解构赋值</h3> <blockquote><p>ES6 允许按照一定模式（变量同名），从数组和对象中提取值，对变量进行赋值，这被称为解构赋值。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//数组的解构赋值</span>
<span class="token keyword">const</span> <span class="token constant">ARR</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token string">'黎明'</span><span class="token punctuation">,</span> <span class="token string">'郭富城'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>zhang<span class="token punctuation">,</span> liu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> guo<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token constant">ARR</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span>zhang<span class="token punctuation">,</span> liu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> guo<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//对象的解构赋值</span>
<span class="token keyword">const</span> <span class="token constant">LIN</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'林志颖'</span><span class="token punctuation">,</span>
  tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'车手'</span><span class="token punctuation">,</span> <span class="token string">'歌手'</span><span class="token punctuation">,</span> <span class="token string">'小旋风'</span><span class="token punctuation">,</span> <span class="token string">'演员'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> tags<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">LIN</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">,</span> tags<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//复杂解构</span>
<span class="token keyword">let</span> <span class="token constant">WANGFEI</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'王菲'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  songs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'红豆'</span><span class="token punctuation">,</span> <span class="token string">'流年'</span><span class="token punctuation">,</span> <span class="token string">'暧昧'</span><span class="token punctuation">,</span> <span class="token string">'传奇'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  history<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'窦唯'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'李亚鹏'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'谢霆锋'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>songs<span class="token operator">:</span> <span class="token punctuation">[</span>one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">]</span><span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> third<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">WANGFEI</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>songs<span class="token operator">:</span> <span class="token punctuation">[</span>one<span class="token punctuation">,</span> two<span class="token punctuation">,</span> three<span class="token punctuation">]</span><span class="token punctuation">,</span> history<span class="token operator">:</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> third<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><font color="orange">注意：频繁使用对象方法、数组元素，就可以使用解构赋值形式。</font></p> <h3 id="_4-模板字符串"><a href="#_4-模板字符串" class="header-anchor">#</a> 4. 模板字符串</h3> <blockquote><p>模板字符串（template string）是增强版的字符串，用反引号（<strong>`</strong>）标识，特点：</p> <ol><li>字符串中可以出现换行符</li> <li>可以使用 ${xxx} 形式输出变量</li></ol></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//定义字符串</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;ul&gt;
            &lt;li&gt;沈腾&lt;/li&gt;
            &lt;li&gt;玛丽&lt;/li&gt;
            &lt;li&gt;魏翔&lt;/li&gt;
            &lt;li&gt;艾伦&lt;/li&gt;
          &lt;/ul&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 变量拼接</span>
<span class="token keyword">let</span> star <span class="token operator">=</span> <span class="token string">'王宁'</span><span class="token punctuation">;</span>

<span class="token comment">// 取值</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>star<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">在几年前离开了开心麻花</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre></div><p><font color="orange">应用场景：字符串结构复杂和需要变量拼接的时候使用模板字符串。</font></p> <h3 id="_5-简化对象写法"><a href="#_5-简化对象写法" class="header-anchor">#</a> 5. 简化对象写法</h3> <blockquote><p>ES6 允许在大括号里面，直接写入变量和函数，作为对象的属性和方法。这样的书写更加简洁。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'hedon'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> slogon <span class="token operator">=</span> <span class="token string">'团结就是力量'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token function-variable function">improve</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//属性和方法简写</span>
<span class="token keyword">let</span> hedonInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">,</span>
    slogon<span class="token punctuation">,</span>
    improve<span class="token punctuation">,</span>
    <span class="token function">changeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;change the world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-箭头函数"><a href="#_6-箭头函数" class="header-anchor">#</a> 6. 箭头函数</h3> <p>ES6 允许使用「箭头」（<strong>=&gt;</strong>）定义函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//通用写法</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> arg1 <span class="token operator">+</span> arg2 <span class="token operator">+</span> arg3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意点：</p> <ol><li>如果形参只有一个，则小括号可以省略</li> <li>函数体如果只有一条语句，则花括号可以省略，函数的返回值为该条语句的执行结果</li> <li>箭头函数 this 是静态的，指向声明时所在作用域下的 this 的值</li> <li>箭头函数不能作为构造函数实例化</li> <li>不能使用 arguments</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//省略小括号</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token parameter">num</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//省略花括号</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token parameter">score</span> <span class="token operator">=&gt;</span> score <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token comment">//this 指向声明时所在作用域中 this 的值</span>
<span class="token keyword">let</span> <span class="token function-variable function">getName1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getName2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//设置 windows 对象的 name 属性</span>
window<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;hedon&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">SCHOOL</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  	name<span class="token operator">:</span> <span class="token string">&quot;SCHOOL name&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//直接调用</span>
<span class="token function">getName1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hedon</span>
<span class="token function">getName2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hedon</span>

<span class="token comment">//call 方法调用</span>
<span class="token function">getName1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">SCHOOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hedon(不变)</span>
<span class="token function">getName2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">SCHOOL</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//SCHOOL name(变了)</span>
</code></pre></div><p><font color="orange">应用场景：箭头函数不会更改 this 指向，用来指定与 this 无关的回调函数会非常合适，如：定时器，数组的方法回调；不适合与 this 有关的回调，如：事件回调，对象的方法。</font></p> <h3 id="_7-函数参数赋初值"><a href="#_7-函数参数赋初值" class="header-anchor">#</a> 7. 函数参数赋初值</h3> <blockquote><p>ES6 运行给函数参数赋初始值。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 具有默认值的参数，一般位置都靠后</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-rest-参数"><a href="#_8-rest-参数" class="header-anchor">#</a> 8. rest 参数</h3> <blockquote><p>ES6 引入 rest 参数，用于获取函数的实参，用来代替 arguments。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//arguments</span>
<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
  * rest 参数必须是最后一个形参
  * ...args 就是 rest 参数
  * rest 参数其实就是一个变长数组
  */</span>
<span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">minus</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><font color="orange">应用场景：rest 参数非常适合不定个数参数函数的场景。</font></p> <h3 id="_9-spread-扩展运算符"><a href="#_9-spread-扩展运算符" class="header-anchor">#</a> 9. spread 扩展运算符</h3> <blockquote><p>扩展运算符（spread）也是三个点（...）。它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列，对数组进行解包。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//展开数组</span>
<span class="token keyword">let</span> tfboys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'德玛西亚之力'</span><span class="token punctuation">,</span> <span class="token string">'德玛西亚之翼'</span><span class="token punctuation">,</span> <span class="token string">'德玛西亚皇子'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>tfboys<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//展开对象</span>
<span class="token keyword">let</span> skillOne <span class="token operator">=</span> <span class="token punctuation">{</span>
  	q<span class="token operator">:</span> <span class="token string">'致命打击'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> skillTwo <span class="token operator">=</span> <span class="token punctuation">{</span>
  	w<span class="token operator">:</span> <span class="token string">'勇气'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> skillThree <span class="token operator">=</span> <span class="token punctuation">{</span>
  	e<span class="token operator">:</span> <span class="token string">'审判'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> skillFour <span class="token operator">=</span> <span class="token punctuation">{</span>
  	r<span class="token operator">:</span> <span class="token string">'德玛西亚正义'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> gailun <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>skillOne<span class="token punctuation">,</span> <span class="token operator">...</span>skillTwo<span class="token punctuation">,</span> <span class="token operator">...</span>skillThree<span class="token punctuation">,</span> <span class="token operator">...</span>skillFour<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//数组合并</span>
<span class="token keyword">const</span> kuaizi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'王太利'</span><span class="token punctuation">,</span> <span class="token string">'肖央'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fenghuang <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'曾毅'</span><span class="token punctuation">,</span> <span class="token string">'玲花'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> kuaizifenghuang <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>kuaizi<span class="token punctuation">,</span> <span class="token operator">...</span>fenghuang<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//深拷贝</span>
<span class="token keyword">const</span> oldArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>oldArr<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//将伪数组转为真正的数组</span>
<span class="token keyword">const</span> divs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这是一个对象</span>
<span class="token keyword">const</span> divArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>divs<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//转为数组</span>
</code></pre></div><h3 id="_10-symbol"><a href="#_10-symbol" class="header-anchor">#</a> 10. Symbol</h3> <h4 id="_10-1-symbol-使用"><a href="#_10-1-symbol-使用" class="header-anchor">#</a> 10.1 Symbol 使用</h4> <p>ES6 引入了一种新的原始数据类型 Symbol，表示独一无二的值。它是 JavaScript 语言的第七种数据类型，是一种类似于字符串的数据类型。</p> <blockquote><p>前六种：number、string、null、undefined、boolean、object。</p> <p>USONB:</p> <p>​	u: undefined</p> <p>​	s: string, symbol</p> <p>​	o: object</p> <p>​	n: null</p> <p>​	b: boolean</p></blockquote> <p>Symbol 特点：</p> <ol><li>Symbol 的值是唯一的，用来解决命名冲突的问题</li> <li>Symbol 值不能与其他数据进行运算</li> <li>Symbol 定义的对象属性不能使用 for...in 循环遍历，但是可以使用 <strong>Reflect.ownKeys</strong> 来获取对象的所有键名</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建 Symbol</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//添加标识的 Symbol</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;Hedon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s2_2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;Hedon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2 <span class="token operator">===</span> s2_2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token comment">//使用 Symbol for 定义</span>
<span class="token keyword">let</span> s3 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'Hedon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> s3_2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'Hedon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s3 <span class="token operator">===</span> s3_2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2 <span class="token operator">===</span> s3<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//false</span>

<span class="token comment">//向对象中添加方法 up down</span>
<span class="token keyword">let</span> game <span class="token operator">=</span> <span class="token punctuation">{</span>
  	name<span class="token operator">:</span><span class="token string">'俄罗斯方块'</span><span class="token punctuation">,</span>
  	<span class="token function-variable function">up</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  	<span class="token function-variable function">down</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//声明一个对象</span>
<span class="token keyword">let</span> methods <span class="token operator">=</span> <span class="token punctuation">{</span>
    up<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    down<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
game<span class="token punctuation">[</span>methods<span class="token punctuation">.</span>up<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我可以改变形状&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
game<span class="token punctuation">[</span>methods<span class="token punctuation">.</span>down<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我可以快速下降!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><font color="orange">应用场景：适合唯一性场景。</font></p> <h4 id="_10-2-symbol-内置值"><a href="#_10-2-symbol-内置值" class="header-anchor">#</a> 10.2 Symbol 内置值</h4> <p>除了定义自己使用的 Symbol 值以外，ES6 还提供了11个内置的Symbol值，指向语言内部使用的方法。可以称这些方法为<strong>魔术方法</strong>，因为它们会在特定的场景下自动执行。</p> <table><thead><tr><th>属性名</th> <th>描述</th></tr></thead> <tbody><tr><td>Symbol.hasInstance</td> <td>当其他对象使用 instanceof 运算符，判断是否为该对象的实例时，会调用这个方法。</td></tr> <tr><td>Symbol.isConcatSpreadable</td> <td>对象的 Symbol.isConcatSpreadable 属性是一个布尔值，表示该对象用于 Array.prototype.concat() 时，是否可以展开。</td></tr> <tr><td>Symbol.species</td> <td>创建衍生对象时，会使用该属性。</td></tr> <tr><td>Symbol.match</td> <td>当执行 str.match(myObject) 时，如果该属性存在，会 调用它，返回该方法的返回值。</td></tr> <tr><td>Symbol.replace</td> <td>当该对象被 str.replace(myObject) 方法调用时，会返回该方法的返回值。</td></tr> <tr><td>Symbol.search</td> <td>当该对象被 str. search (myObject)方法调用时，会返回该方法的返回值</td></tr> <tr><td>Symbol.split</td> <td>当该对象被 str. split (myObject)方法调用时，会返回该 方法的返回值。</td></tr> <tr><td>Symbol.iterator</td> <td>对象进行 for...of 循环时，会调用 Symbol.iterator 方法， 返回该对象的默认遍历器。</td></tr> <tr><td>Symbol.toPrimitive</td> <td>该对象被转为原始类型的值时，会调用这个方法，返 回该对象对应的原始类型值。</td></tr> <tr><td>Symbol. toStringTag</td> <td>在该对象上面调用 toString 方法时，返回该方法的返回值。</td></tr> <tr><td>Symbol. unscopables</td> <td>该对象指定了使用 with 关键字时，哪些属性会被 with 环境排除。</td></tr></tbody></table> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//演示 Symbol.hasInstance</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
  	<span class="token keyword">static</span> <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>hasInstance<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我被用来检测类型了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{}, &quot;我被用来检测类型了&quot;</span>

<span class="token comment">//演示 Symbol.isConcatSpreadable</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[1,2,3,4,5,6]</span>
arr2<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>isConcatSpreadable<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//设置为不展开</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1,2,3,Array(3)]</span>
</code></pre></div><h3 id="_11-迭代器"><a href="#_11-迭代器" class="header-anchor">#</a> 11. 迭代器</h3> <p>遍历器（Iterator）就是一种机制。它是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署 Iterator 接口，就可以完成遍历操作。</p> <p>ES6 创造了一种新的遍历命令 <strong>for...of</strong> 循环，Iterator 接口主要供 for...of 消费。</p> <p>原生具备 iterator 接口的数据（可用 for of 遍历）：</p> <ul><li>Array</li> <li>Arguments</li> <li>Set</li> <li>Map</li> <li>String</li> <li>TypedArray</li> <li>NodeList</li></ul> <p>工作原理：</p> <ol><li>创建一个指针对象，指向当前数据结构的起始位置</li> <li>第一次调用对象的 next 方法，指针自动指向数据结构的第一个成员</li> <li>接下来不断调用 next 方法，指针一直往后移动，直到指向最后一个成员</li> <li>每调用 next 方法返回一个包含 value 和 done 属性的对象</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// for of 使用</span>
<span class="token keyword">const</span> xiyou <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'唐僧'</span><span class="token punctuation">,</span> <span class="token string">'孙悟空'</span><span class="token punctuation">,</span> <span class="token string">'猪八戒'</span><span class="token punctuation">,</span> <span class="token string">' 沙僧'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> xiyou<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> iterator <span class="token operator">=</span> xiyou<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 自定义遍历规则</span>
<span class="token keyword">const</span> banji <span class="token operator">=</span> <span class="token punctuation">{</span>
  	name<span class="token operator">:</span> <span class="token string">&quot;终极一班&quot;</span><span class="token punctuation">,</span>
  	stus<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token string">'xiaoming'</span><span class="token punctuation">,</span>
      <span class="token string">'xiaoming'</span><span class="token punctuation">,</span>
      <span class="token string">'xiaotian'</span><span class="token punctuation">,</span>
      <span class="token string">'knight'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      	<span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      	<span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> _this<span class="token punctuation">.</span>stus<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">const</span> result <span class="token operator">=</span>  <span class="token punctuation">{</span>value<span class="token operator">:</span> _this<span class="token punctuation">.</span>stus<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                	index <span class="token operator">++</span><span class="token punctuation">;</span>
                  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 遍历这个数组</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> banji<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_12-生成器"><a href="#_12-生成器" class="header-anchor">#</a> 12. 生成器</h3> <blockquote><p>生成器函数是 ES6 提供的一种 <strong>异步</strong> 编程解决方案，语法行为与传统函数完全不同。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">gen</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//第一段代码</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">111</span><span class="token punctuation">;</span>
    <span class="token comment">//第二段代码</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token number">222</span><span class="token punctuation">;</span>
    <span class="token comment">//第三段代码</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token number">333</span><span class="token punctuation">;</span>
    <span class="token comment">//第四段代码</span>
<span class="token punctuation">}</span>

<span class="token comment">// 获取迭代器对象</span>
<span class="token keyword">let</span> iteration <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token string">'AAA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iteration<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  			<span class="token comment">//AAA 111 false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iteration<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'BBB'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 	<span class="token comment">//BBB 222 false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iteration<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 			<span class="token comment">//BBB 333 false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iteration<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 			<span class="token comment">// true</span>
</code></pre></div><ol><li>* 的位置没有限制</li> <li>生成器函数返回的结果是迭代器对象，调用迭代器对象的 next 方法可以得到 yield 语句后的值</li> <li>yield 相当于函数的暂停标记，也可以认为是函数的分隔符，每调用一次 next 方法，执行一段代码</li> <li>next 方法可以传递实参，作为 yield 语句的返回值</li></ol> <h3 id="_13-promise"><a href="#_13-promise" class="header-anchor">#</a> 13. Promise</h3> <p>Promise 是 ES6 引入的<strong>异步编程</strong>的新解决方案。语法上 Promise 是一个构造函数， 用来封装异步操作并可以获取其成功或失败的结果。</p> <ol><li>Promise 构造函数: Promise (excutor) {}</li> <li>Promise.prototype.then 方法</li> <li>Promise.prototype.catch 方法</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Promise 对象状态</span>
<span class="token comment">// 1. 初始化</span>
<span class="token comment">// 2. 成功</span>
<span class="token comment">// 3. 失败</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//获取数据</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">'数据库中的数据'</span><span class="token punctuation">;</span>
        <span class="token comment">// resolve</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Promise 转为成功状态</span>

        <span class="token comment">// let data = '读取数据失败';</span>
        <span class="token comment">// reject</span>
        <span class="token comment">// reject(data); //Promise 转为失败状态</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 调用 Promise 对象的 then 方法</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//成功</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resaon</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//失败</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resaon<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_13-1-promise-封装读取文件"><a href="#_13-1-promise-封装读取文件" class="header-anchor">#</a> 13.1 Promise 封装读取文件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//引入 fs 模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//使用 Promise 封装</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;Set.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果失败</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//如果成功</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//成功</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//失败</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_13-2-promise-封装-ajax-请求"><a href="#_13-2-promise-封装-ajax-请求" class="header-anchor">#</a> 13.2 Promise 封装 Ajax 请求</h4> <ul><li><p>传统用法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//接口地址：https://api.apiopen.top/getJoke</span>
<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&quot;https://api.apiopen.top/getJoke&quot;</span>

<span class="token comment">// 1. 创建对象</span>
<span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 初始化</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 发送请求</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4. 绑定事件，处理响应结果</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//判断状态</span>
<span class="token comment">//等于4说明已经进入最后一个状态了，即所有的响应都已经到达了。</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判断响应状态码 2xx 成功</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//成功</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">//如果失败</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Promise 封装</p> <p>将结果处理抽离出来，避免回调地狱。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//接口地址：https://api.apiopen.top/getJoke</span>
    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">&quot;https://api.apiopen.top/getJoke&quot;</span>

    <span class="token comment">// 1. 创建对象</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. 初始化</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 发送请求</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. 绑定事件，处理响应结果</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//判断状态</span>
        <span class="token comment">//等于4说明已经进入最后一个状态了，即所有的响应都已经到达了。</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//判断响应状态码 2xx 成功</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//成功</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">//如果失败</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//成功</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//失败</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h4 id="_13-3-promise-prototype-then"><a href="#_13-3-promise-prototype-then" class="header-anchor">#</a> 13.3 Promise.prototype.then</h4> <p>then 方法的返回结果也是一个 Promise 对象（所以 then 方法可以链式调用），这个对象的状态由回调函数的执行结果来决定</p> <ol><li>回调函数中返回的结果是非 Promise 类型数据，那么状态为成功，返回值为对象的成功的值</li> <li>回调函数中返回的结果是一个 Promise 类型数据，那么状态由结果中的 Promise 状态来决定</li> <li>抛出错误，那么状态为失败，错误的值为抛出来的值</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'用户数据'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//1. 非 Promise 类型数据</span>
    <span class="token comment">// return 123;</span>
    <span class="token comment">//2. 返回一个 Promise 对象</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token comment">//返回 Promise 对象的状态就决定了 result 的状态</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// then 方法的返回结果也是一个 Promise 对象</span>
<span class="token comment">// 这个对象的状态由回调函数的执行结果来决定</span>
<span class="token comment">// 1. 回调函数中返回的结果是非 Promise 类型数据，那么状态为成功，返回值为对象的成功的值</span>
<span class="token comment">// 2. 回调函数中返回的结果是一个 Promise 类型数据，那么状态由结果中的 Promise 状态来决定</span>
<span class="token comment">// 3. 抛出错误，那么状态为失败，错误的值为抛出来的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取多个文件，然后一起输出：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> js <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取第一个，传到第二个</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    js<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;let.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 读取第二个，合并第一个，传到第三个</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        js<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;consts.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span>value<span class="token punctuation">,</span> data<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//读取第三个，合并第三个，传到输出</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        js<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;Promise.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//输出</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;\r\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_13-3-promise-prototype-catch"><a href="#_13-3-promise-prototype-catch" class="header-anchor">#</a> 13.3 Promise.prototype.catch</h4> <ul><li>处理 Promise 中的异常状态。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'出错啦！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

p<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_14-set"><a href="#_14-set" class="header-anchor">#</a> 14. Set</h3> <p>ES6 提供了新的数据结构 Set（集合）。它类似于数组，但成员的值都是唯一的，集合实现了 iterator 接口，所以可以使用「<strong>扩展运算符</strong>」和「<strong>for...of...</strong>」进行遍历，集合的属性和方法：</p> <ol><li>size：返回 Set 的元素个数</li> <li>add：增加一个元素，重复则不增加</li> <li>delete：删除一个元素</li> <li>has：检测是否包含某个元素</li> <li>clear：清空集合</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//创建一个非空集合</span>
<span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//集合属性与方法</span>
<span class="token comment">//返回集合的元素个数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//添加新元素</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//删除元素</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//检测是否存在某个值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//清空集合</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_15-map"><a href="#_15-map" class="header-anchor">#</a> 15. Map</h3> <p>ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合。但是“键” 的范围不限于字符串，各种类型的值（包括对象）都可以当作键。Map 也实现了 iterator 接口，所以可以使用「<strong>扩展运算符</strong>」和「<strong>for...of...</strong>」进行遍历。</p> <p>Map 的属性和方法:</p> <ol><li>size：返回 Map 的元素个数</li> <li>set： 增加一个新元素或修改原有元素的值</li> <li>get：返回当前 Map 返回键名对象的键值</li> <li>has：检测 Map 中是否包含某个元素，返回 boolean 值</li> <li>clear： 清空集合，返回 undefined</li></ol> <h3 id="_16-class-类"><a href="#_16-class-类" class="header-anchor">#</a> 16. class 类</h3> <p>ES6 提供了更接近传统语言的写法，引入了 class（类）这个概念，作为对象的模板。通过 class 关键字，可以定义类。</p> <p>基本上，ES6 的 class 可以看作只是 一个语法糖，它的绝大部分功能，ES5 都可以做到，新的 class 写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。</p> <p>语法：</p> <ol><li>class 声明类</li> <li>constructor 定义构造函数初始化</li> <li>extends 继承父类</li> <li>super 调用父级构造方法</li> <li>static 定义静态方法和属性</li> <li>父类方法可以重写</li></ol> <h4 id="_16-1-构造函数"><a href="#_16-1-构造函数" class="header-anchor">#</a> 16.1 构造函数</h4> <ul><li><p>ES5 写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//ES5 写法</span>

<span class="token comment">//构造函数，本身也是一个对象</span>
<span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//添加方法</span>
<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我可以打电话！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//实例化对象</span>
<span class="token keyword">let</span> iPhone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">iPhone</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iPhone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ES6 写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 写法</span>
<span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token comment">//构造方法：名字固定，new 的时候自动执行</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 普通方法：方法必须使用该语法，不能使用 ES5 的对象完整形式</span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是 call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是 method...&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//call:function(){</span>
    <span class="token comment">//     不支持</span>
    <span class="token comment">//}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> iPhone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">iPhone</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iPhone<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iPhone<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_16-2-静态成员"><a href="#_16-2-静态成员" class="header-anchor">#</a> 16.2 静态成员</h4> <ul><li><p>ES5</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 下面属性和方法是加在 Phone 对象上的，实例化的时候是拿不到的 =&gt; 静态成员</span>
Phone<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'手机'</span><span class="token punctuation">;</span>
Phone<span class="token punctuation">.</span><span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我可以改变世界&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 下面属性和方法是加在 Phone 实例对象上的，实例化的时候是可以拿到的</span>
<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'手机'</span><span class="token punctuation">;</span>
<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我可以改变世界&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ES6</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
  	<span class="token comment">//属于类，不属于实例对象</span>
  	<span class="token keyword">static</span> name <span class="token operator">=</span> <span class="token string">'Hedon'</span><span class="token punctuation">;</span>
		<span class="token keyword">static</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我可以改变世界'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h4 id="_16-3-继承"><a href="#_16-3-继承" class="header-anchor">#</a> 16.3 继承</h4> <ul><li><p>ES5 写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//手机</span>
<span class="token keyword">function</span> <span class="token function">Phone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Phone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我可以打电话'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//智能手机</span>
<span class="token keyword">function</span> <span class="token function">SmartPhone</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price<span class="token punctuation">,</span> color<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token function">Phone</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>bran<span class="token punctuation">,</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//设置子级构造函数的原型</span>
<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">;</span>
<span class="token comment">//校正（optional）</span>
<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SmartPhone

<span class="token comment">//声明子类方法</span>
<span class="token class-name">SmartPhone</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">photo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我可以拍照'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ES6 写法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 写法</span>
<span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token comment">//构造方法：名字固定，new 的时候自动执行</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 普通方法：方法必须使用该语法，不能使用 ES5 的对象完整形式</span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是 call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这是 method...&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">SmartPhone</span> <span class="token keyword">extends</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">brand<span class="token punctuation">,</span> price<span class="token punctuation">,</span> color<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>brand<span class="token punctuation">,</span> price<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//子类自己的方法</span>
    <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是子类&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//可以重写父类的方法</span>
    <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;我是子类，我为自己打call&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartPhone</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;Yellow&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sp</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sp<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sp<span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="_16-4-get-和-set"><a href="#_16-4-get-和-set" class="header-anchor">#</a> 16.4 get 和 set</h4> <ul><li><p>ES6</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">Price</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;价格属性被读取了...&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token string">&quot;iloveu&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Price<span class="token punctuation">)</span>  <span class="token comment">// 价格属性被读取了...    iloveu</span>
</code></pre></div></li></ul> <h3 id="_17-数值扩展-number"><a href="#_17-数值扩展-number" class="header-anchor">#</a> 17. 数值扩展 Number</h3> <h4 id="_17-1-number-epsilon-是-javascript-表示的最小精度"><a href="#_17-1-number-epsilon-是-javascript-表示的最小精度" class="header-anchor">#</a> 17.1 Number.EPSILON 是 JavaScript 表示的最小精度</h4> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//false</span>
<span class="token keyword">function</span> <span class="token function">equal</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_17-2-二进制和八进制"><a href="#_17-2-二进制和八进制" class="header-anchor">#</a> 17.2 二进制和八进制</h4> <p>ES6 提供了二进制和八进制数值的新的写法，分别用前缀 0b 和 0o 表示。</p> <h4 id="_17-3-number-isfinite-与-number-isnan"><a href="#_17-3-number-isfinite-与-number-isnan" class="header-anchor">#</a> 17.3 Number.isFinite() 与 Number.isNaN()</h4> <p>Number.isFinite() 用来检查一个数值是否为有限的。</p> <p>Number.isNaN() 用来检查一个值是否为 NaN。</p> <h4 id="_17-4-number-parseint-与-number-parsefloat"><a href="#_17-4-number-parseint-与-number-parsefloat" class="header-anchor">#</a> 17.4 <strong>Number.parseInt()</strong> 与 Number.parseFloat()</h4> <p>ES6 将全局方法 parseInt 和 parseFloat，移植到 Number 对象上面，使用不变。</p> <p>即使是数字后面有字符串，它也会自动截取，比如：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;1111哈哈哈哈&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 1111</span>
</code></pre></div><h4 id="_17-5-number-isinteger"><a href="#_17-5-number-isinteger" class="header-anchor">#</a> 17.5 Number.isInteger</h4> <p>Number.isInteger() 用来判断一个数值是否为整数。</p> <h4 id="_17-6-number-sign"><a href="#_17-6-number-sign" class="header-anchor">#</a> 17.6 Number.sign</h4> <p>Number.sign() 用来判断一个数是正数（返回1）、负数（返回-1）还是零（返回0）。</p> <h3 id="_18-对象扩展-object"><a href="#_18-对象扩展-object" class="header-anchor">#</a> 18. 对象扩展 Object</h3> <p>ES6 新增了一些 Object 对象的方法</p> <ol><li>Object.is 比较两个值是否严格相等，与 === 行为基本一致（+0 与 NaN）</li> <li>Object.assign 对象的合并，将源对象的所有可枚举属性，复制到目标对象</li> <li>_<em>proto</em>_、setPrototypeOf、 setPrototypeOf 可以直接设置对象的原型</li></ol> <h3 id="_19-模块化"><a href="#_19-模块化" class="header-anchor">#</a> 19. 模块化</h3> <p>模块化是指将一个大的程序文件，拆分成许多小的文件，然后将小文件组合起来。</p> <p>模块化的优势有以下几点:</p> <ol><li>防止命名冲突</li> <li>代码复用</li> <li>高维护性</li></ol> <p>ES6 之前的模块化规范有:</p> <ol><li>CommonJS =&gt; NodeJS、Browserify</li> <li>AMD =&gt; requireJS</li> <li>CMD =&gt; seaJS</li></ol> <p><strong>ES6 模块化语法：</strong></p> <ul><li>export 命令用于规定模块的对外接口</li> <li>import 命令用于输入其他模块提供的功能</li></ul> <h4 id="_19-1-分别暴露"><a href="#_19-1-分别暴露" class="header-anchor">#</a> 19.1 分别暴露</h4> <p>写一个 export.js：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'hedon'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>写一个 import.html 来引入 export.js：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//引入 export.js 模块，路径必须是双引号</span>
    <span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m1 <span class="token keyword">from</span> <span class="token string">&quot;./export.js&quot;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hedon</span>
    m1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//hello world</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_19-2-统一暴露"><a href="#_19-2-统一暴露" class="header-anchor">#</a> 19.2 统一暴露</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'hedon'</span>
<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> sayHellosay <span class="token punctuation">}</span>
</code></pre></div><h4 id="_19-3-默认暴露"><a href="#_19-3-默认暴露" class="header-anchor">#</a> 19.3 默认暴露</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Hedon'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">call</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;哈哈哈&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m3 <span class="token keyword">from</span> <span class="token string">&quot;./exportDefault.js&quot;</span><span class="token punctuation">;</span>
m3<span class="token punctuation">.</span><span class="token function">default</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_19-4-常用导入"><a href="#_19-4-常用导入" class="header-anchor">#</a> 19.4 常用导入</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> m3 <span class="token keyword">from</span> <span class="token string">&quot;./exportDefault.js&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_19-5-解构赋值导入"><a href="#_19-5-解构赋值导入" class="header-anchor">#</a> 19.5 解构赋值导入</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> say<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./export.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>name <span class="token keyword">as</span> name2 <span class="token punctuation">,</span> say<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./export.js&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//同名可以起别名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_19-6-默认导入"><a href="#_19-6-默认导入" class="header-anchor">#</a> 19.6 默认导入</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token keyword">default</span> <span class="token keyword">as</span> m3<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./exportDefault.js&quot;</span><span class="token punctuation">;</span> <span class="token comment">//必须起别名</span>
</code></pre></div><h4 id="_19-7-简便导入"><a href="#_19-7-简便导入" class="header-anchor">#</a> 19.7 简便导入</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> m3 <span class="token keyword">from</span> <span class="token string">&quot;./exportDefault.js&quot;</span><span class="token punctuation">;</span> <span class="token comment">//只能针对默认暴露</span>
</code></pre></div><h4 id="_19-8-浏览器方式"><a href="#_19-8-浏览器方式" class="header-anchor">#</a> 19.8 浏览器方式</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--
app.js 
//入口文件

//模块引入
import * as m1 from &quot;./m1.js&quot;;
import * as m2 from &quot;./m2.js&quot;;
import * as m3 from &quot;./m3.js&quot;;
--&gt;</span>

<span class="token comment">&lt;!--浏览器文件--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./app.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  	<span class="token comment">//...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_19-9-引入-npm-包"><a href="#_19-9-引入-npm-包" class="header-anchor">#</a> 19.9 引入 NPM 包</h4> <p>先下载 npm 包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i jquery
</code></pre></div><p>引入：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="es7"><a href="#es7" class="header-anchor">#</a> ES7</h2> <h3 id="_1-array-prototype-includes"><a href="#_1-array-prototype-includes" class="header-anchor">#</a> 1. Array.prototype.includes</h3> <p>Includes 方法用来检测数组中是否包含某个元素，返回布尔类型值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mingzhu <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'西游记'</span><span class="token punctuation">,</span> <span class="token string">'红楼梦'</span><span class="token punctuation">,</span> <span class="token string">'三国演义'</span><span class="token punctuation">,</span> <span class="token string">'水浒传'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mingzhu<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'西游记'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mingzhu <span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'金瓶梅'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
</code></pre></div><h3 id="_2-幂运算"><a href="#_2-幂运算" class="header-anchor">#</a> 2. 幂运算</h3> <p>在 ES7 中引入指数运算符「******」，用来实现幂运算，功能与 Math.pow 结果相同。</p> <h2 id="es8"><a href="#es8" class="header-anchor">#</a> ES8</h2> <h3 id="_1-async-和-await"><a href="#_1-async-和-await" class="header-anchor">#</a> 1. async 和 await</h3> <p>async 和 await 两种语法结合可以让异步代码像同步代码一样。</p> <p>async 函数的返回值为 <strong>Promise</strong> 对象，Promise 对象的结果由 async 函数执行的返回值决定：</p> <ol><li>返回非 Promise 类型的对象，结果都是成功的 Promise 对象</li> <li>返回成功的 Promise 对象，结果就是这个成功的 Promise 对象</li> <li>返回失败的 Promise 对象，结果就是这个失败的 Promise 对象</li> <li>抛出异常，结果就是失败的 Promise 对象</li></ol> <p>await 表达式：</p> <ol><li>await 必须写在 async 函数中</li> <li>await 右侧的表达式一般为 <strong>Promise</strong> 对象</li> <li>await 返回的是 Promise 成功的值</li> <li>await 的 Promise 失败了, 就会抛出异常, 需要通过 try...catch 捕获处理</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;成功的值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// reject(&quot;失败的值&quot;);</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//1. await 要放在 async 函数中</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//2. await 右侧的表达式一般为一个 Promise对象</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token comment">//3. await 返回结果的 Promise 对象的值</span>
        <span class="token keyword">let</span> result  <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//4. 如果 Promise 失败，需要用 try..catch.. 来捕获异常</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1-1-async-与-await-结合读取文件"><a href="#_1-1-async-与-await-结合读取文件" class="header-anchor">#</a> 1.1 async 与 await 结合读取文件</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 引入 fs 模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//读取 file1.html 文件</span>
<span class="token keyword">function</span> <span class="token function">readFile1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;es8/file1.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//读取 file2.html 文件</span>
<span class="token keyword">function</span> <span class="token function">readFile2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;es8/file2.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//读取 file3.html 文件</span>
<span class="token keyword">function</span> <span class="token function">readFile3</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;es8/file3.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//声明一个 async 函数</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> file1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> file2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> file3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> file2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> file3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1-2-async-和-await-结合发送-ajax-请求"><a href="#_1-2-async-和-await-结合发送-ajax-请求" class="header-anchor">#</a> 1.2 async 和 await 结合发送 Ajax 请求</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 发送 Ajax 请求，返回结果是 Promise 对象</span>
<span class="token keyword">function</span> <span class="token function">sendAjax</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//1. 创建对象</span>
        <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 初始化</span>
        x<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3. 发送请求</span>
        x<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 绑定事件</span>
        x<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//到4表示所有响应已经回来了</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  	<span class="token function">resolve</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> jokeUrl <span class="token operator">=</span> <span class="token string">&quot;https://api.apiopen.top/getJoke&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sendAjax</span><span class="token punctuation">(</span>jokeUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-object-values-和-object-entries"><a href="#_2-object-values-和-object-entries" class="header-anchor">#</a> 2. Object.values 和 Object.entries</h3> <ol><li>Object.values()方法返回一个给定对象的所有可枚举属性值的数组</li> <li>Object.entries()方法返回一个给定对象自身可遍历属性 [key,value] 的数组</li></ol> <h3 id="_3-object-getownpropertydescriptors"><a href="#_3-object-getownpropertydescriptors" class="header-anchor">#</a> 3. Object.getOwnPropertyDescriptors</h3> <p>该方法返回指定对象所有自身属性的描述对象。</p> <h2 id="es9"><a href="#es9" class="header-anchor">#</a> ES9</h2> <h3 id="_1-rest-spread-属性"><a href="#_1-rest-spread-属性" class="header-anchor">#</a> 1. Rest/Spread 属性</h3> <p>Rest 参数与 spread 扩展运算符在 ES6 中已经引入，不过 ES6 中只针对于数组， 在 ES9 中为对象提供了像数组一样的 rest 参数和扩展运算符。</p> <div class="language-js extra-class"><pre class="language-js"><code> 
<span class="token keyword">function</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token operator">...</span>user<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//127.0.0.1</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3306</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{username: &quot;root&quot;, password: &quot;root&quot;, type: &quot;master&quot;}</span>
<span class="token punctuation">}</span>
<span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> 
    port<span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span> 
    username<span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> 
    password<span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> 
    type<span class="token operator">:</span> <span class="token string">'master'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-正则捕获分组"><a href="#_2-正则捕获分组" class="header-anchor">#</a> 2. 正则捕获分组</h3> <p>ES9 允许命名捕获组使用符号 <strong>?&lt;name&gt;</strong>，这样获取捕获结果可读性更强</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'&lt;a href=&quot;https://hedon954.github.io/noteSite/&quot;&gt;Hedon&lt;/a&gt;'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;a href=&quot;(?&lt;url&gt;.*)&quot;&gt;(?&lt;text&gt;.*)&lt;\/a&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果</span>
<span class="token number">0</span><span class="token operator">:</span> <span class="token string">&quot;&lt;a href=\&quot;https://hedon954.github.io/noteSite/\&quot;&gt;Hedon&lt;/a&gt;&quot;</span>
<span class="token number">1</span><span class="token operator">:</span> <span class="token string">&quot;https://hedon954.github.io/noteSite/&quot;</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token string">&quot;Hedon&quot;</span>
groups<span class="token operator">:</span>
  text<span class="token operator">:</span> <span class="token string">&quot;Hedon&quot;</span>
  url<span class="token operator">:</span> <span class="token string">&quot;https://hedon954.github.io/noteSite/&quot;</span>
index<span class="token operator">:</span> <span class="token number">0</span>
input<span class="token operator">:</span> <span class="token string">&quot;&lt;a href=\&quot;https://hedon954.github.io/noteSite/\&quot;&gt;Hedon&lt;/a&gt;&quot;</span>
</code></pre></div><h3 id="_3-正则反向断言"><a href="#_3-正则反向断言" class="header-anchor">#</a> 3. 正则反向断言</h3> <p>ES9 支持反向断言，通过对匹配结果前面的内容进行判断，对匹配进行筛选。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//声明字符串：它是变换的</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;JS222222你知道哈哈哈哈44444啦啦啦&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//需求：把后面数字提前出来</span>

<span class="token comment">//正向断言（根据后边的内容进行断言）</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+(?=啦)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
  *  0: &quot;44444&quot;
     groups: undefined
     index: 15
     input: &quot;JS222222你知道哈哈哈哈44444啦啦啦&quot;
  */</span>

<span class="token comment">//反向断言（根据前面的内容进行断言）</span>
<span class="token keyword">const</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=哈)\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result2 <span class="token operator">=</span> reg2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
  *  0: &quot;44444&quot;
     groups: undefined
     index: 15
     input: &quot;JS222222你知道哈哈哈哈44444啦啦啦&quot;
  */</span>
</code></pre></div><h3 id="_3-正则表达式-dotall-模式"><a href="#_3-正则表达式-dotall-模式" class="header-anchor">#</a> 3. 正则表达式 dotAll 模式</h3> <p>区别：</p> <ul><li>/./s   有了后面的 s 之后，<strong>.</strong> 将能够匹配任何字符，包括换行符。</li> <li>/./gs  匹配全局</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 需求：提取出电影名称和上映时间，存储到对象当中</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> &lt;ul&gt;
                &lt;li&gt; 
                	&lt;a&gt;肖生克的救赎&lt;/a&gt;
                	&lt;p&gt;上映日期: 1994-09-10&lt;/p&gt; 
                &lt;/li&gt;
                &lt;li&gt; 
                	&lt;a&gt;阿甘正传&lt;/a&gt;
                	&lt;p&gt;上映日期: 1994-07-06&lt;/p&gt; 
                &lt;/li&gt;
            &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 传统写法</span>
<span class="token comment">// 缺点，一当换行越来越多，将疯狂 \s</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;li&gt;\s+&lt;a&gt;(.*?)&lt;\/a&gt;\s+&lt;p&gt;(.*?)&lt;\/p&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// 执行正则</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
  * 0: &quot;&lt;li&gt; \n      &lt;a&gt;肖生克的救赎&lt;/a&gt;\n    &lt;p&gt;上映日期: 1994-09-10&lt;/p&gt;&quot;
  * 1: &quot;肖生克的救赎&quot;
  * 2: &quot;上映日期: 1994-09-10&quot;
  */</span>


<span class="token comment">// 有了 dotAll 之后</span>
<span class="token comment">// 区别：  /./s   有了后面的 s 之后，. 将能够匹配任何字符，包括换行符</span>
<span class="token comment">// 优点，不需要 \s 了</span>
<span class="token comment">//只匹配第一个</span>
reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">s</span></span><span class="token punctuation">;</span>
<span class="token comment">//匹配全部</span>
<span class="token comment">//reg = /&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;/gs;</span>
result <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="es10"><a href="#es10" class="header-anchor">#</a> ES10</h2> <h3 id="_1-object-fromentries"><a href="#_1-object-fromentries" class="header-anchor">#</a> 1. Object.fromEntries</h3> <blockquote><p>用来创建一个对象。但是参数比较特殊，需要传一个二维数组或者一个 Map。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 二维数组</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  	<span class="token punctuation">[</span><span class="token string">'名称'</span><span class="token punctuation">,</span><span class="token string">'hedon'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  	<span class="token punctuation">[</span><span class="token string">'职业'</span><span class="token punctuation">,</span><span class="token string">'程序员'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 名称: &quot;hedon&quot;
 * 职业: &quot;程序员&quot;
 * __proto__: Object
 */</span>

<span class="token comment">// Map</span>
<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'hedon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'job'</span><span class="token punctuation">,</span> <span class="token string">'programmer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * name: &quot;hedon&quot;
 * job: &quot;programmer&quot;
 * __proto__: Object
 */</span>
</code></pre></div><h3 id="_2-trimstart-和-trimend"><a href="#_2-trimstart-和-trimend" class="header-anchor">#</a> 2. trimStart 和 trimEnd</h3> <blockquote><p>用来截掉字符串左侧或右侧的空白字符。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'    iloveu   '</span><span class="token punctuation">;</span>

str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-array-prototype-flat-与-flatmap"><a href="#_3-array-prototype-flat-与-flatmap" class="header-anchor">#</a> 3. Array.prototype.flat 与 flatMap</h3> <blockquote><p>flag：将多维数组降为低维数组，比如三维降二维。</p> <p>flagMap：f对原数组的每个成员执行一个函数，相当于执行 Array.prototype.map()，然后对返回值组成的数组执行 flat() 方法。该方法返回一个新数组，不改变原数组。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 降数组维度</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1表示降1层（默认值），2表示降2层</span>

<span class="token comment">// flatMap</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res <span class="token operator">=</span> arr2<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  	<span class="token keyword">return</span> item <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[10, 20, 30, 40, 50]</span>
</code></pre></div><h3 id="_4-symbol-prototype-description"><a href="#_4-symbol-prototype-description" class="header-anchor">#</a> 4. Symbol.prototype.description</h3> <blockquote><p>用来获取 Symbol 的字符串描述。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'hedon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="es11"><a href="#es11" class="header-anchor">#</a> ES11</h2> <h3 id="_1-私有属性"><a href="#_1-私有属性" class="header-anchor">#</a> 1. 私有属性</h3> <blockquote><p>class 中属性前面加上 # 就可以声明为私有属性。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>        <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
            <span class="token comment">//公有属性</span>
            name<span class="token punctuation">;</span>

            <span class="token comment">//私有属性</span>
            #age<span class="token punctuation">;</span>
            #weight<span class="token punctuation">;</span>

            <span class="token comment">//构造方法</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>#age <span class="token operator">=</span> age<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>#weight <span class="token operator">=</span> weight<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 实例化</span>
        <span class="token keyword">const</span> girl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'45kg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>girl<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>girl<span class="token punctuation">.</span>#age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Uncaught SyntaxError: Private field '#age' must be declared in an enclosing class</span>
</code></pre></div><h3 id="_2-promise-allsettled"><a href="#_2-promise-allsettled" class="header-anchor">#</a> 2. Promise.allSettled</h3> <blockquote><p>接收一个 Promise 数组，返回一个成功 Promise 对象，这个对象是对收到的这个 Promise 数组的结果的集合。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//创建两个 Promise 对象</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'第一个 Promise对象，成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'第二个 Promise 对象，失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//合并</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>与 Promise.all([p1, p2]) 的区别：
<ul><li>all() 只要遇到 reject 就会停止，而 allSettled() 会执行全部的 Promise</li> <li>all() 返回的是成功的 Promise 的结果的数组</li> <li>allSettled() 返回的是每个 Promise 成功与否及其结果（将其组成对象）的一个数组</li></ul></li></ul> <h3 id="_3-string-prototype-matchall"><a href="#_3-string-prototype-matchall" class="header-anchor">#</a> 3.  String.prototype.matchAll</h3> <blockquote><p>用来批量得到正则匹配的结果。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 需求：提取出电影名称和上映时间，存储到对象当中</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> &lt;ul&gt;
                &lt;li&gt; 
                  &lt;a&gt;肖生克的救赎&lt;/a&gt;
                  &lt;p&gt;上映日期: 1994-09-10&lt;/p&gt; 
                &lt;/li&gt;
                &lt;li&gt; 
                  &lt;a&gt;阿甘正传&lt;/a&gt;
                  &lt;p&gt;上映日期: 1994-07-06&lt;/p&gt; 
                &lt;/li&gt;
            &lt;/ul&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token comment">// 必须要 gs</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;li&gt;.*?&lt;a&gt;(.*?)&lt;\/a&gt;.*?&lt;p&gt;(.*?)&lt;\/p&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">sg</span></span><span class="token punctuation">;</span>

<span class="token comment">// 返回的是一个 iterator 对象</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 遍历</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> result<span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4-可选链操作符"><a href="#_4-可选链操作符" class="header-anchor">#</a> 4. 可选链操作符</h3> <blockquote><p>对象?：问号用来判断前面的对象是否存在。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取 dbHost</span>
<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//传统方式：判断 config 是否有传，其中一个断了就会报错。</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> config <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>db <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>db<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//可选链操作符</span>
    <span class="token comment">//? 表示判断前面的对象是否有，有才去读取下一个属性，这样没有的话会返回 undefined，不会报错。</span>
    <span class="token keyword">const</span> result2 <span class="token operator">=</span> config<span class="token operator">?.</span>db<span class="token operator">?.</span>host<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    db<span class="token operator">:</span><span class="token punctuation">{</span>
        host<span class="token operator">:</span> <span class="token string">'192.168.0.1'</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token string">'3306'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    cache<span class="token operator">:</span> <span class="token punctuation">{</span>
        host<span class="token operator">:</span> <span class="token string">'192.168.0.2'</span><span class="token punctuation">,</span>
        username<span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-动态-import-导入"><a href="#_5-动态-import-导入" class="header-anchor">#</a> 5. 动态 import 导入</h3> <blockquote><p>实现模块的按需下载和按需加载。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//静态导入</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> mi form <span class="token string">'./module1.js'</span><span class="token punctuation">;</span>

<span class="token comment">//动态导入</span>
<span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token comment">// import() 表示动态导入，返回的值是一个 Promise 对象</span>
  	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./module1.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-bigint-类型"><a href="#_6-bigint-类型" class="header-anchor">#</a> 6. BigInt 类型</h3> <blockquote><p>用来做更大数值的运算。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//在普通数字后面加一个 n</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">512</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bigNum <span class="token operator">=</span> <span class="token number">512n</span><span class="token punctuation">;</span>

<span class="token comment">//将普通整数转为 BigInt</span>
<span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bigN <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-全局对象-globalthis"><a href="#_7-全局对象-globalthis" class="header-anchor">#</a> 7. 全局对象 globalThis</h3> <p>在以前，从不同的 JavaScript 环境中获取全局对象需要不同的语句。在 Web 中，可以通过 <code>window</code>、<code>self</code> 或者 <code>frames</code> 取到全局对象，但是在 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Worker" target="_blank" rel="noopener noreferrer">Web Workers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中，只有 <code>self</code> 可以。在 Node.js 中，它们都无法获取，必须使用 <code>global</code>。</p> <p>在松散模式下，可以在函数中返回 <code>this</code> 来获取全局对象，但是在严格模式和模块环境下，<code>this</code> 会返回 <code>undefined</code>。 You can also use <code>Function('return this')()</code>, but environments that disable <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval" target="_blank" rel="noopener noreferrer"><code>eval()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, like <a href="https://wiki.developer.mozilla.org/en-US/docs/Glossary/CSP" target="_blank" rel="noopener noreferrer">CSP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in browsers, prevent use of <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noopener noreferrer"><code>Function</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in this way.</p> <p><code>globalThis</code> 提供了一个标准的方式来获取不同环境下的全局 <code>this</code> 对象（也就是全局对象自身）。不像 <code>window</code> 或者 <code>self</code> 这些属性，它确保可以在有无窗口的各种环境下正常工作。所以，你可以安心的使用 <code>globalThis</code>，不必担心它的运行环境。为便于记忆，你只需要记住，全局作用域中的 <code>this</code> 就是 <code>globalThis</code>。</p> <ul><li><p>没有 globalThis</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">getGlobal</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> self<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> window<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> global<span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unable to locate global object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> globals <span class="token operator">=</span> <span class="token function">getGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> globals<span class="token punctuation">.</span>setTimeout <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 此环境中没有 setTimeout 方法！</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>与 globalThis</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> globalThis<span class="token punctuation">.</span>setTimeout <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//  此环境中没有 setTimeout 方法！</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/17/2021, 11:33:53 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/noteSite/assets/js/app.6b1cf83d.js" defer></script><script src="/noteSite/assets/js/2.0f8877a4.js" defer></script><script src="/noteSite/assets/js/45.768b1953.js" defer></script>
  </body>
</html>
