(window.webpackJsonp=window.webpackJsonp||[]).push([[235],{646:function(t,a,s){"use strict";s.r(a);var n=s(47),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"shell-脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本"}},[t._v("#")]),t._v(" Shell 脚本")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://hedonspace.oss-cn-beijing.aliyuncs.com/img2/008i3skNly1gref6c4d73j311y0goaba.jpg",alt:"image-20210611164433831"}})]),t._v(" "),s("blockquote",[s("p",[t._v("Shell 脚本就是将完成一个任务的所有的命令按照执行的先后顺序，自上而下的写到一个文本文件中，然后给予执行的权限。")])]),t._v(" "),s("ul",[s("li",[t._v("如何书写一个 shell 脚本")]),t._v(" "),s("li",[t._v("shell 脚本运行")]),t._v(" "),s("li",[t._v("shell 中的特殊符号")]),t._v(" "),s("li",[t._v("管道")]),t._v(" "),s("li",[t._v("重定向")]),t._v(" "),s("li",[t._v("shell 中数学运算")]),t._v(" "),s("li",[t._v("脚本退出")])]),t._v(" "),s("blockquote",[s("p",[t._v("参考：https://www.zutuanxue.com/")])]),t._v(" "),s("h2",{attrs:{id:"_1-shell-规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-shell-规范"}},[t._v("#")]),t._v(" 1. Shell 规范")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1）#!/bin/bash\n//脚本第一行， #！魔法字符，指定脚本代码执行的程序。即它告诉系统这个脚本需要什么解释器来执行，也就是使用哪一种 Shell。\n\n2）#代表注释，#！特例 。\n\n# 3）对脚本的基本信息的描述,大家可以根据实际情况尽可能的写详细一些，方便后续使用者。\n# Name: 脚本名字\n# Desc:描述describe\n# Path:存放路径\n# Usage:用法\n# Update:更新时间\n# Author:作者\n# Release: 分发版本\n\n4）脚本的具体内容\ncommands\n...\n")])])]),s("h2",{attrs:{id:"_2-shell-变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-shell-变量"}},[t._v("#")]),t._v(" 2. Shell 变量")]),t._v(" "),s("h3",{attrs:{id:"_2-1-变量定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-变量定义"}},[t._v("#")]),t._v(" 2.1 变量定义")]),t._v(" "),s("h5",{attrs:{id:"定义一个变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定义一个变量"}},[t._v("#")]),t._v(" 定义一个变量")]),t._v(" "),s("p",[t._v("变量格式："),s("font",{attrs:{color:"pink"}},[t._v("变量名=值")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 变量名命名规则：")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" 命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。\n    "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" 中间不能有空格，可以使用下划线（_）。\n    "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("3.")]),t._v(" 不能使用标点符号。\n    "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("4.")]),t._v(" 不能使用 bash 里的关键字（可用 help 命令查看保留关键字）。\n    "),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("5.")]),t._v(" 建议变量名为大写，和命令区分。\n    \n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 举例")]),t._v('\n\tVAR1=1\n\tage=18\n\tname="名称"\n\tscore=88.8\n注意：字符串要用单引号或双引号引起来\n')])])]),s("h5",{attrs:{id:"取消一个变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#取消一个变量"}},[t._v("#")]),t._v(" 取消一个变量")]),t._v(" "),s("p",[t._v("取消当前环境中的变量，如果是变量设置是保存在文件中，下次重启又会恢复。")]),t._v(" "),s("p",[t._v("可以使用 "),s("code",[t._v("unset 变量名")]),t._v(" 来取消一个变量。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v(" name\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 再次尝试输出变量，发现没有")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),t._v("\n")])])]),s("h5",{attrs:{id:"有类型的变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有类型的变量"}},[t._v("#")]),t._v(" 有类型的变量")]),t._v(" "),s("p",[t._v("-i 将变量看成整数。\n-r 使变量只读 readonly，该变量的值无法改变，并且不能为 unset。\n-x 标记变量通过环境导出 export。\n-a 指定为索引数组（普通数组）。\n-A 指定为关联数组。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# declare -i num='asa'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $num")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# num=100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $num")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# declare -r num")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $num")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# num=200")]),t._v("\n-bash: num: 只读变量\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# declare -x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HISTCONTROL")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ignoredups"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HISTSIZE")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOME")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOSTNAME")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bai_Shuming"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("LANG")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"zh_CN.UTF-8"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("declare")]),t._v(" -x "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("LESSOPEN")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"||/usr/bin/lesspipe.sh %s"')]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-2-变量分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-变量分类"}},[t._v("#")]),t._v(" 2.2 变量分类")]),t._v(" "),s("p",[t._v("系统中的变量根据"),s("strong",[t._v("作用域及生命周期")]),t._v("可以分为四类：本地变量、环境变量、全局变量、内置变量。")]),t._v(" "),s("h5",{attrs:{id:"本地变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地变量"}},[t._v("#")]),t._v(" 本地变量")]),t._v(" "),s("p",[t._v("用户自定义的变量，定义在"),s("strong",[t._v("脚本或者当前终端")]),t._v("中，脚本执行完毕或终端结束变量失效。")]),t._v(" "),s("h5",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[t._v("#")]),t._v(" 环境变量")]),t._v(" "),s("p",[t._v("定义在用户家目录下的 "),s("code",[t._v(".bashrc")]),t._v(" 或 "),s("code",[t._v(".bash_profile")]),t._v(" 文件中，用户私有变量，只能本用户使用。")]),t._v(" "),s("p",[t._v("查看当前用户的环境变量 "),s("code",[t._v("env")])]),t._v(" "),s("p",[t._v("查询当前用户的所有变量（临时变量与环境变量） "),s("code",[t._v("set")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 可以用 export 来将一个本地变量临时设置为环境变量")]),t._v("\n[root@VM-12-10-centos shell]# export A=hello\n[root@VM-12-10-centos shell]# env | grep A\nA=hello\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 设置永久环境变量")]),t._v("\n需要将变量写入 .bash_profile 或者 ~/.bashrc，然后 source 一下。\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 关于 export")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`用户登录时:`")]),t._v("\n1) 用户登录到 Linux 系统后，系统将启动一个用户 shell。在这个 shell 中，可以使用 shell 命令或声明变量，也可以创建并运行 shell 脚本程序。\n\n"),s("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("`运行脚本时:`")]),t._v("\n2) 运行 shell 脚本程序时，系统将创建一个子 shell。此时，系统中将有两个 shell，一个是登录时系统启动的 shell，另一个是系统为运行脚本程序创建的 shell。当一个脚本程序运行完毕，它的脚本 shell 将终止，可以返回到执行该脚本之前的 shell。\n\n从这种意义上来说，用户可以有许多 shell，每个 shell 都是由某个 shell（称为父 shell ）派生的。\n\n在子 shell 中定义的变量只在该子 shell 内有效。如果在一个 shell 脚本程序中定义了一个变量，当该脚本程序运行时，这个定义的变量只是该脚本程序内的一个局部变量，其他的 shell 不能引用它，要使某个变量的值可以在其他 shell 中被改变，可以使用 export 命令对已定义的变量进行输出。 \n\nexport 命令将使系统在创建每一个新的 shell 时定义这个变量的一个拷贝。这个过程称之为变量输出。\n")])])]),s("p",[t._v("父 shell 与子 shell：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://hedonspace.oss-cn-beijing.aliyuncs.com/img2/008i3skNly1gr8l6uzbrgj60to0icdgz02.jpg",alt:"shell父子关系.png"}}),t._v(" "),s("h5",{attrs:{id:"全局变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局变量"}},[t._v("#")]),t._v(" 全局变量")]),t._v(" "),s("p",[t._v("使用 "),s("strong",[t._v("export")]),t._v(" 命令将本地变量输出为当前 shell 中的环境变量。")]),t._v(" "),s("p",[t._v("想要所有用户及 shell 都可以使用，可以在 "),s("code",[t._v("/etc/profile /etc/bashrc")]),t._v(" 下永久定义。")]),t._v(" "),s("h5",{attrs:{id:"内置变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内置变量"}},[t._v("#")]),t._v(" 内置变量")]),t._v(" "),s("p",[t._v("系统变量（内置 bash 中变量）： shell 本身已经固定好了它的名字和作用。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v("：上一条命令执行后返回的状态，当返回状态值为 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" 时表示执行正常，非 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" 值表示执行异常或出错\n 若退出状态值为 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("，表示命令运行成功\n 若退出状态值为 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127")]),t._v("，表示 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" not found\n 若退出状态值为 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("126")]),t._v("，表示找到了该命令但无法执行（权限不够）\n 若退出状态值为 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("，表示没有那个文件或目录\n \n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$$")]),t._v("：当前所在进程的进程号     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$$")]),t._v("   eg：kill -9 "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" $$"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("   退出当前会话\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$!")]),t._v("：后台运行的最后一个进程号  （当前终端）  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gedit &")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("$ 调用最后一条命令历史中的参数\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" 调用最后一条命令历史\n\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$#")]),t._v("：脚本后面接的参数的个数\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*")]),t._v("：脚本后面所有参数，参数当成一个整体输出，每一个变量参数之间以空格隔开\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" 脚本后面所有参数，参数是独立的，也是全部输出\n\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0")]),t._v("：当前执行的进程/程序名  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0")]),t._v("     \n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("~"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$9")]),t._v(" 位置参数变量\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${10}")]),t._v("~"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${n}")]),t._v(" 扩展位置参数变量  第10个位置变量必须用"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("大括号括起来\n \n\n了解"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*")]),t._v("和"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v("的区别：\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*")]),t._v(" :表示将变量看成一个整体\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$@")]),t._v(" :表示变量是独立的\n\n")])])]),s("h3",{attrs:{id:"_2-3-变量取值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-变量取值"}},[t._v("#")]),t._v(" 2.3 变量取值")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("变量内容读出\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $name")]),t._v("\nbaism\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $school")]),t._v("\nayitula\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $age")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo $score")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("88.8")]),t._v("\n")])])]),s("p",[s("font",{attrs:{color:"red"}},[t._v("注意：")])],1),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("变量读取过程中，默认单引号是不解释变量的。比如\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# echo '$name'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),t._v("\n\n如果必须使用单引号还要读取变量的值可以使用 "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("eval")]),t._v(" 命令"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("重新运算求出参数的内容"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# eval  echo '$name'")]),t._v("\nbaism\n")])])]),s("h2",{attrs:{id:"_3-shell-格式化输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-shell-格式化输出"}},[t._v("#")]),t._v(" 3. Shell 格式化输出")]),t._v(" "),s("h3",{attrs:{id:"_3-1-echo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-echo"}},[t._v("#")]),t._v(" 3.1 echo")]),t._v(" "),s("p",[t._v("echo 命令的功能是在显示器上显示一段文字，一般起到一个提示的作用。")]),t._v(" "),s("p",[t._v("功能说明:显示文字。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 语法: ")]),t._v("\necho "),s("span",{pre:!0,attrs:{class:"token url"}},[t._v("["),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("-ne")]),t._v("] ["),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("字符串")]),t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 补充说明:")]),t._v("\n1、echo会将输入的字符串送往标准输出。\n2、输出的字符串间以空白字符隔开,并在最后加上换行号。\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" OPTIONS：")]),t._v("\n-n\t不要在最后自动换行\n-e\t若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出:\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 转义字符")]),t._v("\n\\a\t发出警告声;\n\\b\t删除前一个字符;\n\\t\t插入tab;\n\\n\t换行且光标移至行首;\n\\c\t最后不加上换行符号;\n\\f\t换行但光标仍旧停留在原来的位置;\n\\r\t光标移至行首，但不换行;\n\\v\t与\\f相同;\n\\\t\t插入\\字符;\n\\0nnn\t打印nnn(八进制)所代表的ASCII字符;  备注：数字0  不要理解成字母o\n\\xNN  打印NN(十六进制)所代表的ASCII字符;\n\n-–help\t显示帮助\n-–version显示版本信息\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@VM-12-10-centos shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo -e "\\0123"')]),t._v("\nS\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@VM-12-10-centos shell"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# echo -e "\\x61"')]),t._v("\na\n")])])]),s("h3",{attrs:{id:"_3-2-输出有颜色的字体"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-输出有颜色的字体"}},[t._v("#")]),t._v(" 3.2 输出有颜色的字体")]),t._v(" "),s("p",[t._v("脚本中 echo 显示内容带颜色显示。")]),t._v(" "),s("p",[t._v("echo 显示带颜色，需要使用参数 "),s("code",[t._v("-e")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 格式如下：")]),t._v('\necho -e "\\033[字背景颜色；文字颜色m字符串\\033[0m"\n')])])]),s("p",[t._v("例如： echo -e “\\033[41;36m something here \\033[0m”")]),t._v(" "),s("p",[t._v("其中41的位置代表底色， 36m 的位置是代表字的颜色")]),t._v(" "),s("p",[t._v("1、字背景颜色和文字颜色之间是英文的")]),t._v(" "),s("p",[t._v("2、文字颜色后面有个 m")]),t._v(" "),s("p",[t._v("3、字符串前后可以没有空格，如果有的话，输出也是同样有空格")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("下面是相应的字和背景颜色，可以自己来尝试找出不同颜色搭配\n\n　　例\n　　echo -e “\\033[31m 红色字 \\033[0m”\n　　echo -e “\\033[34m 黄色字 \\033[0m”\n　　echo -e “\\033[41;33m 红底黄字 \\033[0m”\n　　echo -e “\\033[41;37m 红底白字 \\033[0m”\n　　\n字颜色：30—–37\n　　echo -e “\\033[30m 黑色字 \\033[0m”\n　　echo -e “\\033[31m 红色字 \\033[0m”\n　　echo -e “\\033[32m 绿色字 \\033[0m”\n　　echo -e “\\033[33m 黄色字 \\033[0m”\n　　echo -e “\\033[34m 蓝色字 \\033[0m”\n　　echo -e “\\033[35m 紫色字 \\033[0m”\n　　echo -e “\\033[36m 天蓝字 \\033[0m”\n　　echo -e “\\033[37m 白色字 \\033[0m”\n\n　　\n字背景颜色范围：40—–47\n　　echo -e “\\033[40;37m 黑底白字 \\033[0m”\n　　echo -e “\\033[41;37m 红底白字 \\033[0m”\n　　echo -e “\\033[42;37m 绿底白字 \\033[0m”\n　　echo -e “\\033[43;37m 黄底白字 \\033[0m”\n　　echo -e “\\033[44;37m 蓝底白字 \\033[0m”\n　　echo -e “\\033[45;37m 紫底白字 \\033[0m”\n　　echo -e “\\033[46;37m 天蓝底白字 \\033[0m”\n　　echo -e “\\033[47;30m 白底黑字 \\033[0m”\n　　\n最后面控制选项说明\n　　\\033[0m 关闭所有属性\n　　\\033[1m 设置高亮度\n　　\\033[4m 下划线\n　　\\033[5m 闪烁\n　　\\033[7m 反显\n　　\\033[8m 消隐\n\n　　\\033[30m — \\33[37m \n\n设置前景色\n　　\\033[40m — \\33[47m 设置背景色\n　　\n　　\n　　\\033[nA 光标上移n行\n　　\\033[nB 光标下移n行\n　　\\033[nC 光标右移n行\n　　\\033[nD 光标左移n行\n　　\\033[y;xH设置光标位置\n　　\\033[2J 清屏\n　　\\033[K 清除从光标到行尾的内容\n　　\\33[s 保存光标位置\n　　\\033[u 恢复光标位置\n　　\\033[?25l 隐藏光标\n　　\\033[?25h 显示光标\n")])])]),s("h2",{attrs:{id:"_4-shell-交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-shell-交互"}},[t._v("#")]),t._v(" 4. Shell 交互")]),t._v(" "),s("h3",{attrs:{id:"_4-1-read"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-read"}},[t._v("#")]),t._v(" 4.1 read")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 功能")]),t._v("\n默认接受键盘的输入，回车符代表输入结束。\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 应用场景")]),t._v("\n人机交互。\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 命令选项")]),t._v("\n-p 打印信息\n-t 限定时间\n-s 不回显\n-n 输入字符个\n")])])]),s("p",[t._v("案例：写一个系统用户交互登录界面脚本，仿linux文本界面登录。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.zutuanxue.com:8000/static/media/images/2020/9/24/1600910891275.gif",alt:"login.gif"}})]),t._v(" "),s("p",[t._v("步骤：")]),t._v(" "),s("ol",[s("li",[t._v("根据linux文本界面登陆窗口输出信息，打印登陆提示信息")]),t._v(" "),s("li",[t._v("交互输入登陆账号")]),t._v(" "),s("li",[t._v("交互输入登陆密码")])]),t._v(" "),s("p",[t._v("实现：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Author: Hedon")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Release: 1.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Description: imitate the linux login process")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("IP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v(" ens33 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("egrep")]),t._v(" -w "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"inet"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("awk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{print "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v("}'")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1. clear the window")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2. print the prompt info")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CentOS Linux 8 (Core)"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kernel '),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -r"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" on an "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -m"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Web console: https://localhost:9090/ or https://'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$IP")]),t._v(":9090/ "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3. let use input login username")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOSTNAME")]),t._v(' login: "')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" account\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4. let use input login password")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" -s -t30 -p "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Password: "')]),t._v(" pw\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\n")])])]),s("p",[t._v("结果：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://www.zutuanxue.com:8000/static/media/images/2020/9/24/1600912191604.gif",alt:"login2.gif"}})]),t._v(" "),s("h2",{attrs:{id:"_5-shell-运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-shell-运算"}},[t._v("#")]),t._v(" 5. Shell 运算")]),t._v(" "),s("h3",{attrs:{id:"_5-1-赋值运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-赋值运算"}},[t._v("#")]),t._v(" 5.1 赋值运算")]),t._v(" "),s("p",[t._v("赋值运算符 =")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" \ta=10   \n \tname='baism'\n \n 重点：字符串必须用引号引起来\n")])])]),s("h3",{attrs:{id:"_5-2-算法运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-算法运算"}},[t._v("#")]),t._v(" 5.2 算法运算")]),t._v(" "),s("p",[t._v("运算命令：")]),t._v(" "),s("ul",[s("li",[t._v("整形运算\n– expr\n– let\n– $(())\n– bc")]),t._v(" "),s("li",[t._v("浮点运算\n– bc")])]),t._v(" "),s("h5",{attrs:{id:"整型运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#整型运算"}},[t._v("#")]),t._v(" 整型运算")]),t._v(" "),s("p",[s("font",{attrs:{color:"pink"}},[t._v("expr 命令：只能做整数运算，格式比较古板，注意空格。")])],1),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# expr 1 + 1\n2\n[root@zutuanxue ~]# expr 5 - 2\n3\n[root@zutuanxue ~]# expr 5 \\* 2  #注意*出现应该转义，否则认为是通配符\n10\n[root@zutuanxue ~]# expr 5 / 2\n2\n[root@zutuanxue ~]# expr 5 % 2\n1\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("let 命令：只能做整数运算，且运算元素必须是变量，无法直接对整数做运算。")])],1),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# let a=100+3;echo $a\n103\nroot@zutuanxue ~]# let a=100-3;echo $a\n97\n[root@zutuanxue ~]# let a=100/3;echo $a\n33\n[root@zutuanxue ~]# let a=100*3;echo $a\n300\n[root@zutuanxue ~]# let a=100%3;echo $a\n1\n[root@zutuanxue ~]# let a=100**3;echo $a\n1000000\n[root@zutuanxue ~]# a=100\n[root@zutuanxue ~]# let a++;echo $a\n101\n[root@zutuanxue ~]# let a--;echo $a\n100\n[root@zutuanxue ~]# let a-=3;echo $a\n97\n[root@zutuanxue ~]# let a+=5;echo $a\n102\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("双小圆括号运算，在 shell 中 (( )) 也可以用来做数学运算。")])],1),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# echo $(( 100+3))\n103\n[root@zutuanxue ~]# echo $(( 100-3)) \n97\n[root@zutuanxue ~]# echo $(( 100%3))\n1\n[root@zutuanxue ~]# echo $(( 100*3))\n300\n[root@zutuanxue ~]# echo $(( 100/3))\n33\n[root@zutuanxue ~]# echo $(( 100**3))     #开方运算\n1000000\n")])])]),s("h5",{attrs:{id:"浮点运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浮点运算"}},[t._v("#")]),t._v(" 浮点运算")]),t._v(" "),s("p",[t._v("浮点运算是采用的命令组合的方式来实现的 "),s("code",[t._v("echo “scale=N;表达式”|bc")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[root@zutuanxue ~]# echo "scale=2;3+100"|bc\n103\n[root@zutuanxue ~]# echo "scale=2;100-3"|bc\n97\n[root@zutuanxue ~]# echo "scale=2;100/3"|bc\n33.33\n[root@zutuanxue ~]# echo "scale=2;100*3"|bc\n300\n')])])]),s("h3",{attrs:{id:"_5-3-比较运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-比较运算"}},[t._v("#")]),t._v(" 5.3 比较运算")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t运算符解释：\n\n 精确比较\n        -eq         等于 equal\n\n        -gt         大于\n\n        -lt         小于\n\n 模糊比较\n        -ge         大于或等于\n\n        -le         小于或等于\n\n        -ne         不等于\n")])])]),s("p",[s("strong",[t._v("通过 test 命令比较两个整数关系：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -gt 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -ge 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -eq 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -le 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -lt 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 100 -ne 300;echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n\n备注：linux命令test只能比较两个整数的关系，不会返回结果，需要通过"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v("才能看到结果\n\t\t"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v(" 返回 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" 表示正确，非 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" 表示错误。\n")])])]),s("h3",{attrs:{id:"_5-4-字符串比较运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-字符串比较运算"}},[t._v("#")]),t._v(" 5.4 字符串比较运算")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 运算符解释，注意字符串一定别忘了使用引号引起来")]),t._v("\n  ==          等于   \n  !=          不等于\n  -n          检查字符串的长度是否大于 0  \n  -z          检查字符串的长度是否为 0\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 'root' == 'root';echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test 'root' != 'root1';echo $?")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# name=")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# test -n "$name";echo $?')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@zutuanxue ~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# test -z "$name";echo $?')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5-4-逻辑运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-逻辑运算"}},[t._v("#")]),t._v(" 5.4 逻辑运算")]),t._v(" "),s("ul",[s("li",[t._v("逻辑与运算 &&")]),t._v(" "),s("li",[t._v("逻辑或运算 ||")]),t._v(" "),s("li",[t._v("逻辑非运算 ！")])]),t._v(" "),s("h3",{attrs:{id:"_5-5-文件判断"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-文件判断"}},[t._v("#")]),t._v(" 5.5 文件判断")]),t._v(" "),s("p",[t._v("Linux 的设计思路：一切皆文件，对文件系统的操作其实可以狭隘的理解为对文件的操作。")]),t._v(" "),s("p",[t._v("如果希望对文件类型和权限或者两个文件做新旧或者是否同一个文件进行判断，可以用 "),s("code",[t._v("test")]),t._v(" 命令。")]),t._v(" "),s("p",[s("strong",[t._v("test 命令功能：")]),t._v(" 检测文件类型和比较运算")]),t._v(" "),s("p",[s("strong",[t._v("test 命令用法")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttest [命令选项] 表达式\n")])])]),s("p",[s("strong",[t._v("test 命令选项")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("-d  检查文件是否存在且为目录\n-e  检查文件是否存在\n-f  检查文件是否存在且为文件\n-r  检查文件是否存在且可读\n-s  检查文件是否存在且不为空\n-w  检查文件是否存在且可写\n-x  检查文件是否存在且可执行\n-O  检查文件是否存在并且被当前用户拥有\n-G  检查文件是否存在并且默认组为当前用户组\n-nt file1 -nt file2  检查file1是否比file2新\n-ot file1 -ot file2  检查file1是否比file2旧     \n-ef file1 -ef file2  检查file1是否与file2是同一个文件，判定依据的是i节点\n\n以上只列出部分命令选项，详细的可以通过:man test获得。\n")])])]),s("h3",{attrs:{id:"案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[t._v("#")]),t._v(" 案例")]),t._v(" "),s("h5",{attrs:{id:"_1-实现一个简单的四则运算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-实现一个简单的四则运算"}},[t._v("#")]),t._v(" 1. 实现一个简单的四则运算")]),t._v(" "),s("ol",[s("li",[t._v("要求用户传输三个参数，num1 算术运算符 num2")]),t._v(" "),s("li",[t._v("运算输出结果")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Author:Hedon")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Release:v1.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Description:imitate a basic calculator which supports +,-,*,\\ operator.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bc")]),t._v("\n")])])]),s("h5",{attrs:{id:"_2-内存使用率统计-要求打印内存使用率"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-内存使用率统计-要求打印内存使用率"}},[t._v("#")]),t._v(" 2. 内存使用率统计，要求打印内存使用率")]),t._v(" "),s("p",[s("strong",[t._v("案例思考：")])]),t._v(" "),s("p",[t._v("物料1. 内存总量 获得方式是什么 free top /proc/meminfo")]),t._v(" "),s("p",[t._v("物料2. 内存使用量")]),t._v(" "),s("p",[t._v("物料3. 内存使用率公式 使用量/总量*100%")]),t._v(" "),s("p",[s("strong",[t._v("实现步骤：")])]),t._v(" "),s("ol",[s("li",[t._v("获取内存总量")]),t._v(" "),s("li",[t._v("获取内存使用量")]),t._v(" "),s("li",[t._v("运算输出结果")])]),t._v(" "),s("p",[s("strong",[t._v("代码实现：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Author:Hedon")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Release:v1.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Description:内存使用率计算脚本")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#total memoy")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("total_memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mem"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" -s "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" -f2"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#used memory")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("used_memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mem"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" -s "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" -f3"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#calculate")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"内存使用率: '),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scale=2;'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$used_memory")]),t._v("*100/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$total_memory")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bc")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v('%"')]),t._v("\n")])])]),s("h5",{attrs:{id:"_3-模拟一个-linux-文本界面登陆程序-要求账号密码验证成功进入系统-账号密码验证失败退回登陆界面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-模拟一个-linux-文本界面登陆程序-要求账号密码验证成功进入系统-账号密码验证失败退回登陆界面"}},[t._v("#")]),t._v(" 3. 模拟一个 linux 文本界面登陆程序，要求账号密码验证成功进入系统，账号密码验证失败退回登陆界面")]),t._v(" "),s("p",[s("strong",[t._v("案例步骤：")])]),t._v(" "),s("ol",[s("li",[t._v("预设正确账号、密码")]),t._v(" "),s("li",[t._v("输出提示登录信息并实现交互登录")]),t._v(" "),s("li",[t._v("输出密码输入信息并实现交互")]),t._v(" "),s("li",[t._v("判断输入是否正确\n"),s("ol",[s("li",[t._v("正确，进入系统")]),t._v(" "),s("li",[t._v("不正确 继续运行该脚本")])])])]),t._v(" "),s("p",[s("strong",[t._v("实现代码：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Author:Hedon")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Release:v1.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Description:imiatete linux login process.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("default_account")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("default_pw")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("######main")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1、清屏")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2、输出提示信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CentOS Linux 7 (Core)"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kernel '),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -r"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" on an "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -m"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3、交互输入登陆名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -n "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$HOSTNAME")]),t._v(' login: "')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" account\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4、交互输入密码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" -s -t30 -p "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Password: "')]),t._v(" pw\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5、判断用户输入是否正确")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$default_account")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$account")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$default_pw")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pw")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('welcome to root"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用户名或密码错误..."')]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入错误，再次调用本脚本")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),s("h2",{attrs:{id:"_6-shell-数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-shell-数组"}},[t._v("#")]),t._v(" 6. Shell 数组")]),t._v(" "),s("h3",{attrs:{id:"_6-1-数组介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-数组介绍"}},[t._v("#")]),t._v(" 6.1 数组介绍")]),t._v(" "),s("p",[t._v("数组可以让用户一次赋予多个值，需要读取数据时只需通过索引调用就可以方便读出了。")]),t._v(" "),s("ul",[s("li",[t._v("普通数组：只能使用整数作为数组索引(元素的索引)")]),t._v(" "),s("li",[t._v("关联数组：可以使用字符串作为数组索引(元素的索引)")])]),t._v(" "),s("h3",{attrs:{id:"_6-2-数组定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-数组定义"}},[t._v("#")]),t._v(" 6.2 数组定义")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("数组名称=(元素1 元素2 元素3 ...)\n")])])]),s("h3",{attrs:{id:"_6-3-数组赋值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-数组赋值"}},[t._v("#")]),t._v(" 6.3 数组赋值")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("一次赋一个值")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("变量名"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("变量值\narray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v1\narray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v2\narray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v3\n")])])])]),t._v(" "),s("li",[s("p",[t._v("一次性赋多个值")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("array")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("var1 var2 var3 var4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("array1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/passwd"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t\t//将文件中每一行赋值给array1数组\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("array2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" /root"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("array3")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("harry amy jack "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Miss zhang"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("array4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("linux"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"_6-4-数组取值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-数组取值"}},[t._v("#")]),t._v(" 6.4 数组取值")]),t._v(" "),s("p",[s("strong",[t._v("取值方式：")]),t._v(" ${数组名称[索引]}")]),t._v(" "),s("p",[t._v("**索引：**默认情况下索引是指数组中的元素[存的值]在数组中的顺序，从 0 始计数，关联数组除外。比如：")]),t._v(" "),s("p",[t._v("array=(var1 var2 var3 var4)")]),t._v(" "),s("p",[t._v("array 数组中存有 4 个元素，分别是：var1 var2 var3 var4")]),t._v(" "),s("p",[t._v("那么我想取出 var2 这个元素，那么就得先看看他在数组中的位置，数组中的元素索引如下:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\t\t元素\tvar1 var2 var3 var4\n\t\t索引\t0     1     2    3\n")])])]),s("p",[t._v("所以正确表示 array 数组中元素 var2 的方式是：${array[1]}")]),t._v(" "),s("h3",{attrs:{id:"_6-5-关联数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-关联数组"}},[t._v("#")]),t._v(" 6.5 关联数组")]),t._v(" "),s("p",[s("strong",[t._v("定义关联数组")])]),t._v(" "),s("p",[t._v("关联数组使用首先需要申明该数组为关联数组，申明方式： "),s("code",[t._v("declare -A 数组名称")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 首先声明关联数组")]),t._v("\ndeclare -A asso_array1\ndeclare -A asso_array2\ndeclare -A asso_array3\n")])])]),s("p",[s("strong",[t._v("关联数组赋值")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("一次赋一个值")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("数组名[索引]=变量值\n[root@zutuanxue ~]# asso_array1[linux]=one\n[root@zutuanxue ~]# asso_array1[java]=two\n[root@zutuanxue ~]# asso_array1[php]=three\n")])])])]),t._v(" "),s("li",[s("p",[t._v("一次附多个值")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[root@zutuanxue ~]# asso_array2=([name1]=harry [name2]=jack [name3]=amy [name4]="Miss zhang")\n')])])])])]),t._v(" "),s("p",[s("strong",[t._v("查看关联数组")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[root@zutuanxue ~]# declare -A\ndeclare -A asso_array1=\'([php]="three" [java]="two" [linux]="one" )\'\ndeclare -A asso_array2=\'([name3]="amy" [name2]="jack" [name1]="harry" [name4]="Miss zhang" )\'\n')])])]),s("p",[s("strong",[t._v("关联数组取值")])]),t._v(" "),s("ul",[s("li",[t._v("!：拿 key")]),t._v(" "),s("li",[t._v("#：统计个数")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("]# echo ${asso_array1[linux]}\none\n[root@zutuanxue ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# echo ${asso_array1[php]}\nthree\n[root@zutuanxue ~]# echo ${asso_array1[*]}\nthree two one\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 加 ！表示取出 key")]),t._v("\n[root@zutuanxue ~]# echo ${!asso_array1[*]}\nphp java linux\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 加 # 表示取出个数")]),t._v("\n[root@zutuanxue ~]# echo ${#asso_array1[*]}\n3\n\n[root@zutuanxue ~]# echo ${#asso_array2[*]}\n4\n\n[root@zutuanxue ~]# echo ${!asso_array2[*]}\nname3 name2 name1 name4\n")])])]),s("h2",{attrs:{id:"_7-shell-函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-shell-函数"}},[t._v("#")]),t._v(" 7. Shell 函数")]),t._v(" "),s("h3",{attrs:{id:"_7-1-函数定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-函数定义"}},[t._v("#")]),t._v(" 7.1 函数定义")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 语法一:")]),t._v("\n\n函数名 () {\n    代码块\n    return N\n}\n\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 语法二：")]),t._v("\nfunction 函数名 {\n      代码块\n      return N\n}\n      \n"),s("span",{pre:!0,attrs:{class:"token code keyword"}},[t._v("      ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 函数中 return 说明：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("1.")]),t._v(" return 可以结束一个函数，类似于循环控制语句的 break (结束当前循环，执行循环体后面的代码)。\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("2.")]),t._v(" return 默认返回函数中最后一个命令的退出状态，也可以给定参数值，该参数值的范围是 0-256 之间。\n"),s("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("3.")]),t._v(" 如果没有 return 命令，函数将返回最后一个 Shell 的退出值。\n")])])]),s("h3",{attrs:{id:"_7-2-函数调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-函数调用"}},[t._v("#")]),t._v(" 7.2 函数调用")]),t._v(" "),s("p",[s("strong",[t._v("当前命令调用")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[root@zutuanxue shell04]# cat fun1.sh \n#!/bin/bash\nhello(){\necho "hello zutuanxue $1"\nhostname\n}\nmenu(){\ncat <<-EOF\n1. mysql\n2. web\n3. app\n4. exit\nEOF\n}\n\n[root@zutuanxue shell04]# source fun1.sh \n[root@zutuanxue shell04]# . fun1.sh \n\n[root@zutuanxue shell04]# hello 888\nhello zutuanxue 888\nMissHou.zutuanxue.cc\n[root@zutuanxue shell04]# menu\n1. mysql\n2. web\n3. app\n4. exit\n')])])]),s("p",[s("strong",[t._v("定义到用户的环境变量中调用")])]),t._v(" "),s("ul",[s("li",[t._v("就是直接把函数写到 /etc/profile\t/etc/bashrc\t~/.bash_profile\t~/.bashrc 等文件当中。")])]),t._v(" "),s("p",[s("strong",[t._v("脚本中调用")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#打印菜单")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ./fun1.sh\n"),s("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("menu")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<-")]),t._v("END\n\th\t显示命令帮助\n\tf\t显示磁盘分区\n\td\t显示磁盘挂载\n\tm\t查看内存使用\n\tu\t查看系统负载\n\tq\t退出程序\n\tEND\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmenu\t\t//调用函数\n")])])]),s("h2",{attrs:{id:"_8-shell-控制流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-shell-控制流程"}},[t._v("#")]),t._v(" 8. Shell 控制流程")]),t._v(" "),s("h3",{attrs:{id:"_8-1-if"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-if"}},[t._v("#")]),t._v(" 8.1 if")]),t._v(" "),s("p",[s("strong",[t._v("基本用法：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开始 if")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" condition1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("          \n            command1    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#满足 condition1 执行 command1代 码块")]),t._v("\n            \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" condition2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   \n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("          \n            commands2    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 满足 condition2 执行 command2 代码块")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("     \n            commandsX      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  如果条件都不满足执行 commandX 代码块")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("    \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# fi 结束")]),t._v("\n")])])]),s("p",[s("strong",[t._v("高级用法：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高级用法 1：条件符号使用双圆括号，可以在条件中植入数学表达式 if (())")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yes"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高级用法 2：使用双方括号,可以在条件中使用通配符")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v("  ab ac rx bx rvv vt\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" r* "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v('"')]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),s("p",[s("strong",[t._v("案例需求：")])]),t._v(" "),s("p",[t._v("判断内存的使用率：")]),t._v(" "),s("ul",[s("li",[t._v("60 以下 ok")]),t._v(" "),s("li",[t._v("60 以上 黄色警告")]),t._v(" "),s("li",[t._v("70 以上 橙色严重警告")]),t._v(" "),s("li",[t._v("80 以上 红色警告")])]),t._v(" "),s("p",[s("strong",[t._v("案例思考：")])]),t._v(" "),s("ul",[s("li",[t._v("内存使用率获得方式\n"),s("ol",[s("li",[t._v("手动给出")]),t._v(" "),s("li",[t._v("通过内存查看命令运算得出")])])])]),t._v(" "),s("p",[s("strong",[t._v("代码实现：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#统计内存使用率")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("total_memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mem"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" -s "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" -f2"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("used_memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mem"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tr")]),t._v(" -s "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cut")]),t._v(" -d "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),t._v(" -f3"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("used_percent")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$used_memory")]),t._v("*100/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$total_memory")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bc")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断使用情况")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$used_percent")]),t._v(" -gt "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v("[31m 警告 "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v('[0m"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$used_percent")]),t._v(" -gt "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("70")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v("[35m 警告 "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v('[0m"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$used_percent")]),t._v(" -gt "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v("[33m 警告 "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v('[0m"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v("[32m OK "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[t._v("\\033")]),t._v('[0m"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),s("h3",{attrs:{id:"_8-2-for"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-for"}},[t._v("#")]),t._v(" 8.2 for")]),t._v(" "),s("p",[s("strong",[t._v("几种赋值方式：")])]),t._v(" "),s("ol",[s("li",[t._v("直接赋值")]),t._v(" "),s("li",[t._v("赋值来自一个范围")]),t._v(" "),s("li",[t._v("赋值来自命令产生的结果")]),t._v(" "),s("li",[t._v("不带列表，由用户指定")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"直接赋值"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"列表赋值"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"列表赋值带步长"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" \n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"列表赋值带步长，反向"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("-2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"命令赋值"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seq")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" -2 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"不带列表，由用户指定"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" var\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用户输入了'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$#")]),t._v('个参数"')]),t._v("\n")])])]),s("p",[s("strong",[t._v("C 风格的 for：")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v(" expr1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("expr2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("expr3 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\t\t…\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v("  \n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n\nexpr1：定义变量并赋初值   变量初始值\nexpr2：决定是否进行循环（条件）  变量的条件\nexpr3：决定循环变量如何改变,决定循环什么时候退出 自增或自减运算\n")])])]),s("h3",{attrs:{id:"_8-3-while"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-while"}},[t._v("#")]),t._v(" 8.3 while")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" 表达式 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\tcommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\t\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -eq "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("    或者 "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),s("p",[t._v("无限循环：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方法 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\tcommand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\t\n\t\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方法 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),s("h3",{attrs:{id:"_8-4-until"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-until"}},[t._v("#")]),t._v(" 8.4 until")]),t._v(" "),s("p",[t._v("特点："),s("font",{attrs:{color:"pink"}},[t._v("条件为假就进入循环；条件为真就退出循环。")])],1),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("until")]),t._v(" expression  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# [ 1 -eq 1 ] 或者 (( 1 >= 1 ))")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),s("h3",{attrs:{id:"_8-5-case"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-case"}},[t._v("#")]),t._v(" 8.5 case")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义变量, var代表是变量名")]),t._v("\npattern1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 模式1：用 | 分割多个模式，相当于or")]),t._v("\n    command1             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要执行的语句")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 两个分号代表命令结束")]),t._v("\npattern2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    command2\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npattern3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    command3\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t  *"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#default，不满足以上模式，默认执行 *)下面的语句")]),t._v("\n    command4\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("esac")]),t._v("\t\t\t\t\t\t\tesac表示case语句结束\n")])])]),s("h3",{attrs:{id:"_8-6-循环控制语句"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-循环控制语句"}},[t._v("#")]),t._v(" 8.6 循环控制语句")]),t._v(" "),s("p",[s("strong",[t._v("break")]),t._v("：跳出循环")]),t._v(" "),s("p",[s("strong",[t._v("continue")]),t._v("：跳过本次循环，进入下一轮循环")]),t._v(" "),s("p",[s("strong",[t._v("sleep")]),t._v(" 秒数：睡眠")]),t._v(" "),s("p",[s("strong",[t._v("exit")]),t._v("：退出程序")]),t._v(" "),s("p",[s("strong",[t._v("shift")]),t._v("：外部传参到循环时，参数管理命令。使位置参数向左移动，默认移动 1 位，可以使用shift 2。")]),t._v(" "),s("h2",{attrs:{id:"_9-shell-操作文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-shell-操作文件"}},[t._v("#")]),t._v(" 9. Shell 操作文件")]),t._v(" "),s("ul",[s("li",[t._v("sed 命令")])]),t._v(" "),s("h3",{attrs:{id:"_9-1-sed-命令介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-sed-命令介绍"}},[t._v("#")]),t._v(" 9.1 sed 命令介绍")]),t._v(" "),s("p",[t._v("sed 是 Linux 中提供的一个外部命令，它是一个行(流)编辑器，非交互式的对文件内容进行增删改查的操作，使用者只能在命令行输入编辑命令、指定文件名，然后在屏幕上查看输出。它和文本编辑器有本质的区别。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("区别是：\n\n文本编辑器: 编辑对象是文件\n\n行编辑器：编辑对象是文件中的行\n")])])]),s("p",[s("strong",[t._v("sed 数据处理原理：")])]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://hedonspace.oss-cn-beijing.aliyuncs.com/img2/008i3skNly1grd9yfty4ej616g09gn1302.jpg",alt:"image-20210610165824987"}}),t._v(" "),s("h3",{attrs:{id:"_9-2-sed-语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-sed-语法"}},[t._v("#")]),t._v(" 9.2 sed 语法")]),t._v(" "),s("p",[s("strong",[t._v("[命令选项]")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("-e script 将脚本中指定的命令添加到处理输入时执行的命令中  多条件，一行中要有多个操作\n-f script 将文件中指定的命令添加到处理输入时执行的命令中\n-n        抑制自动输出\n-i        编辑文件内容\n-i.bak    修改时同时创建 .bak 备份文件。\n-r        使用扩展的正则表达式\n!         取反 （跟在模式条件后与shell有所区别）\n")])])]),s("p",[s("strong",[t._v("[内部命令]")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("a   在匹配后面添加\ni   在匹配前面添加\nd   删除\ns   查找替换  字符串\nc   更改\ny   转换   N D P \np   打印\n")])])]),s("p",[s("strong",[t._v("[Flag]")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("数字             表示新文本替换的模式\ng：              表示用新文本替换现有文本的全部实例\np：              表示打印原始的内容\nw filename:     将替换的结果写入文件\n")])])]),s("h3",{attrs:{id:"_9-3-内部命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-内部命令"}},[t._v("#")]),t._v(" 9.3 内部命令")]),t._v(" "),s("p",[t._v("示例文档如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# cat data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容「增加」操作，将数据追加到某个位置之后，使用命令 「a」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在data1的每行后追加一行新数据内容: append data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'a\\append data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n2 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n3 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n4 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n5 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在第二行后新开一行追加数据: append data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2a\\append data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在第二到四行每行后新开一行追加数据: append data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2,4a\\append data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n3 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n4 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n5 the quick brown fox jumps over the lazy dog.\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 匹配字符串追加: 找到包含"3 the"的行，在其后新开一行追加内容: append data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'/3 the/a\\append data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\nappend data "haha"\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 注意：//开启匹配模式  /要匹配的字符串/")]),t._v("\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容「增加」操作，将数据插入到某个位置之前，使用命令 「i」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在data1的每行前插入一行新数据内容: insert data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'i\\insert data "haha"\' data1\ninsert data "haha"\n1 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n2 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n3 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n4 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n5 the quick brown fox jumps over the lazy dog.\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在第二行前新开一行插入数据: insert data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2i\\insert data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 在第二到四行每行前新开一行插入数据: insert data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2,4i\\insert data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n2 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n3 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 匹配字符串插入: 找到包含"3 the"的行，在其前新开一行插入内容: insert data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'/3 the/i\\insert data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\ninsert data "haha"\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n')])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容修改操作「替换」，将一行中匹配的内容替换为新的数据，使用命令「s」。")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 从标准输出流中做替换，将test替换为text")]),t._v("\n[root@zutuanxue ~]# echo \"this is a test\" |sed 's/test/text/'\nthis is a text\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将data1中每行的dog替换为cat")]),t._v("\n[root@zutuanxue ~]# sed 's/dog/cat/' data1\n1 the quick brown fox jumps over the lazy cat.\n2 the quick brown fox jumps over the lazy cat.\n3 the quick brown fox jumps over the lazy cat.\n4 the quick brown fox jumps over the lazy cat.\n5 the quick brown fox jumps over the lazy cat.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将data1中第二行的dog替换为cat")]),t._v("\n[root@zutuanxue ~]# sed '2s/dog/cat/' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy cat.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将data1中第二到第四行的dog替换为cat")]),t._v("\n[root@zutuanxue ~]# sed '2,4s/dog/cat/' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy cat.\n3 the quick brown fox jumps over the lazy cat.\n4 the quick brown fox jumps over the lazy cat.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 匹配字符串替换:将包含字符串"3 the"的行中的dog替换为cat')]),t._v("\n[root@zutuanxue ~]# sed '/3 the/s/dog/cat/' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy cat.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容修改操作「更改」,将一行中匹配的内容替换为新的数据，使用命令 「c」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 将data1文件中的所有行的内容更改为: change data "data"')]),t._v('\n[root@zutuanxue ~]# sed \'c\\change data "haha"\' data1\nchange data "haha"\nchange data "haha"\nchange data "haha"\nchange data "haha"\nchange data "haha"\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 将data1文件第二行的内容更改为: change data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2c\\change data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\nchange data "haha"\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 将data1文件中的第二、三、四行的内容更改为：change data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'2,4c\\change data "haha"\' data1\n1 the quick brown fox jumps over the lazy dog.\nchange data "haha"\n5 the quick brown fox jumps over the lazy dog.\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 将data1文件中包含"3 the"的行内容更改为: change data "haha"')]),t._v('\n[root@zutuanxue ~]# sed \'/3 the/c\\change data "data"\' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\nchange data "data"\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n')])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容修改操作「字符转换」，将一行中匹配的内容替换为新的数据，使用命令「y」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将data1中的a b c字符转换为对应的 A  B  C字符")]),t._v("\n[root@zutuanxue ~]# sed 'y/abc/ABC/' data1\n1 the quiCk Brown fox jumps over the lAzy dog.\n2 the quiCk Brown fox jumps over the lAzy dog.\n3 the quiCk Brown fox jumps over the lAzy dog.\n4 the quiCk Brown fox jumps over the lAzy dog.\n5 the quiCk Brown fox jumps over the lAzy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容「删除」，将文件中的指定数据删除，使用命令「d」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 删除文件data1中的所有数据")]),t._v("\n[root@zutuanxue ~]# sed 'd' data1\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 删除文件data1中的第三行数据")]),t._v("\n[root@zutuanxue ~]# sed '3d' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 删除文件data1第三到第四行的数据")]),t._v("\n[root@zutuanxue ~]# sed '3,4d' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 删除文件data1中包含字符串"3 the"的行')]),t._v("\n[root@zutuanxue ~]# sed '/3 the/d' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("文件内容查看，将文件内容输出到屏幕，使用命令「p」:")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印data1文件内容")]),t._v("\n[root@zutuanxue ~]# sed 'p' data1\n1 the quick brown fox jumps over the lazy dog.\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印data1文件第三行的内容")]),t._v("\n[root@zutuanxue ~]# sed '3p' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印data1文件第二、三、四行内容")]),t._v("\n[root@zutuanxue ~]# sed '2,4p' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 打印data1文件包含字符串"3 the"的行')]),t._v("\n[root@zutuanxue ~]# sed '/3 the/p' data1\n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog. \n\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 可以看得出，打印内容是重复的行，原因是打印了指定文件内容一次，又将读入缓存的所有数据打印了一次，所以会看到这样的效果，")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 如果不想看到这样的结果，可以加命令选项「-n」抑制内存输出即可。")]),t._v("\n")])])]),s("h3",{attrs:{id:"_9-4-内部选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-内部选项"}},[t._v("#")]),t._v(" 9.4 内部选项")]),t._v(" "),s("p",[t._v("在 sed 命令中，命令选项是对 sed 中的命令的增强。")]),t._v(" "),s("p",[s("font",{attrs:{color:"pink"}},[t._v("在命令行中使用多个命令 「-e」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将brown替换为green dog替换为cat")]),t._v("\n[root@zutuanxue ~]# sed -e 's/brown/green/;s/dog/cat/' data1\n1 the quick green fox jumps over the lazy cat.\n2 the quick green fox jumps over the lazy cat.\n3 the quick green fox jumps over the lazy cat.\n4 the quick green fox jumps over the lazy cat.\n5 the quick green fox jumps over the lazy cat.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("从文件读取编辑器命令 「-f」 适用于日常重复执行的场景：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 1）将命令写入文件")]),t._v("\n[root@zutuanxue ~]# vim abc\ns/brown/green/\ns/dog/cat/\ns/fox/elephant/\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 2）使用 -f 命令选项调用命令文件")]),t._v("\n[root@zutuanxue ~]# sed -f abc data1 \n1 the quick green elephant jumps over the lazy cat.\n2 the quick green elephant jumps over the lazy cat.\n3 the quick green elephant jumps over the lazy cat.\n4 the quick green elephant jumps over the lazy cat.\n5 the quick green elephant jumps over the lazy cat.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("抑制内存输出 「-n」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印data1文件的第二行到最后一行内容.  $ 是最后的意思")]),t._v("\n[root@zutuanxue ~]# sed -n '2,$p' data1 \n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("使用正则表达式 「-r」：")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(' 打印data1中以字符串"3 the"开头的行内容')]),t._v("\n[root@zutuanxue ~]# sed -n  -r '/^(3 the)/p' data1\n3 the quick brown fox jumps over the lazy dog.\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("永久修改「-i」：")])],1),t._v(" "),s("p",[t._v("从上述的演示中，大家可以看出，数据处理只是在缓存中完成的，并没有实际修改文件内容，如果需要修改文件内容可以直接使用**「-i」** 命令选项。")]),t._v(" "),s("p",[t._v("在这里我需要说明的是 -i 是一个不可逆的操作，一旦修改，如果想复原就很困难，几乎不可能，所以建议大家在操作的时候可以备份一下源文件。")]),t._v(" "),s("p",[t._v("-i 命令选项提供了备份功能，比如参数使用 "),s("strong",[t._v("「-i.bak」")]),t._v("，那么在修改源文件的同时会先备份一个以.bak结尾的源文件，然后再进行修改操作。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 1）查看文件列表，没有发现data1.bak")]),t._v("\n[root@zutuanxue ~]# ls\nabc  apache  data1  Dobby  file  node-v10.14.1  Python-3.7.1  soft1  vimset\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 2）执行替换命令并修改文件")]),t._v("\n[root@zutuanxue ~]# sed -i.bak 's/brown/green/' data1\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 3）发现文件夹中多了一个data1.bak文件")]),t._v("\n[root@zutuanxue ~]# ls\nabc     data1      Dobby  node-v10.14.1  soft1\napache  data1.bak  file   Python-3.7.1   vimset\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 4）打印比较一下，发现data1已经被修改，data1.bak是源文件的备份。")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("]# cat data1\n1 the quick green fox jumps over the lazy dog.\n2 the quick green fox jumps over the lazy dog.\n3 the quick green fox jumps over the lazy dog.\n4 the quick green fox jumps over the lazy dog.\n5 the quick green fox jumps over the lazy dog.\n[root@zutuanxue ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# cat data1.bak \n1 the quick brown fox jumps over the lazy dog.\n2 the quick brown fox jumps over the lazy dog.\n3 the quick brown fox jumps over the lazy dog.\n4 the quick brown fox jumps over the lazy dog.\n5 the quick brown fox jumps over the lazy dog.\n")])])]),s("h3",{attrs:{id:"_9-5-标志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-标志"}},[t._v("#")]),t._v(" 9.5 标志")]),t._v(" "),s("p",[t._v("在sed命令中，标志是对sed中的内部命令做补充说明。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 演示文档")]),t._v("\n[root@zutuanxue ~]# cat data2\n1 the quick brown fox jumps over the lazy dog . dog\n2 the quick brown fox jumps over the lazy dog . dog\n3 the quick brown fox jumps over the lazy dog . dog\n4 the quick brown fox jumps over the lazy dog . dog\n5 the quick brown fox jumps over the lazy dog . dog\n")])])]),s("p",[s("strong",[t._v("数字标志")])]),t._v(" "),s("p",[t._v("此标志是一个非零正数，默认情况下，执行替换的时候，如果一行中有多个符合的字符串，如果没有标志位定义，那么只会替换第一个字符串，其他的就被忽略掉了，为了能精确替换，可以使用数字位做定义。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 替换一行中的第二处dog为cat")]),t._v("\n[root@zutuanxue ~]# sed 's/dog/cat/2' data2\n1 the quick brown fox jumps over the lazy dog . cat\n2 the quick brown fox jumps over the lazy dog . cat\n3 the quick brown fox jumps over the lazy dog . cat\n4 the quick brown fox jumps over the lazy dog . cat\n5 the quick brown fox jumps over the lazy dog . cat\n")])])]),s("h5",{attrs:{id:"g-标志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#g-标志"}},[t._v("#")]),t._v(" g 标志")]),t._v(" "),s("p",[t._v("将一行中的所有符合的字符串全部执行替换。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将data1文件中的所有dog替换为cat")]),t._v("\n[root@zutuanxue ~]# sed 's/dog/cat/g' data2\n1 the quick brown fox jumps over the lazy cat . cat\n2 the quick brown fox jumps over the lazy cat . cat\n3 the quick brown fox jumps over the lazy cat . cat\n4 the quick brown fox jumps over the lazy cat . cat\n5 the quick brown fox jumps over the lazy cat . cat\n")])])]),s("h5",{attrs:{id:"p-标志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#p-标志"}},[t._v("#")]),t._v(" p 标志")]),t._v(" "),s("p",[t._v("打印文本内容，类似于 -p 命令选项。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" [root@zutuanxue ~]# sed  '3s/dog/cat/p' data2")]),t._v("\n1 the quick brown fox jumps over the lazy dog . dog\n2 the quick brown fox jumps over the lazy dog . dog\n3 the quick brown fox jumps over the lazy cat . dog\n3 the quick brown fox jumps over the lazy cat . dog\n4 the quick brown fox jumps over the lazy dog . dog\n5 the quick brown fox jumps over the lazy dog . dog\n")])])]),s("h5",{attrs:{id:"w-filename-标志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#w-filename-标志"}},[t._v("#")]),t._v(" w filename 标志")]),t._v(" "),s("p",[t._v("将修改的内容存入 filename 文件中。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("[root@zutuanxue ~]# sed  '3s/dog/cat/w text' data2\n1 the quick brown fox jumps over the lazy dog . dog\n2 the quick brown fox jumps over the lazy dog . dog\n3 the quick brown fox jumps over the lazy cat . dog\n4 the quick brown fox jumps over the lazy dog . dog\n5 the quick brown fox jumps over the lazy dog . dog\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 可以看出，将修改的第三行内容存在了text文件中")]),t._v("\n[root@zutuanxue ~]# cat text \n3 the quick brown fox jumps over the lazy cat . dog\n")])])]),s("h2",{attrs:{id:"_10-shell-数据处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-shell-数据处理"}},[t._v("#")]),t._v(" 10. Shell 数据处理")]),t._v(" "),s("p",[t._v("基本命令：")]),t._v(" "),s("p",[t._v("1）数据检索:grep tr cut")]),t._v(" "),s("p",[t._v("2）数据处理:uniq sort tee paste xargs")]),t._v(" "),s("p",[t._v("升级版 awk：")]),t._v(" "),s("p",[t._v("1）字符串截取")]),t._v(" "),s("p",[t._v("2） 数据运算")]),t._v(" "),s("h3",{attrs:{id:"_10-1-awk-介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-awk-介绍"}},[t._v("#")]),t._v(" 10.1 awk 介绍")]),t._v(" "),s("p",[t._v("在日常计算机管理中，总会有很多数据输出到屏幕或者文件，这些输出包含了标准输出、标准错误输出。默认情况下，这些信息全部输出到默认输出设备—屏幕。然而，大量的数据输出中，只有一小部分是我们需要重点关注的，我们需要把我们需要的或者关注的这些信息过滤或者提取以备后续需要时调用。早先的学习中，我们学过使用 "),s("code",[t._v("grep")]),t._v(" 来过滤这些数据，使用 "),s("code",[t._v("cut")]),t._v("、"),s("code",[t._v("tr")]),t._v(" 命令提出某些字段，但是他们都不具备提取并处理数据的能力，都必须先过滤，再提取转存到变量，然后在通过变量提取去处理，比如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("内存使用率的统计步骤：\n\n1) 通过 free -m 提取出内存总量，赋值给变量 memory_totle\n\n2）通过 free -m 提取出n内存使用量，赋值给变量 memory_use\n\n3）通过数学运算计算内存使用率\n")])])]),s("p",[s("code",[t._v("awk")]),t._v(" 是一种可以处理数据、产生格式化报表的语言，功能十分强大。")]),t._v(" "),s("p",[s("code",[t._v("awk")]),t._v(" 认为文件中的每一行是一条记录，记录与记录的分隔符为"),s("strong",[t._v("换行符")]),t._v("，每一列是一个字段，字段与字段的分隔符默认是"),s("strong",[t._v("一个或多个空格或 tab 制表符")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"_10-2-awk-语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-awk-语法"}},[t._v("#")]),t._v(" 10.2 awk 语法")]),t._v(" "),s("p",[t._v("awk [options] ‘[BEGIN]{program}[END]’ [FILENAME]")]),t._v(" "),s("h5",{attrs:{id:"常用命令选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令选项"}},[t._v("#")]),t._v(" 常用命令选项")]),t._v(" "),s("p",[t._v("-F fs 指定描绘一行中数据字段的文件分隔符  默认为空格\n-f file 指定读取程序的文件名\n-v var=value 定义awk程序中使用的变量和默认值")]),t._v(" "),s("p",[t._v("注意：awk 程序由"),s("strong",[t._v("左大括号和右大括号")]),t._v("定义。 程序命令必须放置在两个大括号之间。由于 awk 命令行假定程序是单文本字符串，所以必须将程序包括在单引号内。")]),t._v(" "),s("p",[t._v("1）程序必须放在大括号内\n2）程序必须要用单引号引起来")]),t._v(" "),s("h5",{attrs:{id:"awk-程序运行优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-程序运行优先级"}},[t._v("#")]),t._v(" awk 程序运行优先级")]),t._v(" "),s("p",[t._v("1）BEGIN：在开始处理数据流之前执行，可选项\n2）program：如何处理数据流，必选项\n3）END：处理完数据流后执行，可选项")]),t._v(" "),s("h3",{attrs:{id:"_10-3-awk-基本应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-awk-基本应用"}},[t._v("#")]),t._v(" 10.3 awk 基本应用")]),t._v(" "),s("p",[t._v("学习用例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# cat test \n1 the quick brown fox jumps over the lazy cat . dog\n2 the quick brown fox jumps over the lazy cat . dog\n3 the quick brown fox         jumps over the lazy cat . dog\n4 the quick brown fox jumps over the lazy cat . dog\n5 the quick brown fox jumps over the lazy cat . dog\n")])])]),s("h5",{attrs:{id:"awk-对字段-列-的提取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-对字段-列-的提取"}},[t._v("#")]),t._v(" awk 对字段（列）的提取")]),t._v(" "),s("p",[t._v("字段提取：提取一个文本中的一列数据并打印输出。")]),t._v(" "),s("p",[t._v("字段相关内置变量：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$0 表示整行文本\n$1 表示文本行中的第一个数据字段\n$2 表示文本行中的第二个数据字段\n$N 表示文本行中的第N个数据字段\n$NF 表示文本行中的最后一个数据字段\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 读入test每行数据并把每行数据打印出来")]),t._v("\n[root@zutuanxue ~]# awk '{print $0}' test \n1 the quick brown fox jumps over the lazy cat . dog\n2 the quick brown fox jumps over the lazy cat . dog\n3 the quick brown fox         jumps over the lazy cat . dog\n4 the quick brown fox jumps over the lazy cat . dog\n5 the quick brown fox jumps over the lazy cat . dog\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印test第六个字段")]),t._v("\n[root@zutuanxue ~]# awk '{print $6}' test\njumps\njumps\njumps\njumps\njumps\n\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印test最后一个字段")]),t._v("\n[root@zutuanxue ~]# awk '{print $NF}' test\ndog\ndog\ndog\ndog\ndog\n")])])]),s("h5",{attrs:{id:"awk-对记录-行-的提示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-对记录-行-的提示"}},[t._v("#")]),t._v(" awk 对记录（行）的提示")]),t._v(" "),s("p",[t._v("记录提取：提取一个文本中的一行并打印输出。")]),t._v(" "),s("p",[t._v("记录的提取方法有两种：")]),t._v(" "),s("ul",[s("li",[t._v("通过行号")]),t._v(" "),s("li",[t._v("通过正则匹配。")])]),t._v(" "),s("p",[t._v("记录相关内置变量。")]),t._v(" "),s("p",[t._v("NR：指定行号 number row")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 提取test第三行数据")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 指定行号为3")]),t._v("\n[root@zutuanxue ~]# awk 'NR==3{print $0}' test \n3 the quick brown fox         jumps over the lazy cat . dog\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 指定行的第一个字段精确匹配字符串为3")]),t._v("\n[root@zutuanxue ~]# awk '$1==\"3\"{print $0}' test \n3 the quick brown fox         jumps over the lazy cat . dog\n")])])]),s("p",[s("strong",[t._v("awk 对字符串的提取")])]),t._v(" "),s("p",[t._v("记录和字段的汇合点就是字符串。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印test第三行的第六个字段")]),t._v("\n[root@zutuanxue ~]# awk 'NR==3{print $6}' test\njumps\n")])])]),s("h3",{attrs:{id:"_10-4-awk-命令选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-awk-命令选项"}},[t._v("#")]),t._v(" 10.4 awk 命令选项")]),t._v(" "),s("p",[s("font",{attrs:{color:"pink"}},[t._v("「-F」: 指定字段与字段的分隔符。")])],1),t._v(" "),s("p",[t._v("当输出的数据流字段格式不是 aw k默认的字段格式时，我们可以使用 -F 命令选项来重新定义数据流字段分隔符。比如：")]),t._v(" "),s("p",[t._v("处理的文件是 /etc/passwd，希望打印第一列、第三列、最后一列：")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("[root@zutuanxue ~]# awk -F ':' '{print $1,$3,$NF}' /etc/passwd\nroot 0 /bin/bash\nbin 1 /sbin/nologin\ndaemon 2 /sbin/nologin\nadm 3 /sbin/nologin\nlp 4 /sbin/nologin\nsync 5 /bin/sync\nshutdown 6 /sbin/shutdown\nhalt 7 /sbin/halt\nmail 8 /sbin/nologin\noperator 11 /sbin/nologin\ngames 12 /sbin/nologin\nftp 14 /sbin/nologin\nnobody 99 /sbin/nologin\nsystemd-network 192 /sbin/nologin\ndbus 81 /sbin/nologin\npolkitd 999 /sbin/nologin\npostfix 89 /sbin/nologin\nchrony 998 /sbin/nologin\nsshd 74 /sbin/nologin\nntp 38 /sbin/nologin\ntcpdump 72 /sbin/nologin\nnscd 28 /sbin/nologin\nmysql 997 /sbin/nologin\nwww 996 /sbin/nologin\napache 48 /sbin/nologin\ntss 59 /sbin/nologin\nzabbix 995 /sbin/nologin\nsaslauth 994 /sbin/nologin\ngrafana 993 /sbin/nologin\n\n可以看的出，awk输出字段默认的分隔符也是空格\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("「-f file」：如果 awk 命令是日常重复工作，而又没有太多变化，可以将程序写入文件，每次使用 -f 调用程序文件就好，方便，高效。")])],1),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[t._v("[root@zutuanxue ~]# cat abc \n{print $1,$3,$NF}\n\n[root@zutuanxue ~]# awk -f abc test\n1 quick dog\n2 quick dog\n3 quick dog\n4 quick dog\n5 quick dog\n")])])]),s("p",[s("font",{attrs:{color:"pink"}},[t._v("「-v」 定义变量。")])],1),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@zutuanxue ~]# awk -v name='baism' 'BEGIN{print name}'\nbaism\n\n定义了一个变量 name=baism，然后调用变量读出数据。\n")])])]),s("h3",{attrs:{id:"_10-5-awk-程序运行优先级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-5-awk-程序运行优先级"}},[t._v("#")]),t._v(" 10.5 awk 程序运行优先级")]),t._v(" "),s("p",[t._v("关于 awk 程序的执行优先级，BEGIN 是优先级最高的代码块，是在执行 PROGRAM 之前执行的，不需要提供数据源，因为不涉及到任何数据的处理，也不依赖于 PROGRAM 代码块；PROGRAM是对数据流干什么，是必选代码块，也是默认代码块。所以在执行时必须提供数据源；END 是处理完数据流后的操作，如果需要执行 END 代码块，就必须需要 PROGRAM 的支持，单个无法执行。")]),t._v(" "),s("p",[t._v("BEGIN：处理数据源之前干什么，不需要数据源就可以执行。")]),t._v(" "),s("p",[t._v("PROGRAM： 对数据源干什么，【默认必须有】需要数据源。")]),t._v(" "),s("p",[t._v("END：处理完数据源后干什么，需要 PROGRAM 需要数据源。")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 优先级展示")]),t._v('\n[root@zutuanxue ~]# awk \'BEGIN{print "hello zutuanxue"}{print $0}END{print "bye zutuanxue"}\' test\nhello zutuanxue\n1 the quick brown fox jumps over the lazy cat . dog\n2 the quick brown fox jumps over the lazy cat . dog\n3 the quick brown fox         jumps over the lazy cat . dog\n4 the quick brown fox jumps over the lazy cat . dog\n5 the quick brown fox jumps over the lazy cat . dog\nbye zutuanxue\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 不需要数据源，可以直接执行")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{print \"hello world\"}'\nhello world\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 没有提供数据流，所以无法执行成功")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("]# awk '{print \"hello world\"}'\n[root@zutuanxue ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# awk 'END{print \"hello world\"}'\n")])])]),s("h3",{attrs:{id:"_10-6-awk-高级应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-6-awk-高级应用"}},[t._v("#")]),t._v(" 10.6 awk 高级应用")]),t._v(" "),s("p",[t._v("awk 是一门「语言」，那么就会符合语言的特性，除了可以定义变量外，还可以定义数组，还可以进行运算，流程控制。")]),t._v(" "),s("h5",{attrs:{id:"awk-定义变量和数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-定义变量和数组"}},[t._v("#")]),t._v(" awk 定义变量和数组")]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 定义变量")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("]# awk -v name='baism' 'BEGIN{print name}'\nbaism\n[root@zutuanxue ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# awk 'BEGIN{name=\"baism\";print name}'\nbaism\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 定义数组")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{array[0]=100;array[1]=200;print array[0],array[1]}'\n100 200\n")])])]),s("p",[s("strong",[t._v("awk 运算")])]),t._v(" "),s("ol",[s("li",[t._v("赋值运算 =")]),t._v(" "),s("li",[t._v("比较运算 > >= == < <= !=")]),t._v(" "),s("li",[t._v("数学运算 + - * / % ** ++ –")]),t._v(" "),s("li",[t._v("逻辑运算 && || ！")]),t._v(" "),s("li",[t._v("匹配运算 ~ !~ 精确匹配 == !=")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 赋值运算：主要是对变量或者数组赋值。")]),t._v("\n[root@zutuanxue ~]# awk -v name='baism' 'BEGIN{print name}'\nbaism\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 比较运算：如果比较的是字符串则按ascii编码顺序表比较。如果结果返回为真则用1表示，如果返回为假则用0表示。")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v(']# awk \'BEGIN{print "a" >= "b" }\'\n0\n[root@zutuanxue ')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# awk 'BEGIN{print \"a\" <= \"b\" }'\n1\n[root@zutuanxue ~]# awk '$1>4{print $0}' test\n5 the quick brown fox jumps over the lazy cat . dog\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 数字运算")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{print 100+3 }'\n103\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 逻辑运算")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{print 100>=2 && 100>=3 }'\n1\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 匹配运算")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("]# awk -F ':' '$1 ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v(' "^ro" {print $0}\' /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n')])])]),s("h5",{attrs:{id:"awk-环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-环境变量"}},[t._v("#")]),t._v(" awk 环境变量")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("变量")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("FIELDWIDTHS")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("以空格分隔的数字列表，用空格定义每个数据字段的精确宽度")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("FS")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("输入字段分隔符号 数据源的字段分隔符 -F")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("OFS")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("输出字段分隔符号")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("RS")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("输入记录分隔符")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("ORS")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("输出记录分隔符号")])])])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" FIELDWIDTHS: 重定义列宽并打印，注意不可以使用 $0 打印所有，因为 $0 是打印本行全内容，不会打印你定义的字段")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{FIELDWIDTHS=\"5 2 8\"}NR==1{print $1,$2,$3}' /etc/passwd\nroot: x: 0:0:root\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" FS: 指定数据源中字段分隔符，类似命令选项 -F")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{FS=\":\"}NR==1{print $1,$3,$NF}' /etc/passwd\nroot 0 /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" OFS: 指定输出到屏幕后字段的分隔符")]),t._v('\n[root@zutuanxue ~]# awk \'BEGIN{FS=":";OFS="-"}NR==1{print $1,$3,$NF}\' /etc/passwd\nroot-0-/bin/bash\n\n'),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" RS: 指定记录的分隔符")]),t._v("\n[root@zutuanxue ~]# awk 'BEGIN{RS=\"\"}{print $1,$13,$25,$37,$49}' test\n1 2 3 4 5\n将记录的分隔符修改为空行后，所有的行会变成一行，所以所有字段就在一行了。\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" ORS: 输出到屏幕后记录的分隔符，默认为回车")]),t._v("\n[root@zutuanxue "),s("span",{pre:!0,attrs:{class:"token strike"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v(']# awk \'BEGIN{RS="";ORS="'),s("span",{pre:!0,attrs:{class:"token italic"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token content"}},[t._v("\"}{print $1,$13,$25,$37,$49}' test\n1 2 3 4 5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("*")])]),t._v("[root@zutuanxue ")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("~")])]),t._v("]# \n可以看出，提示符和输出在一行了，因为默认回车换成了*\n")])])]),s("h5",{attrs:{id:"awk-流程控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#awk-流程控制"}},[t._v("#")]),t._v(" awk 流程控制")]),t._v(" "),s("p",[s("strong",[t._v("if")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 学习用例")]),t._v("\n[root@zutuanxue ~]# cat num\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 单if语句")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 打印$1大于5的行")]),t._v("\n[root@zutuanxue ~]# awk '{if($1>5)print $0}' num\n6\n7\n8\n9\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" if...else语句")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 假如$1大于5则除以2输出，否则乘以2输出")]),t._v("\n[root@zutuanxue ~]# awk '{if($1>5)print $1/2;else print $1*2}' num\n2\n4\n6\n8\n10\n3\n3.5\n4\n4.5\n")])])]),s("p",[s("strong",[t._v("for")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 学习用例")]),t._v("\n[root@zutuanxue ~]# cat num2\n60 50 100\n150 30 10\n70 100 40\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将文件中的每行的数值累加，和大于或等于150就停止累加")]),t._v("\n[root@zutuanxue ~]# awk '{sum=0;i=1;while(sum<150){sum+=$i;i++}print sum}' num2\n210\n150\n170\n")])])]),s("p",[s("strong",[t._v("do..while")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 学习用例")]),t._v("\n[root@zutuanxue ~]# cat num2\n60 50 100\n150 30 10\n70 100 40\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 将文件中的每行的数值累加，和大于或等于150就停止累加")]),t._v("\n[root@zutuanxue ~]# awk '{sum=0;i=1;do{sum+=$i;i++}while(sum<150);print sum}' num2\n210\n150\n170\n")])])]),s("p",[s("strong",[t._v("break/continue")])]),t._v(" "),s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 学习用例")]),t._v("\n[root@zutuanxue ~]# cat num2\n60 50 100\n150 30 10\n70 100 40\n\n"),s("span",{pre:!0,attrs:{class:"token title important"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("#")]),t._v(" 累加每行数值，和大于150停止累加")]),t._v("\n[root@zutuanxue ~]# awk '{\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" sum=0\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" i=1\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" while (i<4){\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v("    sum+=$i\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v("    if (sum>150){\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v("       break\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v("    }\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v("    i++\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" }\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" print sum\n"),s("span",{pre:!0,attrs:{class:"token blockquote punctuation"}},[t._v(">")]),t._v(" }' num2\n\n210\n180\n170\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);