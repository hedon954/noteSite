(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{456:function(t,a,s){"use strict";s.r(a);var e=s(47),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_3-语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-语法"}},[t._v("#")]),t._v(" 3. 语法")]),t._v(" "),s("h2",{attrs:{id:"_3-1-dcl-data-control-language"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-dcl-data-control-language"}},[t._v("#")]),t._v(" 3.1 DCL (Data Control Language)")]),t._v(" "),s("h3",{attrs:{id:"创建用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建用户"}},[t._v("#")]),t._v(" 创建用户")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("CREATE USER '用户'@'主机' IDENTIFIED BY '密码' [WITH max_user_connection n];\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("CREATE USER 'hedon'@'192.168.0.%' IDENTIFIED BY 'Hedon123!';\n")])])]),s("h3",{attrs:{id:"查询用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询用户"}},[t._v("#")]),t._v(" 查询用户")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SELECT user,host FROM mysql.user;\n")])])]),s("h3",{attrs:{id:"删除用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[t._v("#")]),t._v(" 删除用户")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("DROP USER '用户名'@'主机';\n")])])]),s("h3",{attrs:{id:"查看用户权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看用户权限"}},[t._v("#")]),t._v(" 查看用户权限")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SHOW grants for '用户名'@'主机';\n")])])]),s("h3",{attrs:{id:"授权"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#授权"}},[t._v("#")]),t._v(" 授权")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# MySQL 8.0 以上要求 user 必须要存在才能 GRANT\nGRANT 权限1,权限2 ON 数据库名.数据库表名 TO '用户名'@'主机' [WITH GRANT OPTION];\n")])])]),s("h3",{attrs:{id:"收回权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#收回权限"}},[t._v("#")]),t._v(" 收回权限")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("REVOKE 权限 ON 数据库.数据库表 FROM '用户名'@'主机' ;\n")])])]),s("h2",{attrs:{id:"_3-2-ddl-data-definition-language"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-ddl-data-definition-language"}},[t._v("#")]),t._v(" 3.2 DDL (Data Definition Language)")]),t._v(" "),s("h3",{attrs:{id:"数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[t._v("#")]),t._v(" 数据库")]),t._v(" "),s("p",[s("strong",[t._v("查询数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("show databases;\n")])])]),s("p",[s("strong",[t._v("查询单个数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("show create database 数据库名;\n")])])]),s("p",[s("strong",[t._v("新增数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create database 数据库名;\n")])])]),s("p",[s("strong",[t._v("切换数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("use 数据库名;\n")])])]),s("p",[s("strong",[t._v("修改数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("alter database 数据库名 charset 字符集;\n")])])]),s("p",[s("strong",[t._v("清空数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("truncate database 数据库名;\n")])])]),s("p",[s("strong",[t._v("删除数据库")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("drop database 数据库名;\n")])])]),s("h3",{attrs:{id:"数据表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据表"}},[t._v("#")]),t._v(" 数据表")]),t._v(" "),s("p",[s("strong",[t._v("新建表")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create table imc_course(\n\t  course_id INT UNSIGNED auto_increment NOT NULL COMMENT '课程ID',\n    title VARCHAR(20) NOT NULL DEFAULT '' COMMENT '课程主标题',\n    title_desc VARCHAR(50) NOT NULL DEFAULT '' COMMENT '课程副标题',\n    type_id SMALLINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '课程方向ID',\n    class_id SMALLINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '课程分类ID',\n    level_id SMALLINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '课程难度ID',\n    online_time DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '课程上线时间',\n    study_cnt INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '学习人数',\n    course_time TIME NOT NULL DEFAULT '0:00' COMMENT '课程时长',\n    intro VARCHAR(200) NOT NULL DEFAULT '' COMMENT '课程简介',\n    info VARCHAR(200) NOT NULL DEFAULT '' COMMENT '学习需知',\n    harvest VARCHAR(200) NOT NULL DEFAULT '' COMMENT '课程收获',\n    user_id INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '讲师ID',\n    main_pic VARCHAR(200) NOT NULL DEFAULT '' COMMENT '课程主图片',\n    content_score DECIMAL(3,1) NOT NULL DEFAULT 0.0 COMMENT '内容评分',\n    level_score DECIMAL (3,1) NOT NULL DEFAULT 0.0 COMMENT '简单易懂',\n    login_score DECIMAL (3,1) NOT NULL DEFAULT 0.0 COMMENT '逻辑清晰',\n    score DECIMAL(3,1) NOT NULL DEFAULT 0.0 COMMENT '综合评分',\n    PRIMARY KEY (course_id),\n    UNIQUE KEY udx_title(title)\n)DEFAULT charset=utf8,COMMENT '课程主表'\n")])])]),s("p",[s("strong",[t._v("修改表")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("alter table\n")])])]),s("p",[s("strong",[t._v("重命名表")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("rename table 旧表名 TO 新表名;\n")])])]),s("p",[s("strong",[t._v("清空表")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("truncate table 数据表名;\n")])])]),s("p",[s("strong",[t._v("删除表")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("drop table [if exists] 数据表名;\n")])])]),s("h3",{attrs:{id:"视图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视图"}},[t._v("#")]),t._v(" 视图")]),t._v(" "),s("p",[s("strong",[t._v("新建视图")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("create view view_name\nAS\n SELECT \n  #查询语句.....\n")])])]),s("p",[s("strong",[t._v("修改视图")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("alter view\n")])])]),s("p",[s("strong",[t._v("删除视图")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("drop view\n")])])]),s("h3",{attrs:{id:"索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[t._v("#")]),t._v(" 索引")]),t._v(" "),s("p",[s("strong",[t._v("PRIMARY KEY（主键索引）")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ALTER TABLE 'table_name' ADD PRIMARY KEY ('column');\n")])])]),s("p",[s("strong",[t._v("UNIQUE KEY（唯一索引）")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ALTER TABLE 'table_name' ADD UNIQUE ('column');\n")])])]),s("p",[s("strong",[t._v("INDEX（普通索引）")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ALTER TABLE 'table_name' ADD INDEX index_name ('column');\n")])])]),s("p",[s("strong",[t._v("FULLTEXT（全文索引）")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ALTER TABLE 'table_name' ADD FULLTEXT ('column');\n")])])]),s("p",[s("strong",[t._v("多列索引")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ALTER TABLE 'table_name' ADD INDEX index_name ('column1','column2','column3');\n")])])]),s("p",[s("strong",[t._v("删除索引")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("drop index\n")])])]),s("h2",{attrs:{id:"_3-3-dml-data-manipulation-language"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-dml-data-manipulation-language"}},[t._v("#")]),t._v(" 3.3 DML（Data Manipulation Language）")]),t._v(" "),s("h3",{attrs:{id:"数据表-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据表-2"}},[t._v("#")]),t._v(" 数据表")]),t._v(" "),s("p",[s("strong",[t._v("插入数据")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("INSERT INTO 数据表名(字段1,字段2)\nVALUES (数据1),(数据2);\n\nINSERT INTO imc_class(class_name)\nVALUES ('MYSQL'),('REDIS'),('MONGODB'),('ORACLE');\n\n#当有重复数据段的时候，下面 class_name 是唯一约束，可以使用 ON DUPLICATE KEY UPDATE，会先删除原来的数据，然后插入新的\nINSERT INTO imc_class(class_name)\nVALUES ('MYSQL')\nON DUPLICATE KEY UPDATE\nadd_time=CURRENT_TIMESTAMP;\n")])])]),s("p",[s("strong",[t._v("查询数据")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("　　select \n　　\n　　[distinct] \t\t\t\t\t\t\t\t-------------去重\n　　\n　　字段名                     -------------查询什么字段   \n\n　　from 表名                  ------------来自什么表\n\n　　where     条件语句          ---------条件      # where xxx = null 查不出来，要用 where xxx is (not) null\n\n　　group by                   ----------按什么字段分组\n\n　　having                     -----------过滤条件\n\n　　order by XXX asc(desc)     -------------排序\n\n　　limit m,n                  -----------分页(索引从m开始，第一条索引为0，第2条索引为1；n表示每页显示的数据条数)\n")])])]),s("ul",[s("li",[t._v("group by\n　　注意：group by 必须和"),s("code",[t._v("聚合函数")]),t._v("结合使用。常见聚合函数：sum(), count(), avg(), min(), max() 等。")])]),t._v(" "),s("p",[t._v("group by 后边的分组字段要与 select 后边的字段保持一致。")]),t._v(" "),s("p",[t._v("如果过滤分组，则使用 "),s("code",[t._v("having+过滤条件")]),t._v(" 来完成。")]),t._v(" "),s("p",[t._v("场景：查询每个年级的总人数和班级数量")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("select 年级，sum(人数) from 表 group by 年级；\n")])])]),s("ul",[s("li",[t._v("having\n​\t\thaving 常常与 group by 一起使用，是对 group by 分组结果再次进行过滤。")])]),t._v(" "),s("p",[t._v("​\t\thaving 相当于 where 语句，但 having 可以包含聚合函数，但 where 不可以。")]),t._v(" "),s("p",[t._v("例如：\n"),s("code",[t._v("mysql #例1 select 学号，sum(成绩) from 成绩表 group by 学号 having sum（成绩）>600； #例2 select class_name, level_name, count(*) from imc_course a JOIN imc_class b on a.class_id = b.class_id JOIN imc_level c on c.level_id = a.level_id group by class_name,level_name having count(*)>3;")])]),t._v(" "),s("p",[s("strong",[t._v("内关联")])]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://tva1.sinaimg.cn/large/008eGmZEgy1gnhpltbh1zj30k00c4gpu.jpg",alt:"image-20210209234049336"}}),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("select 字段1,字段2 from TABLEA A inner join TABLEB B on A.Key = B.key;\n")])])]),s("p",[s("strong",[t._v("外关联")])]),t._v(" "),s("p",[t._v("左外连接：左边的表不加限制，匹配不到，右表为null —— "),s("code",[t._v("left outer join")])]),t._v(" "),s("p",[t._v("右外连接：右边的表不加限制，匹配不到，左表为null —— "),s("code",[t._v("right outer join")])]),t._v(" "),s("p",[t._v("全外连接：所有两个表中的行都会包含在集合中，如果匹配不上，在各自的对应的位置显示 null ——"),s("code",[t._v("full outer join")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("select 表1.字段名，表2.字段名 from 表1 left outer join 表2 on 表1.字段=表2.字段；\n")])])]),s("p",[t._v("举例：查询只存在于 a 表但是不存在于 b 表的数据：")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("course_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" imc_course a\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("left")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("join")]),t._v(" imc_chapter b "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("course_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("course_id\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("course_id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://i.loli.net/2021/03/22/9FYLl4PdnX3OiRM.png",alt:"image-20210322162333328"}})]),t._v(" "),s("p",[s("font",{attrs:{color:"pink"}},[t._v("如果是join，在没有其他过滤条件的情况下"),s("strong",[t._v("MySQL会自动选择小表作为驱动表")]),t._v("。")])],1),t._v(" "),s("p",[s("strong",[t._v("删除数据")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("DELETE [表名] FROM table_name 条件;\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 删除课程表中没有章节信息的课程\nDELETE a\nFROM imc_course a\nLEFT JOIN imc_chapter b ON b.course_id = a.course_id\nWHERE b.course_id IS NULL;\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 删除重复数据，只保留 id 最小的\n# 删除课程方向表中重复的课程方向，保留方向ID最小的一条，并在方向名称上增加唯一索引\nDELETE a\nFROM imc_type a\nJOIN(\n\tSELECT type_name,MIN(type_id) AS min_type_id, count(*)\n\tFROM imc_type\n\tGROUP BY type_name having count(*)>1\n) b ON a.type_name = b.type_name AND a.type_id > min_type_id;\n")])])]),s("p",[s("strong",[t._v("更新数据")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("UPDATE 表名 SET col1_name = value1, col2_name = value2 [条件];\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 随机推荐10门课程\nUPDATE imc_course\nSET is_recommand = 1\nORDER BY rand()  #随机函数\nLIMIT 10;\n")])])]),s("h2",{attrs:{id:"_3-4-tcl-transaction-control-language"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-tcl-transaction-control-language"}},[t._v("#")]),t._v(" 3.4 TCL（Transaction Control Language）")]),t._v(" "),s("h3",{attrs:{id:"设置事务的隔离级别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置事务的隔离级别"}},[t._v("#")]),t._v(" 设置事务的隔离级别")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SET [PERSIST|SESSION|GLOBAL]\n\tTRANSACTION ISOLATION LEVEL\n{\n\tREAD UNCOMMITTED|\n\tREAD COMMITTED|\n\tREPEATABLE READ|\n\tSERIALIZABLE\n}\n")])])]),s("h3",{attrs:{id:"事务过程中的一些指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务过程中的一些指令"}},[t._v("#")]),t._v(" 事务过程中的一些指令")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("BEGIN;\n# SQL;\n[COMMIT;]\n[ROLLBACK;]\n")])])]),s("h2",{attrs:{id:"_3-5-聚合函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-聚合函数"}},[t._v("#")]),t._v(" 3.5 聚合函数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("聚合函数")]),t._v(" "),s("th",[t._v("数目")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("COUNT(*) / COUNT([distince] col)")]),t._v(" "),s("td",[t._v("计算符合条件的数据行数，distinct 可以去重。")])]),t._v(" "),s("tr",[s("td",[t._v("SUM(col_name)")]),t._v(" "),s("td",[t._v("计算表中符合条件的数值列的合计值。")])]),t._v(" "),s("tr",[s("td",[t._v("AVG(col_name)")]),t._v(" "),s("td",[t._v("计算表中符合条件的数值列的平均值。")])]),t._v(" "),s("tr",[s("td",[t._v("MAX(col_name)")]),t._v(" "),s("td",[t._v("计算表中符合条件的任意列中数据的最大值")])]),t._v(" "),s("tr",[s("td",[t._v("MIN(col_name)")]),t._v(" "),s("td",[t._v("计算表中符合条件的任意列中数据的最小值")])])])]),t._v(" "),s("h3",{attrs:{id:"count-col"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#count-col"}},[t._v("#")]),t._v(" COUNT(col)")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SELECT COUNT(COLOR='BLUE' OR NULL) AS BLUE,COUNT(COLOR='BLACK' OR NULL) AS BLACK FROM TABLE;\n")])])]),s("h3",{attrs:{id:"sum-col-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sum-col-name"}},[t._v("#")]),t._v(" SUM(col_name)")]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("SELECT SUM(IF(COLOR='BLUE',1,0)) AS BLUE,SUM(IF(COLOR='BLACK',1,0)) AS BLACK FROM TABLE;\n")])])]),s("h3",{attrs:{id:"max-col-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#max-col-name"}},[t._v("#")]),t._v(" MAX(col_name)")]),t._v(" "),s("ul",[s("li",[t._v("查询学习人数最多的课程")])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("select title,study_cnt \nfrom imc_course\nwhere study_cnt = (\n  \tselect MAX(study_cnt) \n  \tfrom imc_course\n);\n")])])]),s("h2",{attrs:{id:"_3-6-时间函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-时间函数"}},[t._v("#")]),t._v(" 3.6 时间函数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("函数名")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("CURDATE() / CURTIME()")]),t._v(" "),s("td",[t._v("返回当前日期 / 返回当前时间")])]),t._v(" "),s("tr",[s("td",[t._v("NOW()")]),t._v(" "),s("td",[t._v("返回当前日期和时间")])]),t._v(" "),s("tr",[s("td",[t._v("DATE_FORMAT(date,fmt)")]),t._v(" "),s("td",[t._v("按照 fmt 的格式，对日期 date 进行格式化"),s("br"),t._v("%Y：四位的年"),s("br"),t._v("%m：月份（00..12）"),s("br"),t._v("%d：天（00..31）"),s("br"),t._v("%H：小时（00..24）"),s("br"),t._v("%i：分钟（00..59）"),s("br"),t._v("%s：秒（00..59）")])]),t._v(" "),s("tr",[s("td",[t._v("SEC_TO_TIME(seconds)")]),t._v(" "),s("td",[t._v("把秒数转换为（小时：分：秒）")])]),t._v(" "),s("tr",[s("td",[t._v("TIME_TO_SEC(time)")]),t._v(" "),s("td",[t._v("把（小时：分：秒）转换为秒数")])]),t._v(" "),s("tr",[s("td",[t._v("DATEDIFF(date1,date2)")]),t._v(" "),s("td",[t._v("返回 date1 和 date2 两个日期相差的天数")])]),t._v(" "),s("tr",[s("td",[t._v("DATE_ADD(date,INITERVAL expr unit)")]),t._v(" "),s("td",[t._v("对给定的日期增加或减少指定的时间单元（unti：DAY天/HOUR小时/MINUTES分钟/SECONDS秒）")])]),t._v(" "),s("tr",[s("td",[t._v("EXTRACT(unit FROM date)")]),t._v(" "),s("td",[t._v("提取日期 date 的指定部分")])]),t._v(" "),s("tr",[s("td",[t._v("UNIX_TIMESTAMP()")]),t._v(" "),s("td",[t._v("返回 unix 时间戳（从1970年1月1号到当前时间经过的秒数）")])]),t._v(" "),s("tr",[s("td",[t._v("FROM_UNIXTIME()")]),t._v(" "),s("td",[t._v("把 unix 时间戳转换为日期时间")])]),t._v(" "),s("tr",[s("td",[t._v("CURRENT_TIMESTAMP()")]),t._v(" "),s("td",[t._v("插入数据时自动赋值为当前时间")])]),t._v(" "),s("tr",[s("td",[t._v("ON UPDATE CURRENT_TIMESTAMP()")]),t._v(" "),s("td",[t._v("更新数据时自动刷新时间为当前时间")])])])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 格式化当前时间\nSELECT DATE_FORMAT(NOW(),'%Y%m%d %H:%i:%s');\n")])])]),s("div",{staticClass:"language-MYSQL extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 在当前时间加一天\nSELECT NOW(), DATE_ADD(NOW(),INTERVAL 1 DAY);\n# 在当前时间减去1小时30分钟\nSELECT NOW(), DATE_ADD(NOW(), INTERVAL '-1:30' HOUR_MINUTE);\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 提取日期中的年份/日期\nSELECT NOW(), EXTRACT(YEAR FROM NOW()), EXTRACT(DAY FROM NOW());\n")])])]),s("h2",{attrs:{id:"_3-7-字符串函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-字符串函数"}},[t._v("#")]),t._v(" 3.7 字符串函数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("函数名")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("CONCAT(str1,str2,...)")]),t._v(" "),s("td",[t._v("把 str1、str2、.. 连接成一个字符串")])]),t._v(" "),s("tr",[s("td",[t._v("CONCAT_WS(sep,str1,str2,..)")]),t._v(" "),s("td",[t._v("用指定的分隔符 sep 连接字符串")])]),t._v(" "),s("tr",[s("td",[t._v("CHAR_LENGTH(str)")]),t._v(" "),s("td",[t._v("返回字符串 str 的字符个数")])]),t._v(" "),s("tr",[s("td",[t._v("LENGTH(str)")]),t._v(" "),s("td",[t._v("返回字符串 str 的字节个数")])]),t._v(" "),s("tr",[s("td",[t._v("FORMAT(X,D[,locale])")]),t._v(" "),s("td",[t._v('将数字字符串 X 格式化为格式，如"#,###,###.##"，并舍入到 D 位小数')])]),t._v(" "),s("tr",[s("td",[t._v("LEFT(str,len) / RIGHT(str,len)")]),t._v(" "),s("td",[t._v("从字符串的左/右边起返回 len 长度的子字符串")])]),t._v(" "),s("tr",[s("td",[t._v("SUBSTRING(str,pos,[len])")]),t._v(" "),s("td",[t._v("从字符串 str 的 pos 位置起（从1开始）返回长度为 len 的子串")])]),t._v(" "),s("tr",[s("td",[t._v("SUBSTRING_INDEX(str,delim,count)")]),t._v(" "),s("td",[t._v("返回字符串 str 按 delim 分割的前 count 个子字符串")])]),t._v(" "),s("tr",[s("td",[t._v("LOCATE(substr,str)")]),t._v(" "),s("td",[t._v("在字符串 str 中返回子串 substr 第一次出现的位置（从0开始）")])]),t._v(" "),s("tr",[s("td",[t._v("TRIM([remstr FROM] str)")]),t._v(" "),s("td",[t._v("从字符串 str 两端删除不需要的字符 remstr")])])])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 合并字符串\nSELECT CONCAT(class_name,title),CONCAT_WS('---',class_name,title)\nFROM imc_course a\nJOIN imc_class b ON b.class_id = a.class_id;\n")])])]),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 格式化数字\nSELECT FORMAT(123456.789,4);\n")])])]),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://tva1.sinaimg.cn/large/008eGmZEgy1gow91el4iwj30xe02owem.jpg",alt:"image-20210325165125549"}}),t._v(" "),s("h2",{attrs:{id:"_3-8-其他函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-其他函数"}},[t._v("#")]),t._v(" 3.8 其他函数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("函数名")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ROUND(X,D)")]),t._v(" "),s("td",[t._v("对数值 X 进行四舍五入保留 D 位小数")])]),t._v(" "),s("tr",[s("td",[t._v("RAND()")]),t._v(" "),s("td",[t._v("返回一个在 0 和 1 之间的随机数")])]),t._v(" "),s("tr",[s("td",[t._v("CASE WHEN [condition]"),s("br"),t._v("THEN result"),s("br"),t._v("[WHEN [condition] THEN result ...] "),s("br"),t._v("END")]),t._v(" "),s("td",[t._v("case 语句")])]),t._v(" "),s("tr",[s("td",[t._v("IF(expr, resIfTure, resIfFalse)")]),t._v(" "),s("td",[t._v("if 语句")])]),t._v(" "),s("tr",[s("td",[t._v("MD5(str)")]),t._v(" "),s("td",[t._v("返回 str 的MD5 值")])])])]),t._v(" "),s("div",{staticClass:"language-mysql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# 将男的都是变成女的，女的都变成男的\nUPDATE imc_user\nSET sex  = (\n\tCASE \n    WHEN sex = 1 THEN 0 \n\tELSE 1\n    END\n);\n")])])]),s("Vssue")],1)}),[],!1,null,null,null);a.default=r.exports}}]);